{% extends "base.html" %}
{% load static %}

{% block title %}Import Employees - HR Management{% endblock %}

{% block breadcrumbs %}
<div class="container-fluid pt-3 pb-2 border-bottom bg-light">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="{% url 'core:home' %}">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="{% url 'hr:dashboard' %}">HR & Administration</a></li>
            <li class="breadcrumb-item active">Import Employees</li>
        </ol>
    </nav>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="mb-2" style="color: #212529; font-weight: 700;">
                <i class="bi bi-upload text-success me-2"></i>
                Import Employees
            </h2>
            <p class="mb-0" style="color: #495057;">
                Bulk import employee data from CSV or Excel files
            </p>
        </div>
    </div>

    <div class="row">
        <!-- Upload Section -->
        <div class="col-lg-8">
            <div class="card shadow-sm mb-4">
                <div class="card-body p-4">
                    <h5 class="mb-3" style="color: #212529; font-weight: 600;">
                        <i class="bi bi-cloud-upload me-2"></i>Upload File
                    </h5>

                    <div class="border-2 border-dashed p-5 text-center" style="border: 2px dashed #dee2e6; border-radius: 12px; background: #f8f9fa;">
                        <i class="bi bi-file-earmark-arrow-up display-1" style="color: #6c757d;"></i>
                        <h5 class="mt-3 mb-2" style="color: #212529;">Drag and drop your file here</h5>
                        <p style="color: #6c757d;">or click to browse</p>

                        <form method="post" enctype="multipart/form-data" class="mt-4">
                            {% csrf_token %}
                            <div class="mb-3">
                                <input type="file" class="form-control form-control-lg" name="import_file" accept=".csv,.xlsx,.xls" required>
                            </div>

                            <button type="submit" class="btn btn-success btn-lg px-5">
                                <i class="bi bi-upload me-2"></i>Upload and Import
                            </button>
                        </form>
                    </div>

                    <div class="mt-3" style="color: #6c757d; font-size: 0.875rem;">
                        <i class="bi bi-info-circle me-1"></i>
                        Supported formats: CSV, Excel (.xlsx, .xls). Maximum file size: 10MB
                    </div>
                </div>
            </div>

            <!-- Import Progress (Hidden by default) -->
            <div class="card shadow-sm d-none" id="importProgress">
                <div class="card-body p-4">
                    <h5 class="mb-3" style="color: #212529; font-weight: 600;">
                        <i class="bi bi-hourglass-split me-2"></i>Import Progress
                    </h5>

                    <div class="progress" style="height: 30px;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                             role="progressbar"
                             style="width: 0%;"
                             aria-valuenow="0"
                             aria-valuemin="0"
                             aria-valuemax="100">0%</div>
                    </div>

                    <div class="mt-3" style="color: #495057;">
                        <p class="mb-1"><strong>Status:</strong> Processing...</p>
                        <p class="mb-0"><strong>Records:</strong> <span id="recordCount">0</span> / <span id="totalRecords">0</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instructions & Template -->
        <div class="col-lg-4">
            <!-- Download Template -->
            <div class="card shadow-sm mb-4" style="border-left: 4px solid #0d6efd;">
                <div class="card-body p-4">
                    <h5 class="mb-3" style="color: #212529; font-weight: 600;">
                        <i class="bi bi-file-earmark-spreadsheet me-2"></i>Template
                    </h5>

                    <p style="color: #495057; font-size: 0.925rem;">
                        Download the template file to ensure your data is formatted correctly.
                    </p>

                    <div class="d-grid gap-2">
                        <a href="#" class="btn btn-outline-primary">
                            <i class="bi bi-download me-2"></i>Download CSV Template
                        </a>
                        <a href="#" class="btn btn-outline-primary">
                            <i class="bi bi-download me-2"></i>Download Excel Template
                        </a>
                    </div>
                </div>
            </div>

            <!-- Instructions -->
            <div class="card shadow-sm" style="border-left: 4px solid #198754;">
                <div class="card-body p-4">
                    <h5 class="mb-3" style="color: #212529; font-weight: 600;">
                        <i class="bi bi-list-check me-2"></i>Instructions
                    </h5>

                    <ol class="ps-3 mb-0" style="color: #495057; font-size: 0.925rem;">
                        <li class="mb-2">Download the template file above</li>
                        <li class="mb-2">Fill in employee information following the column headers</li>
                        <li class="mb-2">Ensure all required fields are completed</li>
                        <li class="mb-2">Upload the completed file using the form</li>
                        <li class="mb-0">Review the import results and fix any errors</li>
                    </ol>

                    <div class="alert alert-info mt-3 mb-0" style="background: #cfe2ff; border-color: #0dcaf0; color: #212529; font-size: 0.875rem;">
                        <i class="bi bi-lightbulb-fill me-1"></i>
                        <strong>Tip:</strong> Test with a small file first to verify the format is correct.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Imports -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h5 class="mb-3" style="color: #212529; font-weight: 600;">
                        <i class="bi bi-clock-history me-2"></i>Recent Imports
                    </h5>

                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead style="background: #f8f9fa;">
                                <tr style="color: #212529;">
                                    <th>Date</th>
                                    <th>Filename</th>
                                    <th>Records</th>
                                    <th>Success</th>
                                    <th>Errors</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody style="color: #495057;">
                                <tr>
                                    <td colspan="7" class="text-center py-4">
                                        <i class="bi bi-inbox display-4" style="color: #dee2e6;"></i>
                                        <p class="mt-2 mb-0" style="color: #6c757d;">No import history yet</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
