
function initSidebarToggle() {
const sidebarToggle = document.getElementById('sidebarToggle');
const sidebar = document.getElementById('sidebar');
const sidebarBackdrop = document.getElementById('sidebarBackdrop');
if (!sidebarToggle || !sidebar) {
return;
}
sidebarToggle.addEventListener('click', function() {
sidebar.classList.toggle('show');
if (sidebarBackdrop) {
sidebarBackdrop.classList.toggle('show');
}
});
if (sidebarBackdrop) {
sidebarBackdrop.addEventListener('click', function() {
sidebar.classList.remove('show');
sidebarBackdrop.classList.remove('show');
});
}
document.addEventListener('click', function(event) {
if (window.innerWidth < 992) {
const clickedInsideSidebar = sidebar.contains(event.target);
const clickedToggleButton = sidebarToggle.contains(event.target);
if (!clickedInsideSidebar && !clickedToggleButton) {
sidebar.classList.remove('show');
if (sidebarBackdrop) {
sidebarBackdrop.classList.remove('show');
}
}
}
});
}
function initCollapsibleSections() {
const sectionToggles = document.querySelectorAll('.nav-section-toggle');
const currentPath = window.location.pathname;
sectionToggles.forEach(toggle => {
const sectionId = toggle.getAttribute('data-section');
const sectionContent = document.getElementById(sectionId);
const toggleIcon = toggle.querySelector('.toggle-icon');
if (!sectionContent) {
return;
}
const sectionLinks = sectionContent.querySelectorAll('a.nav-sub-item');
let isCurrentSection = false;
sectionLinks.forEach(link => {
const href = link.getAttribute('href');
if (href && currentPath.startsWith(href.split('?')[0])) {
isCurrentSection = true;
link.classList.add('active');
}
});
const savedState = localStorage.getItem(`nav-section-${sectionId}`);
if (isCurrentSection || savedState === 'expanded') {
sectionContent.style.display = 'flex';
if (toggleIcon) {
toggleIcon.style.transform = 'rotate(180deg)';
}
if (isCurrentSection) {
localStorage.setItem(`nav-section-${sectionId}`, 'expanded');
}
}
toggle.addEventListener('click', function(e) {
e.preventDefault();
e.stopPropagation();
const isVisible = sectionContent.style.display !== 'none';
if (isVisible) {
sectionContent.style.display = 'none';
if (toggleIcon) {
toggleIcon.style.transform = 'rotate(0deg)';
}
localStorage.setItem(`nav-section-${sectionId}`, 'collapsed');
} else {
sectionContent.style.display = 'flex';
if (toggleIcon) {
toggleIcon.style.transform = 'rotate(180deg)';
}
localStorage.setItem(`nav-section-${sectionId}`, 'expanded');
}
});
});
}
function highlightActiveNavLinks() {
const currentPath = window.location.pathname;
const navLinks = document.querySelectorAll('.nav-link, .nav-item a');
navLinks.forEach(link => {
const href = link.getAttribute('href');
if (href && currentPath.startsWith(href) && href !== '/') {
link.classList.add('active');
}
});
}
function handleResponsiveNav() {
const sidebar = document.getElementById('sidebar');
const sidebarBackdrop = document.getElementById('sidebarBackdrop');
if (!sidebar) {
return;
}
window.addEventListener('resize', function() {
if (window.innerWidth >= 992) {
sidebar.classList.remove('show');
if (sidebarBackdrop) {
sidebarBackdrop.classList.remove('show');
}
}
});
}
function initDropdowns() {
document.querySelectorAll('.dropdown-menu a').forEach(link => {
link.addEventListener('click', function() {
});
});
}
function initKeyboardNav() {
document.addEventListener('keydown', function(e) {
if (e.key === 'Escape') {
const sidebar = document.getElementById('sidebar');
const sidebarBackdrop = document.getElementById('sidebarBackdrop');
if (sidebar && sidebar.classList.contains('show')) {
sidebar.classList.remove('show');
if (sidebarBackdrop) {
sidebarBackdrop.classList.remove('show');
}
}
}
});
}
document.addEventListener('DOMContentLoaded', function() {
initSidebarToggle();
initCollapsibleSections();
highlightActiveNavLinks();
handleResponsiveNav();
initDropdowns();
initKeyboardNav();
});
window.initSidebarToggle = initSidebarToggle;
window.initCollapsibleSections = initCollapsibleSections;
window.highlightActiveNavLinks = highlightActiveNavLinks;