# Generated by Django 5.2.6 on 2025-11-17 11:31

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Equipment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Unique equipment code', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Equipment name', max_length=200)),
                ('description', models.TextField(blank=True, default='', help_text='Equipment description')),
                ('equipment_type', models.CharField(choices=[('MACHINE', 'Machine'), ('TOOL', 'Tool'), ('VEHICLE', 'Vehicle'), ('MEASUREMENT', 'Measurement Device'), ('SAFETY', 'Safety Equipment'), ('IT_EQUIPMENT', 'IT Equipment'), ('OTHER', 'Other')], db_index=True, default='MACHINE', help_text='Type of equipment', max_length=20)),
                ('manufacturer', models.CharField(blank=True, default='', help_text='Manufacturer name', max_length=200)),
                ('model_number', models.CharField(blank=True, default='', help_text='Model number', max_length=100)),
                ('serial_number', models.CharField(blank=True, default='', help_text='Serial number', max_length=100)),
                ('location_id', models.BigIntegerField(blank=True, db_index=True, help_text='Location ID where equipment is installed', null=True)),
                ('location_name', models.CharField(blank=True, default='', help_text='Location name (cached)', max_length=200)),
                ('department_id', models.BigIntegerField(blank=True, help_text='Department ID that owns this equipment', null=True)),
                ('department_name', models.CharField(blank=True, default='', help_text='Department name (cached)', max_length=200)),
                ('status', models.CharField(choices=[('OPERATIONAL', 'Operational'), ('MAINTENANCE_SCHEDULED', 'Maintenance Scheduled'), ('UNDER_MAINTENANCE', 'Under Maintenance'), ('OUT_OF_SERVICE', 'Out of Service'), ('DECOMMISSIONED', 'Decommissioned')], db_index=True, default='OPERATIONAL', help_text='Current equipment status', max_length=30)),
                ('purchase_date', models.DateField(blank=True, help_text='Date of purchase', null=True)),
                ('installation_date', models.DateField(blank=True, help_text='Date of installation', null=True)),
                ('warranty_expiry_date', models.DateField(blank=True, help_text='Warranty expiration date', null=True)),
                ('last_maintenance_date', models.DateField(blank=True, help_text='Date of last maintenance', null=True)),
                ('next_maintenance_date', models.DateField(blank=True, db_index=True, help_text='Scheduled next maintenance', null=True)),
                ('maintenance_interval_days', models.IntegerField(blank=True, help_text='Days between scheduled maintenance', null=True)),
                ('purchase_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Purchase cost', max_digits=12, null=True)),
                ('current_value', models.DecimalField(blank=True, decimal_places=2, help_text='Current book value', max_digits=12, null=True)),
                ('total_hours_operated', models.DecimalField(decimal_places=2, default=0, help_text='Total hours of operation', max_digits=10)),
                ('qcode_id', models.BigIntegerField(blank=True, db_index=True, help_text='QCode ID for this equipment', null=True)),
                ('specifications', models.JSONField(blank=True, default=dict, help_text='Technical specifications as JSON')),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Equipment',
                'verbose_name_plural': 'Equipment',
                'db_table': 'qrcode_equipment',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='MaintenanceRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('title', models.CharField(help_text='Short description of issue', max_length=200)),
                ('description', models.TextField(help_text='Detailed description of the issue')),
                ('reported_by_employee_id', models.BigIntegerField(blank=True, help_text='HR Employee ID of reporter', null=True)),
                ('reported_by_name', models.CharField(blank=True, default='', help_text='Reporter name (cached)', max_length=200)),
                ('reported_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='When issue was reported')),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], db_index=True, default='MEDIUM', help_text='Request priority', max_length=20)),
                ('status', models.CharField(choices=[('OPEN', 'Open'), ('ACKNOWLEDGED', 'Acknowledged'), ('IN_PROGRESS', 'In Progress'), ('WAITING_PARTS', 'Waiting for Parts'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], db_index=True, default='OPEN', help_text='Current status', max_length=20)),
                ('assigned_to_employee_id', models.BigIntegerField(blank=True, help_text='HR Employee ID of assignee', null=True)),
                ('assigned_to_name', models.CharField(blank=True, default='', help_text='Assignee name (cached)', max_length=200)),
                ('due_date', models.DateTimeField(blank=True, help_text='Target completion date', null=True)),
                ('scheduled_start', models.DateTimeField(blank=True, help_text='Scheduled start time', null=True)),
                ('started_at', models.DateTimeField(blank=True, help_text='When work actually started', null=True)),
                ('completed_at', models.DateTimeField(blank=True, help_text='When work was completed', null=True)),
                ('resolution_notes', models.TextField(blank=True, default='', help_text='Notes about how the issue was resolved')),
                ('parts_used', models.TextField(blank=True, default='', help_text='Parts/materials used for repair')),
                ('labor_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Hours of labor', max_digits=6, null=True)),
                ('total_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Total cost of maintenance', max_digits=12, null=True)),
                ('scan_log_id', models.BigIntegerField(blank=True, help_text='ScanLog ID that created this request', null=True)),
                ('maintenance_type', models.CharField(choices=[('CORRECTIVE', 'Corrective (Breakdown)'), ('PREVENTIVE', 'Preventive (Scheduled)'), ('PREDICTIVE', 'Predictive (Condition-based)'), ('IMPROVEMENT', 'Improvement/Upgrade')], default='CORRECTIVE', help_text='Type of maintenance', max_length=30)),
                ('assigned_to_user', models.ForeignKey(blank=True, help_text='Technician assigned to fix', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_maintenance_requests', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('equipment', models.ForeignKey(help_text='Equipment requiring maintenance', on_delete=django.db.models.deletion.CASCADE, related_name='maintenance_requests', to='qrcodes.equipment')),
                ('reported_by_user', models.ForeignKey(blank=True, help_text='User who reported the issue', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reported_maintenance_requests', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Maintenance Request',
                'verbose_name_plural': 'Maintenance Requests',
                'db_table': 'qrcode_maintenance_request',
                'ordering': ['-reported_at'],
            },
        ),
        migrations.CreateModel(
            name='MovementLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('serial_unit_id', models.BigIntegerField(blank=True, db_index=True, help_text='Serial unit ID (for serialized items)', null=True)),
                ('item_id', models.BigIntegerField(blank=True, db_index=True, help_text='Item ID (for non-serialized items)', null=True)),
                ('item_sku', models.CharField(blank=True, default='', help_text='Item SKU (cached)', max_length=50)),
                ('item_name', models.CharField(blank=True, default='', help_text='Item name (cached)', max_length=200)),
                ('quantity', models.DecimalField(decimal_places=4, default=1, help_text='Quantity moved (1 for serialized items)', max_digits=12)),
                ('uom_code', models.CharField(blank=True, default='EA', help_text='Unit of measure code', max_length=20)),
                ('from_location_id', models.BigIntegerField(blank=True, db_index=True, help_text='Source location ID', null=True)),
                ('from_location_code', models.CharField(blank=True, default='', help_text='Source location code (cached)', max_length=100)),
                ('from_location_name', models.CharField(blank=True, default='', help_text='Source location name (cached)', max_length=200)),
                ('to_location_id', models.BigIntegerField(blank=True, db_index=True, help_text='Destination location ID', null=True)),
                ('to_location_code', models.CharField(blank=True, default='', help_text='Destination location code (cached)', max_length=100)),
                ('to_location_name', models.CharField(blank=True, default='', help_text='Destination location name (cached)', max_length=200)),
                ('from_container_id', models.BigIntegerField(blank=True, help_text='Source container ID', null=True)),
                ('to_container_id', models.BigIntegerField(blank=True, help_text='Destination container ID', null=True)),
                ('moved_by_employee_id', models.BigIntegerField(blank=True, db_index=True, help_text='HR Employee ID', null=True)),
                ('moved_by_name', models.CharField(blank=True, default='', help_text='Employee name (cached)', max_length=200)),
                ('moved_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='When movement occurred')),
                ('movement_type', models.CharField(choices=[('TRANSFER', 'Location Transfer'), ('RECEIPT', 'Receipt from Vendor'), ('ISSUE', 'Issue to Production'), ('BOM_PICKUP', 'BOM Material Pickup'), ('BOM_RETURN', 'BOM Material Return'), ('ADJUSTMENT', 'Inventory Adjustment'), ('SCRAP', 'Scrap/Disposal'), ('RETURN_TO_VENDOR', 'Return to Vendor'), ('INTERNAL_USE', 'Internal Use')], db_index=True, help_text='Type of movement', max_length=20)),
                ('reason', models.TextField(blank=True, default='', help_text='Reason for movement')),
                ('job_card_id', models.BigIntegerField(blank=True, db_index=True, help_text='Related job card ID', null=True)),
                ('job_card_number', models.CharField(blank=True, default='', help_text='Job card number (cached)', max_length=100)),
                ('bom_header_id', models.BigIntegerField(blank=True, help_text='BOM header ID', null=True)),
                ('bom_line_id', models.BigIntegerField(blank=True, db_index=True, help_text='BOM line ID', null=True)),
                ('batch_order_id', models.BigIntegerField(blank=True, help_text='Batch order ID', null=True)),
                ('source_scan_log_id', models.BigIntegerField(blank=True, help_text='ScanLog ID for source item scan', null=True)),
                ('destination_scan_log_id', models.BigIntegerField(blank=True, help_text='ScanLog ID for destination location scan', null=True)),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Unit cost at time of movement', max_digits=12, null=True)),
                ('total_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Total cost of movement', max_digits=12, null=True)),
                ('reference_document', models.CharField(blank=True, default='', help_text='External reference (PO, SO, etc.)', max_length=100)),
                ('verified', models.BooleanField(default=False, help_text='Has movement been verified?')),
                ('verified_at', models.DateTimeField(blank=True, help_text='When verified', null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('moved_by_user', models.ForeignKey(blank=True, help_text='User who performed movement', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_movements', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, help_text='User who verified', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_movements', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Movement Log',
                'verbose_name_plural': 'Movement Logs',
                'db_table': 'qrcode_movement_log',
                'ordering': ['-moved_at'],
            },
        ),
        migrations.CreateModel(
            name='ProcessExecution',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('job_card_id', models.BigIntegerField(db_index=True, help_text='ID of JobCard this execution belongs to')),
                ('route_step_id', models.BigIntegerField(db_index=True, help_text='ID of JobRouteStep being executed')),
                ('operation_code', models.CharField(blank=True, default='', help_text='Operation code (cached)', max_length=50)),
                ('operation_name', models.CharField(blank=True, default='', help_text='Operation name (cached)', max_length=200)),
                ('sequence_number', models.IntegerField(default=0, help_text='Sequence in route (cached)')),
                ('operator_employee_id', models.BigIntegerField(blank=True, db_index=True, help_text='HR Employee ID of operator', null=True)),
                ('operator_name', models.CharField(blank=True, default='', help_text='Operator name at execution time', max_length=200)),
                ('status', models.CharField(choices=[('NOT_STARTED', 'Not Started'), ('IN_PROGRESS', 'In Progress'), ('PAUSED', 'Paused'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled'), ('BLOCKED', 'Blocked')], db_index=True, default='NOT_STARTED', help_text='Current execution status', max_length=20)),
                ('start_time', models.DateTimeField(blank=True, db_index=True, help_text='When execution started', null=True)),
                ('end_time', models.DateTimeField(blank=True, help_text='When execution ended', null=True)),
                ('total_pause_minutes', models.IntegerField(default=0, help_text='Total minutes spent in paused state')),
                ('pause_count', models.IntegerField(default=0, help_text='Number of times paused')),
                ('work_center', models.CharField(blank=True, default='', help_text='Work center or station code', max_length=100)),
                ('work_center_name', models.CharField(blank=True, default='', help_text='Work center name', max_length=200)),
                ('qcode_id', models.BigIntegerField(blank=True, db_index=True, help_text='QCode ID used for this process step', null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Operator notes')),
                ('completion_notes', models.TextField(blank=True, default='', help_text='Notes at completion')),
                ('defects_found', models.IntegerField(default=0, help_text='Number of defects found during this step')),
                ('defect_notes', models.TextField(blank=True, default='', help_text='Details of defects')),
                ('measurements', models.JSONField(blank=True, default=dict, help_text='Step measurements as JSON')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('operator_user', models.ForeignKey(blank=True, help_text='User who executed this step', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='process_executions', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Process Execution',
                'verbose_name_plural': 'Process Executions',
                'db_table': 'qrcode_process_execution',
                'ordering': ['-start_time'],
            },
        ),
        migrations.CreateModel(
            name='ProcessPause',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pause_start', models.DateTimeField(default=django.utils.timezone.now, help_text='When pause started')),
                ('pause_end', models.DateTimeField(blank=True, help_text='When pause ended (null if still paused)', null=True)),
                ('reason', models.TextField(blank=True, default='', help_text='Reason for pause')),
                ('execution', models.ForeignKey(help_text='Process execution this pause belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='pauses', to='qrcodes.processexecution')),
            ],
            options={
                'verbose_name': 'Process Pause',
                'verbose_name_plural': 'Process Pauses',
                'db_table': 'qrcode_process_pause',
                'ordering': ['-pause_start'],
            },
        ),
        migrations.CreateModel(
            name='QCode',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('token', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, help_text='Unique non-guessable token embedded in QR code', unique=True)),
                ('qcode_type', models.CharField(choices=[('EMPLOYEE', 'Employee'), ('JOB_CARD', 'Job Card'), ('PROCESS_STEP', 'Process Step'), ('BIT_SERIAL', 'Serial Unit (Bit)'), ('BIT_BOX', 'Bit Box / Container'), ('EQUIPMENT', 'Equipment'), ('LOCATION', 'Location'), ('ADDRESS', 'Address'), ('ITEM', 'Item / Material'), ('BOM_MATERIAL', 'BOM Material Pickup'), ('MAINTENANCE_REQUEST', 'Maintenance Request'), ('EVALUATION_SESSION', 'Evaluation Session'), ('BATCH_ORDER', 'Batch Order')], db_index=True, help_text='Type of entity this QCode points to', max_length=30)),
                ('object_id', models.BigIntegerField(db_index=True, help_text='Primary key of target object')),
                ('label', models.CharField(blank=True, default='', help_text='Human-readable label for this QCode', max_length=200)),
                ('description', models.TextField(blank=True, default='', help_text='Optional description or notes')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='If False, scans of this code will be rejected')),
                ('deactivated_at', models.DateTimeField(blank=True, help_text='When this QCode was deactivated', null=True)),
                ('deactivation_reason', models.TextField(blank=True, default='', help_text='Reason for deactivation')),
                ('scan_count', models.IntegerField(default=0, help_text='Total number of times this code has been scanned')),
                ('last_scanned_at', models.DateTimeField(blank=True, help_text='Last time this code was scanned', null=True)),
                ('code_format', models.CharField(choices=[('QR', 'QR Code'), ('CODE128', 'Code 128'), ('CODE39', 'Code 39'), ('EAN13', 'EAN-13'), ('UPC', 'UPC-A'), ('DATAMATRIX', 'Data Matrix')], default='QR', help_text='Type of barcode/QR code', max_length=20)),
                ('version', models.IntegerField(default=1, help_text='Version number, incremented on regeneration')),
                ('content_type', models.ForeignKey(help_text='Content type of target object', on_delete=django.db.models.deletion.CASCADE, related_name='qcodes', to='contenttypes.contenttype')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deactivated_by', models.ForeignKey(blank=True, help_text='User who deactivated this QCode', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deactivated_qcodes', to=settings.AUTH_USER_MODEL)),
                ('last_scanned_by', models.ForeignKey(blank=True, help_text='Last user who scanned this code', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='last_scanned_qcodes', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'QR Code',
                'verbose_name_plural': 'QR Codes',
                'db_table': 'qrcode_qcode',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ScanLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action_type', models.CharField(choices=[('VIEW_DETAILS', 'View Details'), ('PROCESS_START', 'Start Process Step'), ('PROCESS_END', 'End Process Step'), ('PROCESS_PAUSE', 'Pause Process Step'), ('PROCESS_RESUME', 'Resume Process Step'), ('MOVE_ITEM', 'Move Item to Location'), ('MAINTENANCE_REPORT', 'Report Maintenance Issue'), ('MAINTENANCE_COMPLETE', 'Mark Maintenance Complete'), ('CHECK_IN', 'Check In'), ('CHECK_OUT', 'Check Out'), ('BADGE_ACCESS', 'Badge Access Control'), ('MATERIAL_PICKUP', 'Material Pickup from BOM'), ('MATERIAL_RETURN', 'Material Return to Stock'), ('INVENTORY_COUNT', 'Inventory Count/Verification'), ('LOCATION_ASSIGN', 'Assign to Location'), ('QUALITY_CHECK', 'Quality Check/Inspection'), ('APPROVAL_SCAN', 'Approval/Authorization Scan'), ('UNKNOWN', 'Unknown Action')], db_index=True, help_text='The type of action performed', max_length=30)),
                ('scan_timestamp', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='When the scan occurred')),
                ('scanner_employee_id', models.BigIntegerField(blank=True, db_index=True, help_text='HR Employee ID of scanner (cached)', null=True)),
                ('scanner_employee_name', models.CharField(blank=True, default='', help_text='Employee name at time of scan', max_length=200)),
                ('scanner_device_id', models.CharField(blank=True, default='', help_text='Device/scanner hardware ID', max_length=100)),
                ('scanner_device_type', models.CharField(choices=[('WEB', 'Web Browser'), ('MOBILE', 'Mobile Device'), ('HANDHELD', 'Handheld Scanner'), ('KIOSK', 'Kiosk Terminal'), ('API', 'API Call'), ('UNKNOWN', 'Unknown')], default='WEB', help_text='Type of device used for scanning', max_length=50)),
                ('scanner_ip', models.GenericIPAddressField(blank=True, help_text='IP address of scanner', null=True)),
                ('scanner_location_id', models.BigIntegerField(blank=True, help_text='Location ID where scan occurred', null=True)),
                ('scanner_location_name', models.CharField(blank=True, default='', help_text='Location name at time of scan', max_length=200)),
                ('scanner_latitude', models.DecimalField(blank=True, decimal_places=7, help_text='GPS latitude', max_digits=10, null=True)),
                ('scanner_longitude', models.DecimalField(blank=True, decimal_places=7, help_text='GPS longitude', max_digits=10, null=True)),
                ('context_object_id', models.BigIntegerField(blank=True, help_text='ID of context object', null=True)),
                ('reason', models.TextField(blank=True, default='', help_text='Reason for this scan (e.g., pause reason, exception note)')),
                ('success', models.BooleanField(db_index=True, default=True, help_text='Whether the scan completed its intended action')),
                ('message', models.TextField(blank=True, default='', help_text="Result message (e.g., 'Started process step X', 'Blocked: user not certified')")),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='Additional scan metadata as JSON')),
                ('user_agent', models.TextField(blank=True, default='', help_text='Browser/client user agent string')),
                ('session_id', models.CharField(blank=True, default='', help_text='Session ID for correlation', max_length=100)),
                ('context_content_type', models.ForeignKey(blank=True, help_text='Content type of context object', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='scan_contexts', to='contenttypes.contenttype')),
                ('qcode', models.ForeignKey(help_text='The QCode that was scanned', on_delete=django.db.models.deletion.CASCADE, related_name='scan_logs', to='qrcodes.qcode')),
                ('scanner_user', models.ForeignKey(blank=True, help_text='User who performed the scan', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='qcode_scans', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Scan Log',
                'verbose_name_plural': 'Scan Logs',
                'db_table': 'qrcode_scan_log',
                'ordering': ['-scan_timestamp'],
            },
        ),
        migrations.CreateModel(
            name='Container',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Unique container code', max_length=50, unique=True)),
                ('name', models.CharField(blank=True, default='', help_text='Container name or label', max_length=200)),
                ('container_type', models.CharField(choices=[('BIT_BOX', 'Bit Box'), ('BIN', 'Bin'), ('PALLET', 'Pallet'), ('RACK', 'Rack'), ('TOTE', 'Tote'), ('CRATE', 'Crate'), ('OTHER', 'Other')], db_index=True, default='BIT_BOX', help_text='Type of container', max_length=20)),
                ('status', models.CharField(choices=[('AVAILABLE', 'Available'), ('IN_USE', 'In Use'), ('IN_TRANSIT', 'In Transit'), ('DAMAGED', 'Damaged'), ('RETIRED', 'Retired')], db_index=True, default='AVAILABLE', help_text='Current status', max_length=20)),
                ('location_id', models.BigIntegerField(blank=True, db_index=True, help_text='Current location ID', null=True)),
                ('location_code', models.CharField(blank=True, default='', help_text='Location code (cached)', max_length=100)),
                ('location_name', models.CharField(blank=True, default='', help_text='Location name (cached)', max_length=200)),
                ('max_capacity', models.IntegerField(blank=True, help_text='Maximum number of items', null=True)),
                ('current_count', models.IntegerField(default=0, help_text='Current number of items')),
                ('weight_empty_kg', models.DecimalField(blank=True, decimal_places=2, help_text='Empty weight in kg', max_digits=10, null=True)),
                ('weight_max_kg', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum loaded weight in kg', max_digits=10, null=True)),
                ('length_cm', models.DecimalField(blank=True, decimal_places=2, help_text='Length in cm', max_digits=10, null=True)),
                ('width_cm', models.DecimalField(blank=True, decimal_places=2, help_text='Width in cm', max_digits=10, null=True)),
                ('height_cm', models.DecimalField(blank=True, decimal_places=2, help_text='Height in cm', max_digits=10, null=True)),
                ('dedicated_to_item_id', models.BigIntegerField(blank=True, help_text='If dedicated to a specific item type', null=True)),
                ('dedicated_to_customer', models.CharField(blank=True, default='', help_text='If dedicated to a specific customer', max_length=200)),
                ('qcode_id', models.BigIntegerField(blank=True, db_index=True, help_text='QCode ID for this container', null=True)),
                ('last_movement_at', models.DateTimeField(blank=True, help_text='Last time container was moved', null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Container',
                'verbose_name_plural': 'Containers',
                'db_table': 'qrcode_container',
                'ordering': ['code'],
                'indexes': [models.Index(fields=['code'], name='ix_container_code'), models.Index(fields=['container_type'], name='ix_container_type'), models.Index(fields=['status'], name='ix_container_status'), models.Index(fields=['location_id'], name='ix_container_location'), models.Index(fields=['qcode_id'], name='ix_container_qcode')],
            },
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['code'], name='ix_equipment_code'),
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['status'], name='ix_equipment_status'),
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['equipment_type'], name='ix_equipment_type'),
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['location_id'], name='ix_equipment_location'),
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['next_maintenance_date'], name='ix_equipment_maint'),
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['qcode_id'], name='ix_equipment_qcode'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['equipment'], name='ix_maintreq_equipment'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['status'], name='ix_maintreq_status'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['priority'], name='ix_maintreq_priority'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['-reported_at'], name='ix_maintreq_reported'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['assigned_to_employee_id'], name='ix_maintreq_assigned'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['due_date'], name='ix_maintreq_due'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['-moved_at'], name='ix_movlog_moved_at'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['serial_unit_id'], name='ix_movlog_serial'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['item_id'], name='ix_movlog_item'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['job_card_id'], name='ix_movlog_jobcard'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['bom_line_id'], name='ix_movlog_bomline'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['from_location_id'], name='ix_movlog_from'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['to_location_id'], name='ix_movlog_to'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['movement_type'], name='ix_movlog_type'),
        ),
        migrations.AddIndex(
            model_name='movementlog',
            index=models.Index(fields=['moved_by_employee_id'], name='ix_movlog_employee'),
        ),
        migrations.AddIndex(
            model_name='processexecution',
            index=models.Index(fields=['job_card_id'], name='ix_procexec_jobcard'),
        ),
        migrations.AddIndex(
            model_name='processexecution',
            index=models.Index(fields=['route_step_id'], name='ix_procexec_step'),
        ),
        migrations.AddIndex(
            model_name='processexecution',
            index=models.Index(fields=['status'], name='ix_procexec_status'),
        ),
        migrations.AddIndex(
            model_name='processexecution',
            index=models.Index(fields=['operator_employee_id'], name='ix_procexec_operator'),
        ),
        migrations.AddIndex(
            model_name='processexecution',
            index=models.Index(fields=['-start_time'], name='ix_procexec_start'),
        ),
        migrations.AddIndex(
            model_name='processexecution',
            index=models.Index(fields=['qcode_id'], name='ix_procexec_qcode'),
        ),
        migrations.AddIndex(
            model_name='processpause',
            index=models.Index(fields=['execution'], name='ix_procpause_exec'),
        ),
        migrations.AddIndex(
            model_name='processpause',
            index=models.Index(fields=['-pause_start'], name='ix_procpause_start'),
        ),
        migrations.AddIndex(
            model_name='qcode',
            index=models.Index(fields=['token'], name='ix_qcode_token'),
        ),
        migrations.AddIndex(
            model_name='qcode',
            index=models.Index(fields=['qcode_type'], name='ix_qcode_type'),
        ),
        migrations.AddIndex(
            model_name='qcode',
            index=models.Index(fields=['is_active'], name='ix_qcode_active'),
        ),
        migrations.AddIndex(
            model_name='qcode',
            index=models.Index(fields=['content_type', 'object_id'], name='ix_qcode_target'),
        ),
        migrations.AddIndex(
            model_name='qcode',
            index=models.Index(fields=['last_scanned_at'], name='ix_qcode_last_scan'),
        ),
        migrations.AddIndex(
            model_name='qcode',
            index=models.Index(fields=['-created_at'], name='ix_qcode_created'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['-scan_timestamp'], name='ix_scanlog_timestamp'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['qcode'], name='ix_scanlog_qcode'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['scanner_user'], name='ix_scanlog_user'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['action_type'], name='ix_scanlog_action'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['success'], name='ix_scanlog_success'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['scanner_employee_id'], name='ix_scanlog_employee'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['scanner_location_id'], name='ix_scanlog_location'),
        ),
        migrations.AddIndex(
            model_name='scanlog',
            index=models.Index(fields=['context_content_type', 'context_object_id'], name='ix_scanlog_context'),
        ),
    ]
