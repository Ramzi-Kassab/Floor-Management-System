# Generated by Django 5.2.6 on 2025-11-17 14:06

import django.db.models.deletion
import floor_app.operations.knowledge.models.document
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        ('hr', '0002_employeedocument_documentrenewal_employeetraining_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Tag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('slug', models.SlugField(blank=True, max_length=60, unique=True)),
                ('description', models.CharField(blank=True, max_length=255)),
                ('color', models.CharField(default='#6b7280', help_text='Hex color for tag display', max_length=7)),
                ('is_system', models.BooleanField(default=False, help_text='System tags cannot be deleted')),
            ],
            options={
                'verbose_name': 'Tag',
                'verbose_name_plural': 'Tags',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('name', models.CharField(max_length=100)),
                ('slug', models.SlugField(blank=True, max_length=120, unique=True)),
                ('description', models.TextField(blank=True)),
                ('icon', models.CharField(blank=True, help_text="Bootstrap icon class, e.g., 'bi-gear-fill'", max_length=50)),
                ('color', models.CharField(default='#6366f1', help_text='Hex color code for category badge', max_length=7)),
                ('order', models.PositiveIntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='knowledge.category')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Category',
                'verbose_name_plural': 'Categories',
                'ordering': ['order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Article',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(help_text="Unique article code, e.g., 'PROC-QC-001'", max_length=50, unique=True)),
                ('slug', models.SlugField(blank=True, max_length=255, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('summary', models.TextField(blank=True, help_text='Short description/abstract')),
                ('body', models.TextField(help_text='Main content (supports HTML/Markdown)')),
                ('article_type', models.CharField(choices=[('PROCEDURE', 'Procedure'), ('WORK_INSTRUCTION', 'Work Instruction'), ('GUIDELINE', 'Guideline'), ('POLICY', 'Policy'), ('FAQ', 'FAQ'), ('CHECKLIST', 'Checklist'), ('TEMPLATE', 'Template'), ('REFERENCE', 'Reference Document'), ('SAFETY', 'Safety Document'), ('QUALITY', 'Quality Document'), ('TECHNICAL', 'Technical Specification'), ('TRAINING', 'Training Material')], default='REFERENCE', max_length=20)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('IN_REVIEW', 'In Review'), ('APPROVED', 'Approved'), ('PUBLISHED', 'Published'), ('ARCHIVED', 'Archived'), ('SUPERSEDED', 'Superseded')], default='DRAFT', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('NORMAL', 'Normal'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], default='NORMAL', max_length=20)),
                ('version', models.CharField(default='1.0', help_text='Article version', max_length=20)),
                ('change_summary', models.TextField(blank=True, help_text='Summary of changes in this version')),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('effective_from', models.DateField(blank=True, help_text='Date article becomes effective', null=True)),
                ('effective_until', models.DateField(blank=True, help_text='Date article expires (if applicable)', null=True)),
                ('review_due_date', models.DateField(blank=True, help_text='Date for next review', null=True)),
                ('view_count', models.PositiveIntegerField(default=0)),
                ('is_featured', models.BooleanField(default=False, help_text='Show in featured/important section')),
                ('is_pinned', models.BooleanField(default=False, help_text='Pin to top of lists')),
                ('requires_acknowledgment', models.BooleanField(default=False, help_text='Users must acknowledge reading this')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_articles', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('owner_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='knowledge_articles', to='hr.department')),
                ('previous_version', models.ForeignKey(blank=True, help_text='Link to previous version of this article', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='newer_versions', to='knowledge.article')),
                ('related_articles', models.ManyToManyField(blank=True, help_text='Related knowledge articles', to='knowledge.article')),
                ('restricted_to_departments', models.ManyToManyField(blank=True, help_text='Only these departments can view (empty = all)', related_name='restricted_articles', to='hr.department')),
                ('restricted_to_positions', models.ManyToManyField(blank=True, help_text='Only these positions can view (empty = all)', related_name='restricted_articles', to='hr.position')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_articles', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='articles', to='knowledge.category')),
            ],
            options={
                'verbose_name': 'Article',
                'verbose_name_plural': 'Articles',
                'ordering': ['-is_pinned', '-is_featured', '-published_at', '-created_at'],
                'permissions': [('can_publish_article', 'Can publish articles'), ('can_approve_article', 'Can approve articles'), ('can_review_article', 'Can review articles')],
            },
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('file', models.FileField(upload_to=floor_app.operations.knowledge.models.document.document_upload_path)),
                ('file_type', models.CharField(choices=[('PDF', 'PDF Document'), ('IMAGE', 'Image'), ('VIDEO', 'Video'), ('AUDIO', 'Audio'), ('SPREADSHEET', 'Spreadsheet'), ('DOCUMENT', 'Word Document'), ('PRESENTATION', 'Presentation'), ('ARCHIVE', 'Archive (ZIP/RAR)'), ('CAD', 'CAD Drawing'), ('OTHER', 'Other')], default='OTHER', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('version', models.CharField(default='1.0', help_text='Document version number', max_length=20)),
                ('file_size', models.PositiveBigIntegerField(default=0, help_text='File size in bytes')),
                ('mime_type', models.CharField(blank=True, max_length=100)),
                ('checksum', models.CharField(blank=True, help_text='SHA-256 checksum for integrity verification', max_length=64)),
                ('is_public', models.BooleanField(default=False, help_text='Publicly accessible without login')),
                ('download_count', models.PositiveIntegerField(default=0)),
                ('source_system', models.CharField(blank=True, help_text="Original source (e.g., 'Imported from SharePoint')", max_length=100)),
                ('external_url', models.URLField(blank=True, help_text='External link (for videos, external docs)')),
                ('expires_at', models.DateTimeField(blank=True, help_text='Document expiry date (e.g., for certificates)', null=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Document',
                'verbose_name_plural': 'Documents',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ArticleAttachment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('usage_type', models.CharField(choices=[('REFERENCE', 'Reference'), ('JOB_AID', 'Job Aid'), ('TEMPLATE', 'Template'), ('DRAWING', 'Technical Drawing'), ('FORM', 'Form'), ('CHECKLIST', 'Checklist'), ('EXAMPLE', 'Example'), ('OTHER', 'Other')], default='REFERENCE', max_length=20)),
                ('caption', models.CharField(blank=True, help_text='Optional caption for this attachment', max_length=255)),
                ('order', models.PositiveIntegerField(default=0)),
                ('article', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='article_attachments', to='knowledge.article')),
                ('document', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='article_usages', to='knowledge.document')),
            ],
            options={
                'verbose_name': 'Article Attachment',
                'verbose_name_plural': 'Article Attachments',
                'ordering': ['order', 'id'],
            },
        ),
        migrations.AddField(
            model_name='article',
            name='attachments',
            field=models.ManyToManyField(blank=True, related_name='articles', through='knowledge.ArticleAttachment', to='knowledge.document'),
        ),
        migrations.CreateModel(
            name='FAQGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('order', models.PositiveIntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('icon', models.CharField(blank=True, help_text='Bootstrap icon class', max_length=50)),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='faq_groups', to='knowledge.category')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'FAQ Group',
                'verbose_name_plural': 'FAQ Groups',
                'ordering': ['order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='FAQEntry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('question', models.TextField()),
                ('answer', models.TextField(help_text='Supports HTML/Markdown')),
                ('short_answer', models.CharField(blank=True, help_text='Brief answer for quick display', max_length=500)),
                ('order', models.PositiveIntegerField(default=0)),
                ('is_published', models.BooleanField(default=False)),
                ('is_featured', models.BooleanField(default=False, help_text='Show in featured/popular FAQs')),
                ('view_count', models.PositiveIntegerField(default=0)),
                ('helpful_count', models.PositiveIntegerField(default=0)),
                ('not_helpful_count', models.PositiveIntegerField(default=0)),
                ('keywords', models.TextField(blank=True, help_text='Keywords for better search (comma-separated)')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('group', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='entries', to='knowledge.faqgroup')),
            ],
            options={
                'verbose_name': 'FAQ Entry',
                'verbose_name_plural': 'FAQ Entries',
                'ordering': ['group', 'order', '-is_featured'],
            },
        ),
        migrations.CreateModel(
            name='InstructionRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(help_text="Unique instruction code, e.g., 'INS-PRD-001'", max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(help_text='Detailed instruction text (supports HTML/Markdown)')),
                ('short_description', models.CharField(blank=True, help_text='Brief summary for quick display', max_length=500)),
                ('instruction_type', models.CharField(choices=[('TECHNICAL', 'Technical'), ('QUALITY', 'Quality Control'), ('SAFETY', 'Safety'), ('LOGISTICS', 'Logistics'), ('COMMERCIAL', 'Commercial'), ('OPERATIONAL', 'Operational'), ('REGULATORY', 'Regulatory/Compliance'), ('MAINTENANCE', 'Maintenance')], default='OPERATIONAL', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('NORMAL', 'Normal'), ('HIGH', 'High'), ('CRITICAL', 'Critical'), ('MANDATORY', 'Mandatory (Cannot Override)')], default='NORMAL', max_length=20)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('IN_REVIEW', 'In Review'), ('APPROVED', 'Approved'), ('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('ARCHIVED', 'Archived')], default='DRAFT', max_length=20)),
                ('is_default', models.BooleanField(default=True, help_text='Default instruction (always applies) vs. temporary/special')),
                ('is_temporary', models.BooleanField(default=False, help_text='Temporary instruction with time limit')),
                ('valid_from', models.DateTimeField(blank=True, help_text='When instruction becomes active', null=True)),
                ('valid_until', models.DateTimeField(blank=True, help_text='When instruction expires (for temporary instructions)', null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('trigger_count', models.PositiveIntegerField(default=0, help_text='Number of times this instruction was triggered')),
                ('last_triggered_at', models.DateTimeField(blank=True, null=True)),
                ('execution_order', models.PositiveIntegerField(default=100, help_text='Order in which instructions are evaluated (lower = first)')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_instructions', to=settings.AUTH_USER_MODEL)),
                ('attachments', models.ManyToManyField(blank=True, help_text='Supporting documents for this instruction', related_name='instructions', to='knowledge.document')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('owner_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='instruction_rules', to='hr.department')),
                ('source_article', models.ForeignKey(blank=True, help_text='Knowledge article this instruction is based on', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='derived_instructions', to='knowledge.article')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Instruction Rule',
                'verbose_name_plural': 'Instruction Rules',
                'ordering': ['execution_order', '-priority', 'code'],
                'permissions': [('can_activate_instruction', 'Can activate instructions'), ('can_approve_instruction', 'Can approve instructions')],
            },
        ),
        migrations.CreateModel(
            name='InstructionExecutionLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('executed_at', models.DateTimeField(auto_now_add=True)),
                ('trigger_object_id', models.PositiveBigIntegerField(blank=True, null=True)),
                ('trigger_event', models.CharField(help_text="Event that triggered the instruction, e.g., 'save', 'view', 'approve'", max_length=100)),
                ('conditions_evaluated', models.JSONField(default=dict, help_text='Condition evaluation results')),
                ('actions_executed', models.JSONField(default=list, help_text='List of actions executed and their results')),
                ('was_overridden', models.BooleanField(default=False, help_text='Was the instruction overridden by user/manager')),
                ('override_reason', models.TextField(blank=True, help_text='Reason for override if applicable')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.CharField(blank=True, max_length=500)),
                ('executed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('override_approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='knowledge_instruction_overrides', to=settings.AUTH_USER_MODEL)),
                ('trigger_content_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='contenttypes.contenttype')),
                ('instruction', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='execution_logs', to='knowledge.instructionrule')),
            ],
            options={
                'verbose_name': 'Instruction Execution Log',
                'verbose_name_plural': 'Instruction Execution Logs',
                'ordering': ['-executed_at'],
            },
        ),
        migrations.CreateModel(
            name='InstructionTargetScope',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scope_type', models.CharField(choices=[('INCLUDE', 'Include (applies to)'), ('EXCLUDE', 'Exclude (does not apply to)')], default='INCLUDE', max_length=10)),
                ('target_object_id', models.PositiveBigIntegerField(blank=True, help_text='Specific object ID (null = all of this type)', null=True)),
                ('field_filter', models.JSONField(blank=True, help_text="Django ORM filter dict, e.g., {'customer__region': 'MENA'}", null=True)),
                ('description', models.CharField(blank=True, help_text='Human-readable scope description', max_length=255)),
                ('applies_to_new_only', models.BooleanField(default=False, help_text='Only apply to newly created items')),
                ('instruction', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='target_scopes', to='knowledge.instructionrule')),
                ('target_content_type', models.ForeignKey(help_text='Type of entity this scope applies to', on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
            ],
            options={
                'verbose_name': 'Instruction Target Scope',
                'verbose_name_plural': 'Instruction Target Scopes',
            },
        ),
        migrations.CreateModel(
            name='RuleAction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action_type', models.CharField(choices=[('SHOW_MESSAGE', 'Show Message/Alert'), ('SHOW_WARNING', 'Show Warning'), ('SHOW_ERROR', 'Show Error (Blocking)'), ('SHOW_INFO', 'Show Information'), ('PREVENT_ACTION', 'Prevent/Block Action'), ('REQUIRE_CONFIRMATION', 'Require Confirmation'), ('REQUIRE_APPROVAL', 'Require Approval'), ('REQUIRE_OVERRIDE', 'Require Manager Override'), ('SEND_EMAIL', 'Send Email Notification'), ('SEND_SMS', 'Send SMS'), ('CREATE_NOTIFICATION', 'Create System Notification'), ('SET_FIELD_VALUE', 'Set Field Value'), ('CALCULATE_VALUE', 'Calculate/Auto-fill Value'), ('INCREMENT_COUNTER', 'Increment Counter'), ('CHANGE_STATUS', 'Change Status'), ('ASSIGN_TO_USER', 'Assign to User'), ('CREATE_TASK', 'Create Task/Work Order'), ('ADD_TO_QUEUE', 'Add to Queue'), ('VALIDATE_FIELD', 'Validate Field'), ('ENFORCE_MINIMUM', 'Enforce Minimum Value'), ('ENFORCE_MAXIMUM', 'Enforce Maximum Value'), ('ENFORCE_PATTERN', 'Enforce Pattern/Format'), ('LOG_AUDIT', 'Create Audit Log'), ('LOG_CUSTOM', 'Log Custom Event'), ('HIGHLIGHT_FIELD', 'Highlight Field'), ('DISABLE_FIELD', 'Disable Field'), ('HIDE_FIELD', 'Hide Field'), ('SHOW_FIELD', 'Show Hidden Field'), ('CALL_WEBHOOK', 'Call External Webhook'), ('CALL_API', 'Call External API')], default='SHOW_MESSAGE', max_length=30)),
                ('parameters', models.JSONField(default=dict, help_text='Action-specific parameters in JSON format')),
                ('message_template', models.TextField(blank=True, help_text='Message to display (supports {placeholders})')),
                ('target_field', models.CharField(blank=True, help_text='Target field path for data modification actions', max_length=255)),
                ('value_expression', models.TextField(blank=True, help_text='Value or formula for calculations (supports Python expressions)')),
                ('severity', models.CharField(default='info', help_text='Visual severity: info, warning, danger, success', max_length=20)),
                ('order', models.PositiveIntegerField(default=0)),
                ('stop_propagation', models.BooleanField(default=False, help_text='Stop evaluating further rules after this action')),
                ('instruction', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='actions', to='knowledge.instructionrule')),
                ('notify_departments', models.ManyToManyField(blank=True, help_text='Departments to notify', related_name='instruction_notifications', to='hr.department')),
                ('notify_roles', models.ManyToManyField(blank=True, help_text='Positions/roles to notify', related_name='instruction_notifications', to='hr.position')),
                ('notify_users', models.ManyToManyField(blank=True, help_text='Users to notify', related_name='instruction_notifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Rule Action',
                'verbose_name_plural': 'Rule Actions',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='RuleCondition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('field_path', models.CharField(help_text="Field to evaluate (supports nested: 'customer__region__name')", max_length=255)),
                ('operator', models.CharField(choices=[('EQUALS', 'Equals (=)'), ('NOT_EQUALS', 'Not Equals (!=)'), ('GREATER_THAN', 'Greater Than (>)'), ('GREATER_EQUAL', 'Greater Than or Equal (>=)'), ('LESS_THAN', 'Less Than (<)'), ('LESS_EQUAL', 'Less Than or Equal (<=)'), ('CONTAINS', 'Contains'), ('NOT_CONTAINS', 'Does Not Contain'), ('STARTS_WITH', 'Starts With'), ('ENDS_WITH', 'Ends With'), ('IN_LIST', 'In List'), ('NOT_IN_LIST', 'Not In List'), ('IS_NULL', 'Is Null/Empty'), ('IS_NOT_NULL', 'Is Not Null/Empty'), ('REGEX', 'Matches Regex'), ('BETWEEN', 'Between')], default='EQUALS', max_length=20)),
                ('value', models.TextField(help_text='Value to compare against (JSON format for complex values)')),
                ('value_max', models.TextField(blank=True, help_text='Maximum value for BETWEEN operator')),
                ('logical_operator', models.CharField(choices=[('AND', 'AND'), ('OR', 'OR')], default='AND', help_text='How this condition connects to the next one', max_length=5)),
                ('condition_group', models.PositiveIntegerField(default=0, help_text='Group number for parenthetical grouping')),
                ('order', models.PositiveIntegerField(default=0)),
                ('case_sensitive', models.BooleanField(default=False, help_text='Case-sensitive comparison for strings')),
                ('instruction', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='conditions', to='knowledge.instructionrule')),
                ('target_model', models.ForeignKey(help_text='The Django model to check (e.g., BitDesign, JobCard, Employee)', on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
            ],
            options={
                'verbose_name': 'Rule Condition',
                'verbose_name_plural': 'Rule Conditions',
                'ordering': ['condition_group', 'order'],
            },
        ),
        migrations.AddField(
            model_name='article',
            name='tags',
            field=models.ManyToManyField(blank=True, related_name='articles', to='knowledge.tag'),
        ),
        migrations.CreateModel(
            name='TrainingCourse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(help_text="Unique course code, e.g., 'TR-SAF-001'", max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('objectives', models.TextField(blank=True, help_text='Learning objectives (one per line)')),
                ('prerequisites', models.TextField(blank=True, help_text='Prerequisites for taking this course')),
                ('course_type', models.CharField(choices=[('SAFETY', 'Safety Training'), ('QUALITY', 'Quality Assurance'), ('TECHNICAL', 'Technical Skills'), ('OPERATIONAL', 'Operational Procedures'), ('COMPLIANCE', 'Regulatory Compliance'), ('ONBOARDING', 'Employee Onboarding'), ('SOFT_SKILLS', 'Soft Skills'), ('LEADERSHIP', 'Leadership Development'), ('CERTIFICATION', 'Professional Certification'), ('REFRESHER', 'Refresher Training')], default='TECHNICAL', max_length=20)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('IN_REVIEW', 'In Review'), ('PUBLISHED', 'Published'), ('ARCHIVED', 'Archived')], default='DRAFT', max_length=20)),
                ('difficulty_level', models.CharField(choices=[('BEGINNER', 'Beginner'), ('INTERMEDIATE', 'Intermediate'), ('ADVANCED', 'Advanced'), ('EXPERT', 'Expert')], default='BEGINNER', max_length=20)),
                ('estimated_duration_minutes', models.PositiveIntegerField(default=60, help_text='Estimated time to complete in minutes')),
                ('validity_months', models.PositiveIntegerField(blank=True, help_text='How long certification is valid (months). Null = permanent', null=True)),
                ('is_mandatory', models.BooleanField(default=False, help_text='Mandatory for all employees in target audience')),
                ('requires_assessment', models.BooleanField(default=False, help_text='Requires passing assessment to complete')),
                ('passing_score', models.PositiveIntegerField(default=70, help_text='Minimum passing score percentage (0-100)')),
                ('max_attempts', models.PositiveIntegerField(default=3, help_text='Maximum assessment attempts allowed')),
                ('allow_self_enrollment', models.BooleanField(default=True, help_text='Employees can self-enroll')),
                ('total_enrollments', models.PositiveIntegerField(default=0)),
                ('total_completions', models.PositiveIntegerField(default=0)),
                ('average_score', models.FloatField(blank=True, null=True)),
                ('average_completion_time', models.PositiveIntegerField(blank=True, help_text='Average completion time in minutes', null=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('attachments', models.ManyToManyField(blank=True, help_text='Course materials and resources', related_name='courses', to='knowledge.document')),
                ('cover_image', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='course_covers', to='knowledge.document')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('grants_qualification', models.ForeignKey(blank=True, help_text='Qualification granted upon completion', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_courses', to='hr.hrqualification')),
                ('owner_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_courses', to='hr.department')),
                ('prerequisite_courses', models.ManyToManyField(blank=True, help_text='Courses that must be completed first', related_name='dependent_courses', to='knowledge.trainingcourse')),
                ('target_departments', models.ManyToManyField(blank=True, help_text='Departments that should take this course', related_name='required_courses', to='hr.department')),
                ('target_positions', models.ManyToManyField(blank=True, help_text='Positions that should take this course', related_name='required_courses', to='hr.position')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Training Course',
                'verbose_name_plural': 'Training Courses',
                'ordering': ['-is_mandatory', 'course_type', 'title'],
                'permissions': [('can_publish_course', 'Can publish training courses'), ('can_enroll_others', 'Can enroll other employees')],
            },
        ),
        migrations.CreateModel(
            name='TrainingEnrollment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('ENROLLED', 'Enrolled'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed'), ('EXPIRED', 'Expired'), ('WITHDRAWN', 'Withdrawn')], default='ENROLLED', max_length=20)),
                ('enrolled_at', models.DateTimeField(auto_now_add=True)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('expires_at', models.DateTimeField(blank=True, help_text='When completion expires (for courses with validity_months)', null=True)),
                ('progress_percentage', models.FloatField(default=0, help_text='Overall completion percentage (0-100)')),
                ('lessons_completed', models.PositiveIntegerField(default=0)),
                ('total_time_spent_minutes', models.PositiveIntegerField(default=0)),
                ('final_score', models.FloatField(blank=True, help_text='Final assessment score (0-100)', null=True)),
                ('assessment_attempts', models.PositiveIntegerField(default=0)),
                ('passed_assessment', models.BooleanField(default=False)),
                ('certificate_issued', models.BooleanField(default=False)),
                ('certificate_number', models.CharField(blank=True, max_length=100)),
                ('certificate_issued_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about this enrollment')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='knowledge.trainingcourse')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='training_enrollments', to='hr.hremployee')),
                ('enrolled_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_enrollments_created', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Training Enrollment',
                'verbose_name_plural': 'Training Enrollments',
                'ordering': ['-enrolled_at'],
            },
        ),
        migrations.CreateModel(
            name='TrainingLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('sequence', models.PositiveIntegerField(default=1, help_text='Order within the course')),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('lesson_type', models.CharField(choices=[('VIDEO', 'Video Lesson'), ('READING', 'Reading Material'), ('INTERACTIVE', 'Interactive Content'), ('QUIZ', 'Quiz/Assessment'), ('PRACTICAL', 'Practical Exercise'), ('DISCUSSION', 'Discussion/Q&A'), ('ASSIGNMENT', 'Assignment')], default='READING', max_length=20)),
                ('content', models.TextField(blank=True, help_text='Lesson content (if not using linked article)')),
                ('external_url', models.URLField(blank=True, help_text='External video or resource URL')),
                ('is_mandatory', models.BooleanField(default=True, help_text='Must complete to finish course')),
                ('min_time_seconds', models.PositiveIntegerField(default=0, help_text='Minimum time to spend on lesson (0 = no minimum)')),
                ('questions', models.JSONField(blank=True, help_text='Quiz questions in JSON format', null=True)),
                ('passing_score', models.PositiveIntegerField(default=70, help_text='Minimum passing score for quiz lessons')),
                ('estimated_minutes', models.PositiveIntegerField(default=10, help_text='Estimated time to complete this lesson')),
                ('attachments', models.ManyToManyField(blank=True, related_name='lessons', to='knowledge.document')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lessons', to='knowledge.trainingcourse')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('linked_article', models.ForeignKey(blank=True, help_text='Link to knowledge article for content', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='used_in_lessons', to='knowledge.article')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Training Lesson',
                'verbose_name_plural': 'Training Lessons',
                'ordering': ['course', 'sequence'],
            },
        ),
        migrations.CreateModel(
            name='TrainingLessonProgress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('is_completed', models.BooleanField(default=False)),
                ('time_spent_seconds', models.PositiveIntegerField(default=0)),
                ('last_accessed_at', models.DateTimeField(blank=True, null=True)),
                ('quiz_score', models.FloatField(blank=True, null=True)),
                ('quiz_attempts', models.PositiveIntegerField(default=0)),
                ('quiz_answers', models.JSONField(blank=True, help_text="User's quiz answers", null=True)),
                ('notes', models.TextField(blank=True, help_text="User's notes for this lesson")),
                ('enrollment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lesson_progress', to='knowledge.trainingenrollment')),
                ('lesson', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='progress_records', to='knowledge.traininglesson')),
            ],
            options={
                'verbose_name': 'Lesson Progress',
                'verbose_name_plural': 'Lesson Progress',
                'ordering': ['lesson__sequence'],
            },
        ),
        migrations.CreateModel(
            name='TrainingSchedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('title', models.CharField(help_text="Session title (e.g., 'Safety Training - March 2025')", max_length=255)),
                ('description', models.TextField(blank=True)),
                ('scheduled_date', models.DateField()),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('timezone_name', models.CharField(default='Asia/Riyadh', max_length=50)),
                ('location', models.CharField(blank=True, help_text="Physical location or 'Online'", max_length=255)),
                ('meeting_link', models.URLField(blank=True, help_text='Online meeting URL')),
                ('max_participants', models.PositiveIntegerField(default=20, help_text='Maximum number of participants')),
                ('min_participants', models.PositiveIntegerField(default=1, help_text='Minimum participants to run session')),
                ('external_instructor', models.CharField(blank=True, help_text='Name of external instructor if applicable', max_length=255)),
                ('registration_open', models.BooleanField(default=True)),
                ('registration_deadline', models.DateTimeField(blank=True, null=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedules', to='knowledge.trainingcourse')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('instructor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_sessions_conducted', to='hr.hremployee')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Training Schedule',
                'verbose_name_plural': 'Training Schedules',
                'ordering': ['scheduled_date', 'start_time'],
            },
        ),
        migrations.CreateModel(
            name='TrainingScheduleRegistration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('registered_at', models.DateTimeField(auto_now_add=True)),
                ('attendance_status', models.CharField(choices=[('REGISTERED', 'Registered'), ('CONFIRMED', 'Confirmed'), ('ATTENDED', 'Attended'), ('ABSENT', 'Absent'), ('CANCELLED', 'Cancelled')], default='REGISTERED', max_length=20)),
                ('attendance_marked_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='training_registrations', to='hr.hremployee')),
                ('schedule', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='registrations', to='knowledge.trainingschedule')),
            ],
            options={
                'verbose_name': 'Schedule Registration',
                'verbose_name_plural': 'Schedule Registrations',
            },
        ),
        migrations.CreateModel(
            name='ArticleAcknowledgment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('acknowledged_at', models.DateTimeField(auto_now_add=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('article', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='acknowledgments', to='knowledge.article')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='article_acknowledgments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Article Acknowledgment',
                'verbose_name_plural': 'Article Acknowledgments',
                'indexes': [models.Index(fields=['article', 'acknowledged_at'], name='knowledge_a_article_a6d4e6_idx')],
                'unique_together': {('article', 'user')},
            },
        ),
        migrations.AddIndex(
            model_name='category',
            index=models.Index(fields=['slug'], name='knowledge_c_slug_733a40_idx'),
        ),
        migrations.AddIndex(
            model_name='category',
            index=models.Index(fields=['parent', 'order'], name='knowledge_c_parent__9bfd97_idx'),
        ),
        migrations.AddIndex(
            model_name='category',
            index=models.Index(fields=['is_active', 'is_deleted'], name='knowledge_c_is_acti_6989cc_idx'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['file_type'], name='knowledge_d_file_ty_dbb055_idx'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['is_public'], name='knowledge_d_is_publ_f251cc_idx'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['expires_at'], name='knowledge_d_expires_dc3e32_idx'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['public_id'], name='knowledge_d_public__99864c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='articleattachment',
            unique_together={('article', 'document')},
        ),
        migrations.AddIndex(
            model_name='faqentry',
            index=models.Index(fields=['group', 'is_published'], name='knowledge_f_group_i_0bd6ef_idx'),
        ),
        migrations.AddIndex(
            model_name='faqentry',
            index=models.Index(fields=['is_featured', 'is_published'], name='knowledge_f_is_feat_110d8e_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['code'], name='knowledge_i_code_aa1f94_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['instruction_type', 'status'], name='knowledge_i_instruc_c8aaac_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['status', 'is_default'], name='knowledge_i_status_f861fc_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['valid_from', 'valid_until'], name='knowledge_i_valid_f_030d6a_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['priority'], name='knowledge_i_priorit_8f1027_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['execution_order'], name='knowledge_i_executi_9be4f4_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionrule',
            index=models.Index(fields=['public_id'], name='knowledge_i_public__43fd05_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionexecutionlog',
            index=models.Index(fields=['instruction', 'executed_at'], name='knowledge_i_instruc_3850ef_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionexecutionlog',
            index=models.Index(fields=['executed_at'], name='knowledge_i_execute_365d5f_idx'),
        ),
        migrations.AddIndex(
            model_name='instructionexecutionlog',
            index=models.Index(fields=['trigger_content_type', 'trigger_object_id'], name='knowledge_i_trigger_b4f30a_idx'),
        ),
        migrations.AddIndex(
            model_name='instructiontargetscope',
            index=models.Index(fields=['instruction', 'scope_type'], name='knowledge_i_instruc_ac26ca_idx'),
        ),
        migrations.AddIndex(
            model_name='instructiontargetscope',
            index=models.Index(fields=['target_content_type', 'target_object_id'], name='knowledge_i_target__08cb48_idx'),
        ),
        migrations.AddIndex(
            model_name='ruleaction',
            index=models.Index(fields=['instruction', 'order'], name='knowledge_r_instruc_89b58c_idx'),
        ),
        migrations.AddIndex(
            model_name='ruleaction',
            index=models.Index(fields=['action_type'], name='knowledge_r_action__82ffeb_idx'),
        ),
        migrations.AddIndex(
            model_name='rulecondition',
            index=models.Index(fields=['instruction', 'order'], name='knowledge_r_instruc_6516cc_idx'),
        ),
        migrations.AddIndex(
            model_name='rulecondition',
            index=models.Index(fields=['target_model', 'field_path'], name='knowledge_r_target__1294d9_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['code'], name='knowledge_a_code_e4fcac_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['slug'], name='knowledge_a_slug_e2bc4a_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['article_type', 'status'], name='knowledge_a_article_0c9d16_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['status', 'published_at'], name='knowledge_a_status_333c27_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['owner_department', 'status'], name='knowledge_a_owner_d_d9d3d8_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['is_featured', 'is_pinned'], name='knowledge_a_is_feat_89dd97_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['review_due_date'], name='knowledge_a_review__7468ce_idx'),
        ),
        migrations.AddIndex(
            model_name='article',
            index=models.Index(fields=['public_id'], name='knowledge_a_public__15df5f_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingcourse',
            index=models.Index(fields=['code'], name='knowledge_t_code_89a04f_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingcourse',
            index=models.Index(fields=['course_type', 'status'], name='knowledge_t_course__7ead7a_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingcourse',
            index=models.Index(fields=['is_mandatory'], name='knowledge_t_is_mand_102d24_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingcourse',
            index=models.Index(fields=['status', 'published_at'], name='knowledge_t_status_114336_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingcourse',
            index=models.Index(fields=['public_id'], name='knowledge_t_public__c6bc92_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingenrollment',
            index=models.Index(fields=['course', 'status'], name='knowledge_t_course__9ac9f0_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingenrollment',
            index=models.Index(fields=['employee', 'status'], name='knowledge_t_employe_265eb0_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingenrollment',
            index=models.Index(fields=['expires_at'], name='knowledge_t_expires_48a232_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingenrollment',
            index=models.Index(fields=['enrolled_at'], name='knowledge_t_enrolle_25530c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='trainingenrollment',
            unique_together={('course', 'employee')},
        ),
        migrations.AddIndex(
            model_name='traininglesson',
            index=models.Index(fields=['course', 'sequence'], name='knowledge_t_course__01b2cd_idx'),
        ),
        migrations.AddIndex(
            model_name='traininglessonprogress',
            index=models.Index(fields=['enrollment', 'is_completed'], name='knowledge_t_enrollm_1da8f0_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='traininglessonprogress',
            unique_together={('enrollment', 'lesson')},
        ),
        migrations.AddIndex(
            model_name='trainingschedule',
            index=models.Index(fields=['course', 'scheduled_date'], name='knowledge_t_course__f43e64_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingschedule',
            index=models.Index(fields=['scheduled_date'], name='knowledge_t_schedul_9205aa_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='trainingscheduleregistration',
            unique_together={('schedule', 'employee')},
        ),
    ]
