# Generated by Django 5.2.6 on 2025-11-17 17:09

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('customer_code', models.CharField(db_index=True, help_text='Short code (e.g., ARAMCO, ADC, NOC)', max_length=50, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('legal_name', models.CharField(blank=True, default='', help_text='Full legal entity name', max_length=300)),
                ('customer_type', models.CharField(choices=[('OPERATOR', 'Oil & Gas Operator'), ('DRILLING_CONTRACTOR', 'Drilling Contractor'), ('SERVICE_COMPANY', 'Service Company'), ('DISTRIBUTOR', 'Distributor'), ('JV_PARTNER', 'Joint Venture Partner'), ('END_USER', 'End User'), ('OTHER', 'Other')], default='OPERATOR', max_length=30)),
                ('account_status', models.CharField(choices=[('ACTIVE', 'Active Account'), ('INACTIVE', 'Inactive'), ('PROSPECT', 'Prospect'), ('SUSPENDED', 'Suspended')], default='ACTIVE', max_length=20)),
                ('is_billing_entity', models.BooleanField(default=True, help_text='Can receive invoices')),
                ('is_operating_entity', models.BooleanField(default=True, help_text='Operates rigs/wells')),
                ('primary_contact_name', models.CharField(blank=True, default='', max_length=100)),
                ('primary_contact_email', models.EmailField(blank=True, default='', max_length=254)),
                ('primary_contact_phone', models.CharField(blank=True, default='', max_length=50)),
                ('address', models.TextField(blank=True, default='')),
                ('city', models.CharField(blank=True, default='', max_length=100)),
                ('country', models.CharField(blank=True, default='', max_length=100)),
                ('payment_terms_days', models.PositiveIntegerField(default=30, help_text='Standard payment terms in days')),
                ('credit_limit', models.DecimalField(decimal_places=2, default=0, help_text='Credit limit in SAR', max_digits=15)),
                ('currency', models.CharField(default='SAR', max_length=3)),
                ('requires_coc', models.BooleanField(default=True, help_text='Requires Certificate of Conformance')),
                ('requires_dull_grade', models.BooleanField(default=True, help_text='Requires dull grade evaluation after each run')),
                ('custom_report_format', models.CharField(blank=True, default='', help_text='Customer-specific report format (e.g., ARAMCO_COMPACT)', max_length=100)),
                ('external_id', models.CharField(blank=True, default='', help_text='ID in external system (ERP, etc.)', max_length=100)),
                ('notes', models.TextField(blank=True, default='')),
                ('billing_customer', models.ForeignKey(blank=True, help_text='If different, who to bill', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='operating_entities', to='sales.customer')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent_company', models.ForeignKey(blank=True, help_text='Parent company if this is a subsidiary', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='subsidiaries', to='sales.customer')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Customer',
                'verbose_name_plural': 'Customers',
                'db_table': 'sales_customer',
                'ordering': ['customer_code'],
            },
        ),
        migrations.CreateModel(
            name='JunkSale',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('junk_sale_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('serial_unit_id', models.BigIntegerField(db_index=True, help_text='Reference to inventory.SerialUnit')),
                ('bit_serial_number', models.CharField(db_index=True, max_length=100)),
                ('mat_number', models.CharField(blank=True, default='', max_length=50)),
                ('gross_weight_kg', models.DecimalField(decimal_places=3, help_text='Total weight before processing', max_digits=10)),
                ('net_weight_kg', models.DecimalField(decimal_places=3, help_text='Net weight sold', max_digits=10)),
                ('carbide_weight_kg', models.DecimalField(blank=True, decimal_places=3, help_text='Weight of carbide recovered', max_digits=10, null=True)),
                ('steel_weight_kg', models.DecimalField(blank=True, decimal_places=3, help_text='Weight of steel body', max_digits=10, null=True)),
                ('price_per_kg', models.DecimalField(decimal_places=2, help_text='Price per kg for scrap', max_digits=10)),
                ('carbide_price_per_kg', models.DecimalField(blank=True, decimal_places=2, help_text='Special price for carbide if separated', max_digits=10, null=True)),
                ('total_sale_value', models.DecimalField(decimal_places=2, help_text='Total value recovered', max_digits=15)),
                ('buyer_name', models.CharField(max_length=200)),
                ('buyer_contact', models.CharField(blank=True, default='', max_length=100)),
                ('buyer_reference', models.CharField(blank=True, default='', max_length=100)),
                ('sale_date', models.DateField(default=django.utils.timezone.now)),
                ('invoice_number', models.CharField(blank=True, default='', max_length=100)),
                ('payment_status', models.CharField(choices=[('UNPAID', 'Unpaid'), ('PARTIAL', 'Partially Paid'), ('PAID', 'Paid')], default='UNPAID', max_length=20)),
                ('payment_date', models.DateField(blank=True, null=True)),
                ('scrap_reason', models.CharField(blank=True, default='', help_text='Why bit was scrapped (wear, damage, obsolete)', max_length=100)),
                ('last_dull_grade', models.CharField(blank=True, default='', help_text='Final dull grade before scrapping', max_length=50)),
                ('total_footage_drilled', models.DecimalField(blank=True, decimal_places=2, help_text='Total footage drilled in lifetime', max_digits=10, null=True)),
                ('total_hours_drilled', models.DecimalField(blank=True, decimal_places=2, help_text='Total hours on bottom in lifetime', max_digits=10, null=True)),
                ('total_runs', models.PositiveIntegerField(default=0, help_text='Total number of runs in lifetime')),
                ('status', models.CharField(choices=[('PENDING', 'Pending Sale'), ('QUOTED', 'Quote Received'), ('SOLD', 'Sold'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20)),
                ('weight_certificate_url', models.URLField(blank=True, default='')),
                ('photos_json', models.JSONField(default=list)),
                ('approval_date', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_junk_sales', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Junk Sale',
                'verbose_name_plural': 'Junk Sales',
                'db_table': 'sales_junk_sale',
                'ordering': ['-sale_date'],
            },
        ),
        migrations.CreateModel(
            name='Rig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('rig_code', models.CharField(db_index=True, help_text='Rig identifier (e.g., RIG-101, ARAMCO-45)', max_length=50, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('rig_type', models.CharField(choices=[('LAND', 'Land Rig'), ('OFFSHORE_FIXED', 'Offshore Fixed Platform'), ('JACKUP', 'Jack-up Rig'), ('SEMI_SUBMERSIBLE', 'Semi-submersible'), ('DRILLSHIP', 'Drillship'), ('BARGE', 'Drilling Barge'), ('COILED_TUBING', 'Coiled Tubing Unit'), ('WORKOVER', 'Workover Rig'), ('OTHER', 'Other')], max_length=30)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active - Drilling'), ('STANDBY', 'Standby'), ('MOBILIZING', 'Mobilizing'), ('DEMOBILIZING', 'Demobilizing'), ('STACKED', 'Stacked'), ('UNDER_MAINTENANCE', 'Under Maintenance'), ('RETIRED', 'Retired')], default='ACTIVE', max_length=20)),
                ('max_depth_ft', models.PositiveIntegerField(blank=True, help_text='Maximum depth capability in feet', null=True)),
                ('top_drive', models.BooleanField(default=True)),
                ('mud_pump_capacity', models.CharField(blank=True, default='', max_length=100)),
                ('current_location', models.CharField(blank=True, default='', help_text='Current location or field', max_length=200)),
                ('gps_coordinates', models.CharField(blank=True, default='', max_length=100)),
                ('rig_manager', models.CharField(blank=True, default='', max_length=100)),
                ('toolpusher', models.CharField(blank=True, default='', max_length=100)),
                ('contact_phone', models.CharField(blank=True, default='', max_length=50)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('drilling_contractor', models.ForeignKey(blank=True, help_text='Drilling contractor if applicable', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contracted_rigs', to='sales.customer')),
                ('operator_customer', models.ForeignKey(blank=True, help_text='Company operating the rig (if different)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='operated_rigs', to='sales.customer')),
                ('owner_customer', models.ForeignKey(help_text='Company that owns the rig', on_delete=django.db.models.deletion.PROTECT, related_name='owned_rigs', to='sales.customer')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Rig',
                'verbose_name_plural': 'Rigs',
                'db_table': 'sales_rig',
                'ordering': ['rig_code'],
            },
        ),
        migrations.CreateModel(
            name='SalesOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('order_number', models.CharField(db_index=True, help_text='Internal order number', max_length=50, unique=True)),
                ('customer_po_number', models.CharField(blank=True, default='', help_text="Customer's PO number", max_length=100)),
                ('delivery_location', models.CharField(blank=True, default='', help_text='Delivery address/location', max_length=200)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('CONFIRMED', 'Confirmed'), ('IN_PRODUCTION', 'In Production'), ('PARTIAL_SHIPPED', 'Partially Shipped'), ('SHIPPED', 'Shipped'), ('DELIVERED', 'Delivered'), ('INVOICED', 'Invoiced'), ('CLOSED', 'Closed'), ('CANCELLED', 'Cancelled')], db_index=True, default='DRAFT', max_length=20)),
                ('priority', models.CharField(choices=[('CRITICAL', 'Critical'), ('RUSH', 'Rush'), ('HIGH', 'High'), ('NORMAL', 'Normal'), ('LOW', 'Low')], default='NORMAL', max_length=20)),
                ('order_date', models.DateField(default=django.utils.timezone.now)),
                ('required_delivery_date', models.DateField(blank=True, help_text="Customer's required date", null=True)),
                ('promised_delivery_date', models.DateField(blank=True, help_text='Our promised delivery date', null=True)),
                ('actual_delivery_date', models.DateField(blank=True, null=True)),
                ('total_value', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('currency', models.CharField(default='SAR', max_length=3)),
                ('payment_terms_days', models.PositiveIntegerField(blank=True, help_text='Override customer default', null=True)),
                ('batch_order_id', models.BigIntegerField(blank=True, db_index=True, help_text='Reference to production.BatchOrder', null=True)),
                ('special_instructions', models.TextField(blank=True, default='')),
                ('quality_requirements', models.TextField(blank=True, default='', help_text='Customer-specific quality requirements')),
                ('invoice_number', models.CharField(blank=True, default='', max_length=100)),
                ('invoice_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('billing_customer', models.ForeignKey(blank=True, help_text='Bill-to customer if different', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='billed_orders', to='sales.customer')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='sales_orders', to='sales.customer')),
                ('rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sales_orders', to='sales.rig')),
                ('sales_rep', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sales_orders', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Sales Order',
                'verbose_name_plural': 'Sales Orders',
                'db_table': 'sales_order',
                'ordering': ['-order_date'],
            },
        ),
        migrations.CreateModel(
            name='SalesOrderLine',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('line_number', models.PositiveIntegerField()),
                ('item_id', models.BigIntegerField(blank=True, help_text='Reference to inventory.Item', null=True)),
                ('mat_number', models.CharField(blank=True, default='', help_text='MAT number if bit', max_length=50)),
                ('description', models.CharField(max_length=300)),
                ('quantity_ordered', models.DecimalField(decimal_places=2, max_digits=10)),
                ('quantity_shipped', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('quantity_delivered', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('uom', models.CharField(default='PC', max_length=20)),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=12)),
                ('discount_percent', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('line_total', models.DecimalField(decimal_places=2, max_digits=15)),
                ('assigned_serial_numbers', models.TextField(blank=True, default='', help_text='Comma-separated serial numbers')),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('sales_order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lines', to='sales.salesorder')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Sales Order Line',
                'verbose_name_plural': 'Sales Order Lines',
                'db_table': 'sales_order_line',
                'ordering': ['sales_order', 'line_number'],
            },
        ),
        migrations.CreateModel(
            name='Well',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('well_name', models.CharField(db_index=True, max_length=100, unique=True)),
                ('uwi', models.CharField(blank=True, default='', help_text='Unique Well Identifier', max_length=50)),
                ('api_number', models.CharField(blank=True, default='', help_text='API Well Number', max_length=50)),
                ('well_type', models.CharField(choices=[('EXPLORATION', 'Exploration'), ('DEVELOPMENT', 'Development'), ('APPRAISAL', 'Appraisal'), ('INJECTION', 'Injection'), ('WORKOVER', 'Workover'), ('SIDETRACK', 'Sidetrack'), ('OTHER', 'Other')], max_length=20)),
                ('status', models.CharField(choices=[('PLANNED', 'Planned'), ('DRILLING', 'Drilling'), ('COMPLETING', 'Completing'), ('PRODUCING', 'Producing'), ('SUSPENDED', 'Suspended'), ('ABANDONED', 'Abandoned')], default='PLANNED', max_length=20)),
                ('field_name', models.CharField(max_length=100)),
                ('block_name', models.CharField(blank=True, default='', max_length=100)),
                ('country', models.CharField(default='Saudi Arabia', max_length=100)),
                ('gps_latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('gps_longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('spud_date', models.DateField(blank=True, null=True)),
                ('planned_td_ft', models.PositiveIntegerField(blank=True, help_text='Planned Total Depth in feet', null=True)),
                ('current_depth_ft', models.PositiveIntegerField(blank=True, help_text='Current depth in feet', null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('current_rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='wells', to='sales.rig')),
                ('operator_customer', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='wells', to='sales.customer')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Well',
                'verbose_name_plural': 'Wells',
                'db_table': 'sales_well',
                'ordering': ['well_name'],
            },
        ),
        migrations.CreateModel(
            name='Shipment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('shipment_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('sales_order_id', models.BigIntegerField(blank=True, db_index=True, help_text='Reference to SalesOrder', null=True)),
                ('shipment_type', models.CharField(choices=[('OUTBOUND', 'Outbound to Customer'), ('RETURN', 'Return from Field'), ('TRANSFER', 'Inter-location Transfer'), ('REPAIR_DELIVERY', 'Repair Delivery')], default='OUTBOUND', max_length=20)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('PENDING', 'Pending Shipment'), ('SHIPPED', 'Shipped'), ('IN_TRANSIT', 'In Transit'), ('DELIVERED', 'Delivered'), ('PARTIAL', 'Partially Delivered'), ('CANCELLED', 'Cancelled')], default='DRAFT', max_length=20)),
                ('from_location', models.CharField(max_length=200)),
                ('to_location', models.CharField(max_length=200)),
                ('carrier', models.CharField(blank=True, choices=[('FEDEX', 'FedEx'), ('UPS', 'UPS'), ('DHL', 'DHL'), ('TRUCK', 'Truck Freight'), ('AIR', 'Air Freight'), ('SEA', 'Sea Freight'), ('COURIER', 'Local Courier'), ('CUSTOMER_PICKUP', 'Customer Pickup'), ('OWN_FLEET', 'Own Fleet'), ('OTHER', 'Other')], default='', max_length=20)),
                ('tracking_number', models.CharField(blank=True, default='', max_length=100)),
                ('waybill_number', models.CharField(blank=True, default='', max_length=100)),
                ('ship_date', models.DateField(blank=True, null=True)),
                ('expected_delivery_date', models.DateField(blank=True, null=True)),
                ('actual_delivery_date', models.DateField(blank=True, null=True)),
                ('shipping_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('insurance_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('bit_serial_numbers', models.TextField(blank=True, default='', help_text='Comma-separated list of bit serial numbers')),
                ('contents_description', models.TextField(blank=True, default='', help_text='Description of shipment contents')),
                ('total_weight_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('number_of_packages', models.PositiveIntegerField(default=1)),
                ('packing_list_url', models.URLField(blank=True, default='')),
                ('commercial_invoice_url', models.URLField(blank=True, default='')),
                ('customs_documents_json', models.JSONField(default=dict)),
                ('shipper_name', models.CharField(blank=True, default='', max_length=100)),
                ('receiver_name', models.CharField(blank=True, default='', max_length=100)),
                ('receiver_phone', models.CharField(blank=True, default='', max_length=30)),
                ('handling_instructions', models.TextField(blank=True, default='')),
                ('notes', models.TextField(blank=True, default='')),
                ('confirmation_date', models.DateTimeField(blank=True, null=True)),
                ('confirmed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='confirmed_shipments', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('from_customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='shipments_from', to='sales.customer')),
                ('from_rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='shipments_from', to='sales.rig')),
                ('to_customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='shipments_to', to='sales.customer')),
                ('to_rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='shipments_to', to='sales.rig')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('to_well', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='shipments', to='sales.well')),
            ],
            options={
                'verbose_name': 'Shipment',
                'verbose_name_plural': 'Shipments',
                'db_table': 'sales_shipment',
                'ordering': ['-ship_date', '-created_at'],
            },
        ),
        migrations.AddField(
            model_name='salesorder',
            name='well',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sales_orders', to='sales.well'),
        ),
        migrations.CreateModel(
            name='SalesOpportunity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('opportunity_number', models.CharField(db_index=True, help_text='Auto-generated opportunity ID', max_length=50, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, default='')),
                ('field_name', models.CharField(blank=True, default='', max_length=100)),
                ('bit_size_inches', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('bit_type', models.CharField(blank=True, default='', help_text='PDC, Roller Cone, etc.', max_length=50)),
                ('mat_number', models.CharField(blank=True, default='', help_text='Specific MAT if known', max_length=50)),
                ('quantity', models.PositiveIntegerField(default=1)),
                ('application', models.CharField(blank=True, default='', help_text='Drilling application/section', max_length=200)),
                ('status', models.CharField(choices=[('IDENTIFIED', 'Identified'), ('QUALIFIED', 'Qualified'), ('QUOTED', 'Quote Sent'), ('NEGOTIATING', 'Negotiating'), ('WON', 'Won'), ('LOST', 'Lost'), ('ON_HOLD', 'On Hold'), ('CANCELLED', 'Cancelled')], db_index=True, default='IDENTIFIED', max_length=20)),
                ('probability', models.PositiveIntegerField(choices=[(10, '10% - Early Stage'), (25, '25% - Engaged'), (50, '50% - Proposal Sent'), (75, '75% - Verbal Commitment'), (90, '90% - Contract Review'), (100, '100% - Won')], default=10)),
                ('estimated_value', models.DecimalField(decimal_places=2, default=0, help_text='Expected revenue in SAR', max_digits=15)),
                ('currency', models.CharField(default='SAR', max_length=3)),
                ('expected_order_date', models.DateField(blank=True, help_text='Expected order placement date', null=True)),
                ('expected_delivery_date', models.DateField(blank=True, help_text='Expected delivery/use date', null=True)),
                ('closed_date', models.DateField(blank=True, null=True)),
                ('close_reason', models.TextField(blank=True, default='')),
                ('competitor', models.CharField(blank=True, default='', help_text='Competitor who won (if lost)', max_length=100)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='opportunities', to='sales.customer')),
                ('rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='opportunities', to='sales.rig')),
                ('sales_rep', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sales_opportunities', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('converted_to_order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='source_opportunities', to='sales.salesorder')),
                ('well', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='opportunities', to='sales.well')),
            ],
            options={
                'verbose_name': 'Sales Opportunity',
                'verbose_name_plural': 'Sales Opportunities',
                'db_table': 'sales_opportunity',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DullGradeEvaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('evaluation_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('serial_unit_id', models.BigIntegerField(db_index=True, help_text='Reference to inventory.SerialUnit')),
                ('bit_serial_number', models.CharField(db_index=True, help_text='Bit serial number (denormalized)', max_length=100)),
                ('mat_number', models.CharField(blank=True, default='', max_length=50)),
                ('drilling_run_id', models.BigIntegerField(blank=True, db_index=True, help_text='Reference to DrillingRun', null=True)),
                ('run_sequence', models.PositiveIntegerField(default=1, help_text='Which run this evaluation is for')),
                ('inner_cutting_structure', models.CharField(choices=[('0', '0 - No Wear'), ('1', '1 - 12.5% Wear'), ('2', '2 - 25% Wear'), ('3', '3 - 37.5% Wear'), ('4', '4 - 50% Wear'), ('5', '5 - 62.5% Wear'), ('6', '6 - 75% Wear'), ('7', '7 - 87.5% Wear'), ('8', '8 - 100% Worn Out')], help_text='Inner 2/3 cutting structure wear (0-8)', max_length=1)),
                ('outer_cutting_structure', models.CharField(choices=[('0', '0 - No Wear'), ('1', '1 - 12.5% Wear'), ('2', '2 - 25% Wear'), ('3', '3 - 37.5% Wear'), ('4', '4 - 50% Wear'), ('5', '5 - 62.5% Wear'), ('6', '6 - 75% Wear'), ('7', '7 - 87.5% Wear'), ('8', '8 - 100% Worn Out')], help_text='Outer 1/3 cutting structure wear (0-8)', max_length=1)),
                ('primary_dull_characteristic', models.CharField(choices=[('BC', 'BC - Broken Cutter'), ('BF', 'BF - Bond Failure'), ('BT', 'BT - Broken Teeth'), ('BU', 'BU - Balled Up'), ('CC', 'CC - Cracked Cutter'), ('CI', 'CI - Cone Interference'), ('CR', 'CR - Cored'), ('CT', 'CT - Chipped Tooth'), ('ER', 'ER - Erosion'), ('FC', 'FC - Flat Crested'), ('HC', 'HC - Heat Checking'), ('JD', 'JD - Junk Damage'), ('LC', 'LC - Lost Cutter'), ('LN', 'LN - Lost Nozzle'), ('LT', 'LT - Lost Teeth'), ('NO', 'NO - No Dull'), ('OC', 'OC - Off Center'), ('PB', 'PB - Pinched Bit'), ('PN', 'PN - Plugged Nozzle'), ('RG', 'RG - Rounded Gauge'), ('RO', 'RO - Ring Out'), ('SD', 'SD - Shirttail Damage'), ('SS', 'SS - Self Sharpening'), ('TR', 'TR - Tracking'), ('WO', 'WO - Washed Out'), ('WT', 'WT - Worn Teeth')], help_text='Primary dull characteristic', max_length=3)),
                ('secondary_dull_characteristic', models.CharField(blank=True, choices=[('BC', 'BC - Broken Cutter'), ('BF', 'BF - Bond Failure'), ('BT', 'BT - Broken Teeth'), ('BU', 'BU - Balled Up'), ('CC', 'CC - Cracked Cutter'), ('CI', 'CI - Cone Interference'), ('CR', 'CR - Cored'), ('CT', 'CT - Chipped Tooth'), ('ER', 'ER - Erosion'), ('FC', 'FC - Flat Crested'), ('HC', 'HC - Heat Checking'), ('JD', 'JD - Junk Damage'), ('LC', 'LC - Lost Cutter'), ('LN', 'LN - Lost Nozzle'), ('LT', 'LT - Lost Teeth'), ('NO', 'NO - No Dull'), ('OC', 'OC - Off Center'), ('PB', 'PB - Pinched Bit'), ('PN', 'PN - Plugged Nozzle'), ('RG', 'RG - Rounded Gauge'), ('RO', 'RO - Ring Out'), ('SD', 'SD - Shirttail Damage'), ('SS', 'SS - Self Sharpening'), ('TR', 'TR - Tracking'), ('WO', 'WO - Washed Out'), ('WT', 'WT - Worn Teeth')], default='', help_text='Secondary characteristic (optional)', max_length=3)),
                ('dull_location', models.CharField(choices=[('N', 'N - Nose'), ('M', 'M - Middle'), ('G', 'G - Gauge'), ('A', 'A - All Areas'), ('C', 'C - Cone/Shoulder')], help_text='Location of primary wear', max_length=1)),
                ('bearing_seal', models.CharField(blank=True, default='X', help_text='X for fixed cutter bits', max_length=10)),
                ('gauge_condition', models.CharField(choices=[('I', 'I - In Gauge'), ('1', '1 - 1/16" Under'), ('2', '2 - 2/16" Under'), ('3', '3 - 3/16" Under'), ('4', '4 - 4/16" Under'), ('5', '5 - 5/16" Under'), ('6', '6 - 6/16" Under'), ('7', '7 - 7/16" Under'), ('8', '8 - 8/16" Under')], help_text='Gauge wear measurement', max_length=1)),
                ('other_dull_characteristic', models.CharField(blank=True, choices=[('BC', 'BC - Broken Cutter'), ('BF', 'BF - Bond Failure'), ('BT', 'BT - Broken Teeth'), ('BU', 'BU - Balled Up'), ('CC', 'CC - Cracked Cutter'), ('CI', 'CI - Cone Interference'), ('CR', 'CR - Cored'), ('CT', 'CT - Chipped Tooth'), ('ER', 'ER - Erosion'), ('FC', 'FC - Flat Crested'), ('HC', 'HC - Heat Checking'), ('JD', 'JD - Junk Damage'), ('LC', 'LC - Lost Cutter'), ('LN', 'LN - Lost Nozzle'), ('LT', 'LT - Lost Teeth'), ('NO', 'NO - No Dull'), ('OC', 'OC - Off Center'), ('PB', 'PB - Pinched Bit'), ('PN', 'PN - Plugged Nozzle'), ('RG', 'RG - Rounded Gauge'), ('RO', 'RO - Ring Out'), ('SD', 'SD - Shirttail Damage'), ('SS', 'SS - Self Sharpening'), ('TR', 'TR - Tracking'), ('WO', 'WO - Washed Out'), ('WT', 'WT - Worn Teeth')], default='', help_text='Other notable characteristic', max_length=3)),
                ('reason_pulled', models.CharField(choices=[('BHA', 'BHA - Change BHA'), ('CM', 'CM - Condition Mud'), ('CP', 'CP - Core Point'), ('DMF', 'DMF - Downhole Motor Failure'), ('DP', 'DP - Drill Plug'), ('DSF', 'DSF - Drill String Failure'), ('DST', 'DST - Drill Stem Test'), ('DTF', 'DTF - Downhole Tool Failure'), ('FM', 'FM - Formation Change'), ('HP', 'HP - Hole Problems'), ('HR', 'HR - Hours on Bit'), ('LOG', 'LOG - Run Logs'), ('PP', 'PP - Pump Pressure'), ('PR', 'PR - Penetration Rate'), ('RIG', 'RIG - Rig Repair'), ('TD', 'TD - Total Depth'), ('TQ', 'TQ - Torque'), ('TW', 'TW - Twist Off'), ('WC', 'WC - Weather Conditions'), ('WO', 'WO - Washout')], help_text='Why the bit was pulled', max_length=5)),
                ('iadc_dull_grade', models.CharField(blank=True, default='', help_text='Complete IADC dull grade string (auto-generated)', max_length=50)),
                ('cutter_wear_percent', models.DecimalField(blank=True, decimal_places=2, help_text='Overall cutter wear percentage', max_digits=5, null=True)),
                ('gauge_wear_inches', models.DecimalField(blank=True, decimal_places=3, help_text='Actual gauge wear in inches', max_digits=5, null=True)),
                ('impact_damage', models.TextField(blank=True, default='')),
                ('abrasion_notes', models.TextField(blank=True, default='')),
                ('thermal_damage', models.TextField(blank=True, default='')),
                ('erosion_notes', models.TextField(blank=True, default='')),
                ('bit_balling_observed', models.BooleanField(default=False)),
                ('cutter_loss_count', models.PositiveIntegerField(default=0)),
                ('blade_damage_notes', models.TextField(blank=True, default='')),
                ('photos_json', models.JSONField(default=list, help_text='List of photo URLs/paths')),
                ('evaluation_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('evaluation_source', models.CharField(choices=[('RIG_SITE', 'Rig Site Evaluation'), ('CUSTOMER_WAREHOUSE', 'Customer Warehouse'), ('INTERNAL_EVAL', 'Internal Evaluation (ARDT)'), ('DRILLING_CONTRACTOR', 'Drilling Contractor Report'), ('THIRD_PARTY', 'Third Party Inspection')], default='INTERNAL_EVAL', max_length=30)),
                ('evaluator_name', models.CharField(blank=True, default='', help_text='Name if not system user', max_length=100)),
                ('evaluation_location', models.CharField(blank=True, default='', max_length=200)),
                ('recommended_action', models.CharField(blank=True, default='', help_text='RERUN, REPAIR, RETROFIT, SCRAP, etc.', max_length=100)),
                ('recommendation_notes', models.TextField(blank=True, default='')),
                ('ncr_id', models.BigIntegerField(blank=True, help_text='Link to quality.NonconformanceReport if issue found', null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='dull_grades', to='sales.customer')),
                ('evaluated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dull_grade_evaluations', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dull_grades', to='sales.rig')),
                ('well', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dull_grades', to='sales.well')),
            ],
            options={
                'verbose_name': 'Dull Grade Evaluation',
                'verbose_name_plural': 'Dull Grade Evaluations',
                'db_table': 'sales_dull_grade_evaluation',
                'ordering': ['bit_serial_number', '-evaluation_date'],
            },
        ),
        migrations.CreateModel(
            name='DrillingRun',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('run_number', models.CharField(db_index=True, help_text='Unique run identifier', max_length=50, unique=True)),
                ('serial_unit_id', models.BigIntegerField(db_index=True, help_text='Reference to inventory.SerialUnit')),
                ('bit_serial_number', models.CharField(db_index=True, help_text='Bit serial number (denormalized)', max_length=100)),
                ('mat_number', models.CharField(blank=True, default='', help_text='MAT at time of run', max_length=50)),
                ('bit_size_inches', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('run_sequence', models.PositiveIntegerField(default=1, help_text='Run 1, Run 2, etc. for this bit')),
                ('hole_section', models.CharField(help_text='Hole size (e.g., 8½", 12¼", 17½")', max_length=50)),
                ('hole_type', models.CharField(blank=True, default='', help_text='Open hole, casing, etc.', max_length=50)),
                ('depth_in_ft', models.DecimalField(decimal_places=2, help_text='Measured Depth In (feet)', max_digits=10)),
                ('depth_out_ft', models.DecimalField(blank=True, decimal_places=2, help_text='Measured Depth Out (feet)', max_digits=10, null=True)),
                ('tvd_in_ft', models.DecimalField(blank=True, decimal_places=2, help_text='True Vertical Depth In', max_digits=10, null=True)),
                ('tvd_out_ft', models.DecimalField(blank=True, decimal_places=2, help_text='True Vertical Depth Out', max_digits=10, null=True)),
                ('footage_drilled', models.DecimalField(blank=True, decimal_places=2, help_text='Total footage drilled', max_digits=10, null=True)),
                ('hours_on_bottom', models.DecimalField(blank=True, decimal_places=2, help_text='Rotating hours on bottom', max_digits=8, null=True)),
                ('avg_rop', models.DecimalField(blank=True, decimal_places=2, help_text='Average Rate of Penetration (ft/hr)', max_digits=8, null=True)),
                ('max_rop', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum ROP achieved', max_digits=8, null=True)),
                ('avg_wob_klbs', models.DecimalField(blank=True, decimal_places=2, help_text='Average Weight on Bit (1000 lbs)', max_digits=6, null=True)),
                ('max_wob_klbs', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('avg_rpm', models.DecimalField(blank=True, decimal_places=1, help_text='Average rotary RPM', max_digits=6, null=True)),
                ('max_rpm', models.DecimalField(blank=True, decimal_places=1, max_digits=6, null=True)),
                ('avg_flow_rate_gpm', models.DecimalField(blank=True, decimal_places=2, help_text='Average flow rate (gallons/min)', max_digits=8, null=True)),
                ('avg_standpipe_psi', models.DecimalField(blank=True, decimal_places=2, help_text='Average standpipe pressure (psi)', max_digits=8, null=True)),
                ('avg_torque_kftlbs', models.DecimalField(blank=True, decimal_places=2, help_text='Average torque (1000 ft-lbs)', max_digits=8, null=True)),
                ('mud_type', models.CharField(blank=True, default='', help_text='WBM, OBM, SBM, etc.', max_length=50)),
                ('mud_weight_ppg', models.DecimalField(blank=True, decimal_places=2, help_text='Mud weight (lbs/gallon)', max_digits=5, null=True)),
                ('mud_properties_json', models.JSONField(default=dict, help_text='Additional mud properties')),
                ('nozzle_configuration', models.CharField(blank=True, default='', help_text='Nozzle sizes (e.g., 5x14, 2x16)', max_length=100)),
                ('tfa_sqin', models.DecimalField(blank=True, decimal_places=3, help_text='Total Flow Area (sq.in.)', max_digits=6, null=True)),
                ('formation_name', models.CharField(blank=True, default='', max_length=100)),
                ('lithology', models.TextField(blank=True, default='', help_text='Formation description')),
                ('run_in_date', models.DateTimeField(blank=True, help_text='When bit was run in hole', null=True)),
                ('run_out_date', models.DateTimeField(blank=True, help_text='When bit was pulled out', null=True)),
                ('status', models.CharField(choices=[('PLANNED', 'Planned'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('TRIPPED', 'Tripped Out'), ('FAILED', 'Failed/Pulled Early')], db_index=True, default='PLANNED', max_length=20)),
                ('trip_reason', models.CharField(blank=True, default='', help_text='Why bit was pulled (TD, wear, failure, etc.)', max_length=200)),
                ('problems_encountered', models.TextField(blank=True, default='', help_text='Vibrations, stability issues, losses, etc.')),
                ('downhole_tool_failures', models.TextField(blank=True, default='')),
                ('dull_grade_id', models.BigIntegerField(blank=True, help_text='Reference to DullGradeEvaluation', null=True)),
                ('bha_details_json', models.JSONField(default=dict, help_text='Bottom Hole Assembly details')),
                ('directional_data_json', models.JSONField(default=dict, help_text='Inclination, azimuth, DLS, etc.')),
                ('operational_summary', models.TextField(blank=True, default='')),
                ('reported_by', models.CharField(blank=True, default='', help_text='Drilling engineer/contractor who reported', max_length=100)),
                ('report_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='drilling_runs', to='sales.customer')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('rig', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='drilling_runs', to='sales.rig')),
                ('well', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='drilling_runs', to='sales.well')),
            ],
            options={
                'verbose_name': 'Drilling Run',
                'verbose_name_plural': 'Drilling Runs',
                'db_table': 'sales_drilling_run',
                'ordering': ['bit_serial_number', 'run_sequence'],
            },
        ),
        migrations.CreateModel(
            name='BitLifecycleEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('event_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('serial_unit_id', models.BigIntegerField(db_index=True, help_text='Reference to inventory.SerialUnit')),
                ('bit_serial_number', models.CharField(db_index=True, help_text='Bit serial number (denormalized for quick access)', max_length=100)),
                ('mat_number', models.CharField(blank=True, default='', help_text='MAT number at time of event', max_length=50)),
                ('event_type', models.CharField(choices=[('MANUFACTURED', 'Manufactured (New)'), ('REPAIR_STARTED', 'Repair Job Started'), ('REPAIR_COMPLETED', 'Repair Job Completed'), ('RETROFIT', 'Retrofit/MAT Change'), ('QC_PASSED', 'Quality Control Passed'), ('QC_FAILED', 'Quality Control Failed'), ('RECEIVED', 'Received into Inventory'), ('STOCKED', 'Stocked in Warehouse'), ('ALLOCATED', 'Allocated to Order'), ('DEALLOCATED', 'Deallocated from Order'), ('SHIPPED_TO_CUSTOMER', 'Shipped to Customer'), ('SHIPPED_TO_RIG', 'Shipped to Rig'), ('SHIPPED_TO_WAREHOUSE', 'Shipped to Warehouse'), ('IN_TRANSIT', 'In Transit'), ('DELIVERED', 'Delivered'), ('RETURNED', 'Returned from Field'), ('RUN_IN_HOLE', 'Run In Hole'), ('PULLED_OUT', 'Pulled Out of Hole'), ('DULL_GRADED', 'Dull Grade Evaluation'), ('INSPECTION', 'Inspection Performed'), ('REWORK_REQUIRED', 'Rework Required'), ('APPROVED_FOR_RERUN', 'Approved for Rerun'), ('CONDEMNED', 'Condemned'), ('SCRAPPED', 'Scrapped'), ('JUNKED', 'Junked/Sold as Scrap'), ('LOST_IN_HOLE', 'Lost in Hole'), ('OWNERSHIP_TRANSFER', 'Ownership Transferred'), ('LOCATION_UPDATE', 'Location Updated'), ('STATUS_CHANGE', 'Status Changed'), ('NOTE_ADDED', 'Note Added')], db_index=True, max_length=30)),
                ('event_datetime', models.DateTimeField(db_index=True, default=django.utils.timezone.now)),
                ('location_description', models.CharField(blank=True, default='', help_text='Physical location (warehouse, rig name, etc.)', max_length=200)),
                ('job_card_id', models.BigIntegerField(blank=True, help_text='Reference to production.JobCard', null=True)),
                ('sales_order_id', models.BigIntegerField(blank=True, help_text='Reference to sales.SalesOrder', null=True)),
                ('drilling_run_id', models.BigIntegerField(blank=True, help_text='Reference to sales.DrillingRun', null=True)),
                ('dull_grade_id', models.BigIntegerField(blank=True, help_text='Reference to sales.DullGradeEvaluation', null=True)),
                ('shipment_id', models.BigIntegerField(blank=True, help_text='Reference to sales.Shipment', null=True)),
                ('ncr_id', models.BigIntegerField(blank=True, help_text='Reference to quality.NonconformanceReport', null=True)),
                ('junk_sale_id', models.BigIntegerField(blank=True, help_text='Reference to sales.JunkSale', null=True)),
                ('description', models.TextField(blank=True, default='', help_text='Human-readable event description')),
                ('notes', models.TextField(blank=True, default='')),
                ('previous_status', models.CharField(blank=True, default='', max_length=50)),
                ('new_status', models.CharField(blank=True, default='', max_length=50)),
                ('previous_location', models.CharField(blank=True, default='', max_length=200)),
                ('new_location', models.CharField(blank=True, default='', max_length=200)),
                ('cumulative_footage', models.DecimalField(blank=True, decimal_places=2, help_text='Total footage drilled to date', max_digits=10, null=True)),
                ('cumulative_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Total hours on bottom to date', max_digits=10, null=True)),
                ('run_count', models.PositiveIntegerField(default=0, help_text='Number of runs completed to date')),
                ('recorded_by_name', models.CharField(blank=True, default='', help_text='Name if not system user', max_length=100)),
                ('attachments_json', models.JSONField(default=list, help_text='List of attachment URLs/paths')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('recorded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='recorded_lifecycle_events', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lifecycle_events', to='sales.customer')),
                ('rig', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lifecycle_events', to='sales.rig')),
                ('well', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lifecycle_events', to='sales.well')),
            ],
            options={
                'verbose_name': 'Bit Lifecycle Event',
                'verbose_name_plural': 'Bit Lifecycle Events',
                'db_table': 'sales_bit_lifecycle_event',
                'ordering': ['bit_serial_number', '-event_datetime'],
            },
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['customer_code'], name='ix_sales_cust_code'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['customer_type'], name='ix_sales_cust_type'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['account_status'], name='ix_sales_cust_status'),
        ),
        migrations.AddIndex(
            model_name='junksale',
            index=models.Index(fields=['junk_sale_number'], name='ix_sales_junk_number'),
        ),
        migrations.AddIndex(
            model_name='junksale',
            index=models.Index(fields=['serial_unit_id'], name='ix_sales_junk_serial'),
        ),
        migrations.AddIndex(
            model_name='junksale',
            index=models.Index(fields=['bit_serial_number'], name='ix_sales_junk_bitsn'),
        ),
        migrations.AddIndex(
            model_name='junksale',
            index=models.Index(fields=['sale_date'], name='ix_sales_junk_date'),
        ),
        migrations.AddIndex(
            model_name='junksale',
            index=models.Index(fields=['status'], name='ix_sales_junk_status'),
        ),
        migrations.AddIndex(
            model_name='rig',
            index=models.Index(fields=['rig_code'], name='ix_sales_rig_code'),
        ),
        migrations.AddIndex(
            model_name='rig',
            index=models.Index(fields=['status'], name='ix_sales_rig_status'),
        ),
        migrations.AddIndex(
            model_name='rig',
            index=models.Index(fields=['rig_type'], name='ix_sales_rig_type'),
        ),
        migrations.AddIndex(
            model_name='salesorderline',
            index=models.Index(fields=['sales_order'], name='ix_sales_ordln_order'),
        ),
        migrations.AddIndex(
            model_name='salesorderline',
            index=models.Index(fields=['mat_number'], name='ix_sales_ordln_mat'),
        ),
        migrations.AlterUniqueTogether(
            name='salesorderline',
            unique_together={('sales_order', 'line_number')},
        ),
        migrations.AddIndex(
            model_name='well',
            index=models.Index(fields=['well_name'], name='ix_sales_well_name'),
        ),
        migrations.AddIndex(
            model_name='well',
            index=models.Index(fields=['status'], name='ix_sales_well_status'),
        ),
        migrations.AddIndex(
            model_name='well',
            index=models.Index(fields=['field_name'], name='ix_sales_well_field'),
        ),
        migrations.AddIndex(
            model_name='shipment',
            index=models.Index(fields=['shipment_number'], name='ix_sales_ship_number'),
        ),
        migrations.AddIndex(
            model_name='shipment',
            index=models.Index(fields=['status'], name='ix_sales_ship_status'),
        ),
        migrations.AddIndex(
            model_name='shipment',
            index=models.Index(fields=['ship_date'], name='ix_sales_ship_date'),
        ),
        migrations.AddIndex(
            model_name='shipment',
            index=models.Index(fields=['tracking_number'], name='ix_sales_ship_tracking'),
        ),
        migrations.AddIndex(
            model_name='salesorder',
            index=models.Index(fields=['order_number'], name='ix_sales_ord_number'),
        ),
        migrations.AddIndex(
            model_name='salesorder',
            index=models.Index(fields=['customer_po_number'], name='ix_sales_ord_custpo'),
        ),
        migrations.AddIndex(
            model_name='salesorder',
            index=models.Index(fields=['status'], name='ix_sales_ord_status'),
        ),
        migrations.AddIndex(
            model_name='salesorder',
            index=models.Index(fields=['customer'], name='ix_sales_ord_customer'),
        ),
        migrations.AddIndex(
            model_name='salesorder',
            index=models.Index(fields=['required_delivery_date'], name='ix_sales_ord_reqdate'),
        ),
        migrations.AddIndex(
            model_name='salesopportunity',
            index=models.Index(fields=['opportunity_number'], name='ix_sales_opp_number'),
        ),
        migrations.AddIndex(
            model_name='salesopportunity',
            index=models.Index(fields=['status'], name='ix_sales_opp_status'),
        ),
        migrations.AddIndex(
            model_name='salesopportunity',
            index=models.Index(fields=['customer'], name='ix_sales_opp_customer'),
        ),
        migrations.AddIndex(
            model_name='salesopportunity',
            index=models.Index(fields=['expected_delivery_date'], name='ix_sales_opp_deldate'),
        ),
        migrations.AddIndex(
            model_name='dullgradeevaluation',
            index=models.Index(fields=['evaluation_number'], name='ix_sales_dg_number'),
        ),
        migrations.AddIndex(
            model_name='dullgradeevaluation',
            index=models.Index(fields=['serial_unit_id'], name='ix_sales_dg_serial'),
        ),
        migrations.AddIndex(
            model_name='dullgradeevaluation',
            index=models.Index(fields=['bit_serial_number'], name='ix_sales_dg_bitsn'),
        ),
        migrations.AddIndex(
            model_name='dullgradeevaluation',
            index=models.Index(fields=['customer'], name='ix_sales_dg_customer'),
        ),
        migrations.AddIndex(
            model_name='dullgradeevaluation',
            index=models.Index(fields=['evaluation_date'], name='ix_sales_dg_evaldate'),
        ),
        migrations.AddIndex(
            model_name='dullgradeevaluation',
            index=models.Index(fields=['bit_serial_number', 'run_sequence'], name='ix_sales_dg_bit_seq'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['run_number'], name='ix_sales_drun_number'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['serial_unit_id'], name='ix_sales_drun_serial'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['bit_serial_number'], name='ix_sales_drun_bitsn'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['customer'], name='ix_sales_drun_customer'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['well'], name='ix_sales_drun_well'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['status'], name='ix_sales_drun_status'),
        ),
        migrations.AddIndex(
            model_name='drillingrun',
            index=models.Index(fields=['bit_serial_number', 'run_sequence'], name='ix_sales_drun_bit_seq'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['event_number'], name='ix_sales_ble_number'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['serial_unit_id'], name='ix_sales_ble_serial'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['bit_serial_number'], name='ix_sales_ble_bitsn'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['event_type'], name='ix_sales_ble_type'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['event_datetime'], name='ix_sales_ble_datetime'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['bit_serial_number', 'event_datetime'], name='ix_sales_ble_bit_time'),
        ),
        migrations.AddIndex(
            model_name='bitlifecycleevent',
            index=models.Index(fields=['customer', 'event_datetime'], name='ix_sales_ble_cust_time'),
        ),
    ]
