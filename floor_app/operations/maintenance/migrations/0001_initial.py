# Generated by Django 5.2.6 on 2025-11-17 15:25

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AssetCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Unique category code (e.g., GRND, OVEN, COMP)', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Category name', max_length=100)),
                ('description', models.TextField(blank=True, default='', help_text='Detailed description of this category')),
                ('default_pm_interval_days', models.PositiveIntegerField(blank=True, help_text='Default PM interval in days for assets in this category', null=True)),
                ('requires_certification', models.BooleanField(default=False, help_text='Whether technicians need special certification to work on these assets')),
                ('sort_order', models.PositiveIntegerField(default=0, help_text='Display order in lists')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent', models.ForeignKey(blank=True, help_text='Parent category for hierarchy', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='subcategories', to='maintenance.assetcategory')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Asset Category',
                'verbose_name_plural': 'Asset Categories',
                'db_table': 'maintenance_asset_category',
                'ordering': ['sort_order', 'code'],
            },
        ),
        migrations.CreateModel(
            name='Asset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('asset_code', models.CharField(db_index=True, help_text='Internal asset tag/code (e.g., AST-2025-0001)', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Asset name/title', max_length=200)),
                ('description', models.TextField(blank=True, default='', help_text='Detailed description of the asset')),
                ('manufacturer', models.CharField(blank=True, default='', help_text='Manufacturer name', max_length=150)),
                ('model_number', models.CharField(blank=True, default='', help_text='Model number', max_length=100)),
                ('serial_number', models.CharField(blank=True, default='', help_text='Serial number from manufacturer', max_length=100)),
                ('status', models.CharField(choices=[('IN_SERVICE', 'In Service'), ('UNDER_MAINTENANCE', 'Under Maintenance'), ('OUT_OF_SERVICE', 'Out of Service'), ('SCRAPPED', 'Scrapped'), ('DISPOSED', 'Disposed')], db_index=True, default='IN_SERVICE', help_text='Current operational status', max_length=20)),
                ('criticality', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], db_index=True, default='MEDIUM', help_text='How critical this asset is to production', max_length=10)),
                ('is_critical_production_asset', models.BooleanField(db_index=True, default=False, help_text='Mark if this asset can stop major production when down')),
                ('installation_date', models.DateField(blank=True, help_text='Date when asset was installed/commissioned', null=True)),
                ('warranty_expiry_date', models.DateField(blank=True, help_text='Warranty expiration date', null=True)),
                ('last_maintenance_date', models.DateField(blank=True, help_text='Date of last maintenance performed', null=True)),
                ('next_pm_due_date', models.DateField(blank=True, help_text='Next scheduled preventive maintenance date', null=True)),
                ('erp_asset_number', models.CharField(blank=True, default='', help_text='Asset number from ERP system', max_length=100)),
                ('qr_token', models.CharField(blank=True, db_index=True, help_text='Unique token for QR code scanning', max_length=100, unique=True)),
                ('purchase_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Original purchase cost', max_digits=15, null=True)),
                ('purchase_date', models.DateField(blank=True, help_text='Date of purchase', null=True)),
                ('replacement_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Estimated replacement cost', max_digits=15, null=True)),
                ('depreciation_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Annual depreciation rate (%)', max_digits=5, null=True)),
                ('current_meter_reading', models.DecimalField(decimal_places=2, default=0, help_text='Current meter reading (hours, cycles, km, etc.)', max_digits=12)),
                ('meter_unit', models.CharField(blank=True, default='', help_text='Unit of meter measurement (hours, cycles, km)', max_length=50)),
                ('last_meter_update', models.DateTimeField(blank=True, help_text='When meter was last updated', null=True)),
                ('specifications', models.TextField(blank=True, default='', help_text='Technical specifications')),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent_asset', models.ForeignKey(blank=True, help_text='Parent asset (for sub-equipment)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sub_equipment', to='maintenance.asset')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(help_text='Asset category', on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='maintenance.assetcategory')),
            ],
            options={
                'verbose_name': 'Asset',
                'verbose_name_plural': 'Assets',
                'db_table': 'maintenance_asset',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AssetDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(help_text='Document title', max_length=200)),
                ('doc_type', models.CharField(choices=[('MANUAL', 'User Manual'), ('DRAWING', 'Technical Drawing'), ('SOP', 'Standard Operating Procedure'), ('WARRANTY', 'Warranty Document'), ('CERTIFICATE', 'Certificate'), ('PHOTO', 'Photo'), ('SPEC_SHEET', 'Specification Sheet'), ('MAINTENANCE_GUIDE', 'Maintenance Guide'), ('SAFETY', 'Safety Document'), ('OTHER', 'Other')], default='OTHER', help_text='Type of document', max_length=20)),
                ('file', models.FileField(help_text='Uploaded file', upload_to='maintenance/asset_docs/%Y/%m/')),
                ('description', models.TextField(blank=True, default='', help_text='Description of this document')),
                ('version', models.CharField(blank=True, default='1.0', help_text='Document version', max_length=50)),
                ('is_current_version', models.BooleanField(default=True, help_text='Whether this is the current version')),
                ('asset', models.ForeignKey(help_text='Asset this document belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='maintenance.asset')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Asset Document',
                'verbose_name_plural': 'Asset Documents',
                'db_table': 'maintenance_asset_document',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AssetLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Unique location code (e.g., PDC-WS, RC-AREA)', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Location name', max_length=150)),
                ('description', models.TextField(blank=True, default='', help_text='Description of this location')),
                ('responsible_person_id', models.BigIntegerField(blank=True, help_text='ID of HR Employee responsible for this location', null=True)),
                ('responsible_person_name', models.CharField(blank=True, default='', help_text='Name of responsible person (denormalized)', max_length=200)),
                ('contact_phone', models.CharField(blank=True, default='', help_text='Contact phone for this location', max_length=50)),
                ('building', models.CharField(blank=True, default='', help_text='Building name or number', max_length=100)),
                ('floor_level', models.CharField(blank=True, default='', help_text='Floor or level', max_length=50)),
                ('sort_order', models.PositiveIntegerField(default=0, help_text='Display order in lists')),
                ('is_active', models.BooleanField(default=True, help_text='Whether this location is currently active')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent', models.ForeignKey(blank=True, help_text='Parent location for hierarchy', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sublocations', to='maintenance.assetlocation')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Asset Location',
                'verbose_name_plural': 'Asset Locations',
                'db_table': 'maintenance_asset_location',
                'ordering': ['sort_order', 'code'],
            },
        ),
        migrations.AddField(
            model_name='asset',
            name='location',
            field=models.ForeignKey(help_text='Physical location of the asset', on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='maintenance.assetlocation'),
        ),
        migrations.CreateModel(
            name='DowntimeEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('start_time', models.DateTimeField(db_index=True, help_text='When downtime started')),
                ('end_time', models.DateTimeField(blank=True, help_text='When downtime ended (null if ongoing)', null=True)),
                ('duration_minutes', models.PositiveIntegerField(blank=True, help_text='Total downtime duration in minutes', null=True)),
                ('downtime_type', models.CharField(choices=[('PLANNED', 'Planned (PM/Setup)'), ('UNPLANNED', 'Unplanned (Breakdown)')], db_index=True, help_text='Whether this was planned or unplanned', max_length=20)),
                ('reason_category', models.CharField(choices=[('BREAKDOWN', 'Equipment Breakdown'), ('PM_SCHEDULED', 'Scheduled Preventive Maintenance'), ('SETUP', 'Setup/Changeover'), ('NO_OPERATOR', 'No Operator Available'), ('NO_MATERIAL', 'No Material/Input'), ('QUALITY_ISSUE', 'Quality Issue'), ('UTILITY_FAILURE', 'Utility Failure (Power/Air/Water)'), ('SAFETY_STOP', 'Safety Stop'), ('INSPECTION', 'Inspection/Testing'), ('OTHER', 'Other')], db_index=True, help_text='Primary reason for downtime', max_length=20)),
                ('reason_detail', models.TextField(blank=True, default='', help_text='Detailed explanation of the downtime reason')),
                ('production_affected', models.BooleanField(db_index=True, default=False, help_text='Whether production was affected')),
                ('severity_score', models.PositiveIntegerField(default=1, help_text='Severity score 1-10 (1=minimal, 10=critical)')),
                ('is_verified', models.BooleanField(default=False, help_text='Whether this downtime record has been verified')),
                ('verified_at', models.DateTimeField(blank=True, help_text='When verified', null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('asset', models.ForeignKey(help_text='Asset that experienced downtime', on_delete=django.db.models.deletion.PROTECT, related_name='downtime_events', to='maintenance.asset')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('reported_by', models.ForeignKey(blank=True, help_text='Who reported this downtime', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reported_downtime', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, help_text='Who verified this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_downtime', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Downtime Event',
                'verbose_name_plural': 'Downtime Events',
                'db_table': 'maintenance_downtime_event',
                'ordering': ['-start_time'],
            },
        ),
        migrations.CreateModel(
            name='PMPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Unique PM plan code (e.g., PM-GRND-30D)', max_length=50, unique=True)),
                ('name', models.CharField(help_text='PM plan name', max_length=200)),
                ('description', models.TextField(help_text='Overview of this maintenance plan')),
                ('tasks_description', models.TextField(help_text='Detailed step-by-step tasks to perform')),
                ('safety_instructions', models.TextField(blank=True, default='', help_text='Safety precautions and PPE requirements')),
                ('tools_required', models.TextField(blank=True, default='', help_text='Tools and equipment needed')),
                ('spare_parts_list', models.TextField(blank=True, default='', help_text='List of typical spare parts that may be needed')),
                ('required_skill_level', models.CharField(blank=True, default='', help_text='Required skill level or certification', max_length=50)),
                ('minimum_technicians', models.PositiveIntegerField(default=1, help_text='Minimum number of technicians required')),
                ('estimated_duration_minutes', models.PositiveIntegerField(default=60, help_text='Estimated time to complete in minutes')),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], default='MEDIUM', help_text='Default priority for tasks generated from this plan', max_length=10)),
                ('frequency_type', models.CharField(choices=[('TIME_BASED', 'Time Based'), ('METER_BASED', 'Meter Based'), ('CONDITION_BASED', 'Condition Based')], default='TIME_BASED', help_text='How frequency is determined', max_length=20)),
                ('interval_days', models.PositiveIntegerField(blank=True, help_text='Interval in days for time-based PM', null=True)),
                ('interval_meter_value', models.DecimalField(blank=True, decimal_places=2, help_text='Meter reading interval for meter-based PM', max_digits=12, null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this plan is currently active')),
                ('generate_days_before', models.PositiveIntegerField(default=7, help_text='Generate task this many days before due date')),
                ('instruction_document_id', models.BigIntegerField(blank=True, help_text='Reference to Knowledge module instruction document', null=True)),
                ('applies_to_category', models.ForeignKey(blank=True, help_text='Apply to all assets in this category', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pm_plans', to='maintenance.assetcategory')),
                ('applies_to_specific_assets', models.ManyToManyField(blank=True, help_text='Apply to these specific assets', related_name='specific_pm_plans', to='maintenance.asset')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'PM Plan',
                'verbose_name_plural': 'PM Plans',
                'db_table': 'maintenance_pm_plan',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='PMSchedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('next_due_date', models.DateField(db_index=True, help_text='Next scheduled PM date')),
                ('last_completed_date', models.DateField(blank=True, help_text='Date of last completed PM', null=True)),
                ('next_due_meter_reading', models.DecimalField(blank=True, decimal_places=2, help_text='Meter reading when next PM is due', max_digits=12, null=True)),
                ('last_meter_reading_at_pm', models.DecimalField(blank=True, decimal_places=2, help_text='Meter reading at last PM', max_digits=12, null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Whether this schedule is active')),
                ('custom_interval_days', models.PositiveIntegerField(blank=True, help_text="Override the plan's interval for this specific asset", null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Notes about this specific schedule')),
                ('asset', models.ForeignKey(help_text='Asset this schedule is for', on_delete=django.db.models.deletion.CASCADE, related_name='pm_schedules', to='maintenance.asset')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('pm_plan', models.ForeignKey(help_text='PM plan this schedule follows', on_delete=django.db.models.deletion.CASCADE, related_name='schedules', to='maintenance.pmplan')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'PM Schedule',
                'verbose_name_plural': 'PM Schedules',
                'db_table': 'maintenance_pm_schedule',
                'ordering': ['next_due_date'],
            },
        ),
        migrations.CreateModel(
            name='PMTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('task_number', models.CharField(db_index=True, help_text='Unique task number (e.g., PMT-2025-0001)', max_length=50, unique=True)),
                ('status', models.CharField(choices=[('SCHEDULED', 'Scheduled'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled'), ('SKIPPED', 'Skipped')], db_index=True, default='SCHEDULED', help_text='Current task status', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], db_index=True, default='MEDIUM', help_text='Task priority', max_length=10)),
                ('scheduled_date', models.DateField(db_index=True, help_text='Date task is scheduled for')),
                ('due_date', models.DateField(blank=True, help_text='Due date (if different from scheduled)', null=True)),
                ('actual_start', models.DateTimeField(blank=True, help_text='When work actually started', null=True)),
                ('actual_end', models.DateTimeField(blank=True, help_text='When work was completed', null=True)),
                ('actual_duration_minutes', models.PositiveIntegerField(blank=True, help_text='Actual time spent in minutes', null=True)),
                ('performed_by_id', models.BigIntegerField(blank=True, help_text='HR Employee who performed the task', null=True)),
                ('performed_by_name', models.CharField(blank=True, default='', help_text='Name of person who performed task (denormalized)', max_length=200)),
                ('completion_notes', models.TextField(blank=True, default='', help_text='Notes about what was done')),
                ('issues_found', models.TextField(blank=True, default='', help_text='Any issues discovered during PM')),
                ('follow_up_required', models.BooleanField(default=False, help_text='Whether follow-up work is needed')),
                ('follow_up_notes', models.TextField(blank=True, default='', help_text='Details about required follow-up')),
                ('meter_reading_at_completion', models.DecimalField(blank=True, decimal_places=2, help_text='Meter reading when task was completed', max_digits=12, null=True)),
                ('cancellation_reason', models.TextField(blank=True, default='', help_text='Reason if task was cancelled or skipped')),
                ('assigned_to', models.ForeignKey(blank=True, help_text='User assigned to this task', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_pm_tasks', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('schedule', models.ForeignKey(help_text='PM schedule this task belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='maintenance.pmschedule')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'PM Task',
                'verbose_name_plural': 'PM Tasks',
                'db_table': 'maintenance_pm_task',
                'ordering': ['-scheduled_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductionImpact',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('batch_order_id', models.BigIntegerField(blank=True, db_index=True, help_text='Reference to production.BatchOrder ID', null=True)),
                ('batch_order_number', models.CharField(blank=True, default='', help_text='Batch/Order number (denormalized)', max_length=100)),
                ('job_card_id', models.BigIntegerField(blank=True, db_index=True, help_text='Reference to production.JobCard ID', null=True)),
                ('job_card_number', models.CharField(blank=True, default='', help_text='Job card number (denormalized)', max_length=100)),
                ('delay_minutes', models.PositiveIntegerField(default=0, help_text='Delay caused in minutes')),
                ('planned_completion', models.DateTimeField(blank=True, help_text='Original planned completion time', null=True)),
                ('actual_completion', models.DateTimeField(blank=True, help_text='Actual/revised completion time', null=True)),
                ('impact_description', models.TextField(blank=True, default='', help_text='Description of how production was impacted')),
                ('units_affected', models.PositiveIntegerField(default=0, help_text='Number of units/bits affected')),
                ('rework_required', models.BooleanField(default=False, help_text='Whether rework is required')),
                ('scrap_generated', models.BooleanField(default=False, help_text='Whether scrap was generated')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('downtime_event', models.ForeignKey(help_text='Downtime event that caused this impact', on_delete=django.db.models.deletion.CASCADE, related_name='production_impacts', to='maintenance.downtimeevent')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Production Impact',
                'verbose_name_plural': 'Production Impacts',
                'db_table': 'maintenance_production_impact',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LostSales',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('batch_order_id', models.BigIntegerField(blank=True, help_text='Reference to production.BatchOrder', null=True)),
                ('batch_order_number', models.CharField(blank=True, default='', help_text='Order number (denormalized)', max_length=100)),
                ('customer_name', models.CharField(blank=True, default='', help_text='Customer name', max_length=200)),
                ('customer_id', models.BigIntegerField(blank=True, help_text='Customer ID reference', null=True)),
                ('impact_type', models.CharField(choices=[('LOST', 'Lost Sale (Order Cancelled)'), ('DELAYED', 'Delayed Delivery'), ('PENALTY', 'Late Delivery Penalty'), ('REWORK', 'Rework Cost'), ('WARRANTY', 'Warranty Claim'), ('REPUTATION', 'Reputation Damage'), ('OTHER', 'Other Financial Impact')], db_index=True, help_text='Type of financial impact', max_length=20)),
                ('expected_delivery_date', models.DateField(blank=True, help_text='Original expected delivery date', null=True)),
                ('actual_delivery_date', models.DateField(blank=True, help_text='Actual/revised delivery date', null=True)),
                ('delay_days', models.PositiveIntegerField(default=0, help_text='Number of days delayed')),
                ('lost_or_delayed_revenue', models.DecimalField(decimal_places=2, default=0, help_text='Amount of lost or delayed revenue', max_digits=15)),
                ('currency', models.CharField(choices=[('SAR', 'Saudi Riyal'), ('USD', 'US Dollar'), ('EUR', 'Euro')], default='SAR', help_text='Currency of the amount', max_length=3)),
                ('is_confirmed', models.BooleanField(db_index=True, default=False, help_text='Whether this is a confirmed figure or estimate')),
                ('recovered_amount', models.DecimalField(decimal_places=2, default=0, help_text='Amount recovered (insurance, vendor penalty, etc.)', max_digits=15)),
                ('calculation_basis', models.TextField(blank=True, default='', help_text='How the amount was calculated')),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('approved_at', models.DateTimeField(blank=True, help_text='When approved', null=True)),
                ('approved_by', models.ForeignKey(blank=True, help_text='Manager who approved this estimate', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_lost_sales', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('downtime_event', models.ForeignKey(blank=True, help_text='Related downtime event', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lost_sales', to='maintenance.downtimeevent')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('production_impact', models.ForeignKey(blank=True, help_text='Related production impact', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lost_sales', to='maintenance.productionimpact')),
            ],
            options={
                'verbose_name': 'Lost Sales Record',
                'verbose_name_plural': 'Lost Sales Records',
                'db_table': 'maintenance_lost_sales',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WorkOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('wo_number', models.CharField(db_index=True, help_text='Unique work order number (e.g., WO-2025-0001)', max_length=50, unique=True)),
                ('wo_type', models.CharField(choices=[('CORRECTIVE', 'Corrective'), ('PREVENTIVE', 'Preventive'), ('EMERGENCY', 'Emergency'), ('IMPROVEMENT', 'Improvement'), ('INSPECTION', 'Inspection')], db_index=True, default='CORRECTIVE', help_text='Type of maintenance work', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], db_index=True, default='MEDIUM', help_text='Work order priority', max_length=10)),
                ('status', models.CharField(choices=[('PLANNED', 'Planned'), ('ASSIGNED', 'Assigned'), ('IN_PROGRESS', 'In Progress'), ('WAITING_PARTS', 'Waiting for Parts'), ('WAITING_VENDOR', 'Waiting for Vendor'), ('ON_HOLD', 'On Hold'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], db_index=True, default='PLANNED', help_text='Current status', max_length=20)),
                ('title', models.CharField(help_text='Brief title of the work', max_length=200)),
                ('problem_description', models.TextField(help_text='Detailed description of the problem/work needed')),
                ('planned_start', models.DateTimeField(blank=True, help_text='Planned start date/time', null=True)),
                ('planned_end', models.DateTimeField(blank=True, help_text='Planned completion date/time', null=True)),
                ('estimated_duration_minutes', models.PositiveIntegerField(blank=True, help_text='Estimated time to complete (minutes)', null=True)),
                ('actual_start', models.DateTimeField(blank=True, help_text='When work actually started', null=True)),
                ('actual_end', models.DateTimeField(blank=True, help_text='When work was completed', null=True)),
                ('actual_duration_minutes', models.PositiveIntegerField(blank=True, help_text='Actual time spent (minutes)', null=True)),
                ('assigned_at', models.DateTimeField(blank=True, help_text='When the WO was assigned', null=True)),
                ('team_member_ids', models.TextField(blank=True, default='', help_text='IDs of additional team members (comma-separated)')),
                ('team_member_names', models.TextField(blank=True, default='', help_text='Names of team members (denormalized)')),
                ('root_cause_category', models.CharField(blank=True, choices=[('MECHANICAL', 'Mechanical Failure'), ('ELECTRICAL', 'Electrical Failure'), ('HYDRAULIC', 'Hydraulic Issue'), ('PNEUMATIC', 'Pneumatic Issue'), ('CONTROL_SOFTWARE', 'Control/Software Issue'), ('WEAR', 'Normal Wear'), ('MISUSE', 'Operator Misuse'), ('SAFETY_EVENT', 'Safety Event'), ('UTILITY', 'Utility (Power/Air/Water)'), ('CALIBRATION', 'Calibration Issue'), ('CONTAMINATION', 'Contamination'), ('EXTERNAL', 'External Factor'), ('UNKNOWN', 'Unknown'), ('OTHER', 'Other')], default='', help_text='Primary root cause category', max_length=20)),
                ('root_cause_detail', models.TextField(blank=True, default='', help_text='Detailed root cause analysis')),
                ('solution_summary', models.TextField(blank=True, default='', help_text='Summary of solution implemented')),
                ('actions_taken', models.TextField(blank=True, default='', help_text='Detailed actions taken')),
                ('follow_up_required', models.BooleanField(default=False, help_text='Whether follow-up work is needed')),
                ('follow_up_notes', models.TextField(blank=True, default='', help_text='Details about required follow-up')),
                ('source_pm_task_id', models.BigIntegerField(blank=True, help_text='PM Task ID if created from PM', null=True)),
                ('labor_cost', models.DecimalField(decimal_places=2, default=0, help_text='Labor cost', max_digits=12)),
                ('parts_cost', models.DecimalField(decimal_places=2, default=0, help_text='Parts and materials cost', max_digits=12)),
                ('external_cost', models.DecimalField(decimal_places=2, default=0, help_text='External services cost (vendor, contractor)', max_digits=12)),
                ('waiting_reason', models.TextField(blank=True, default='', help_text='Reason for waiting (parts, vendor, etc.)')),
                ('waiting_since', models.DateTimeField(blank=True, help_text='When waiting status started', null=True)),
                ('cancellation_reason', models.TextField(blank=True, default='', help_text='Reason for cancellation')),
                ('asset', models.ForeignKey(help_text='Asset being worked on', on_delete=django.db.models.deletion.PROTECT, related_name='work_orders', to='maintenance.asset')),
                ('assigned_to', models.ForeignKey(blank=True, help_text='Primary person assigned', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_work_orders', to=settings.AUTH_USER_MODEL)),
                ('cancelled_by', models.ForeignKey(blank=True, help_text='Who cancelled the WO', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cancelled_work_orders', to=settings.AUTH_USER_MODEL)),
                ('completed_by', models.ForeignKey(blank=True, help_text='Who marked as complete', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='completed_work_orders', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('follow_up_wo', models.ForeignKey(blank=True, help_text='Follow-up work order created', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='parent_wo', to='maintenance.workorder')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Work Order',
                'verbose_name_plural': 'Work Orders',
                'db_table': 'maintenance_work_order',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PartsUsage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('item_id', models.BigIntegerField(blank=True, db_index=True, help_text='Reference to inventory.Item ID', null=True)),
                ('item_sku', models.CharField(blank=True, default='', help_text='Item SKU (denormalized for display)', max_length=100)),
                ('item_name', models.CharField(help_text='Item name/description', max_length=200)),
                ('quantity_used', models.DecimalField(decimal_places=4, help_text='Quantity used', max_digits=12)),
                ('unit_of_measure', models.CharField(default='EA', help_text='Unit of measure (EA, L, KG, M, etc.)', max_length=50)),
                ('transaction_type', models.CharField(choices=[('USED', 'Used/Consumed'), ('RETURNED', 'Returned to Stock'), ('DAMAGED', 'Damaged During Work')], default='USED', help_text='Type of transaction', max_length=20)),
                ('location_id', models.BigIntegerField(blank=True, help_text='Reference to inventory.Location ID', null=True)),
                ('location_code', models.CharField(blank=True, default='', help_text='Location code (denormalized)', max_length=100)),
                ('unit_cost', models.DecimalField(decimal_places=2, default=0, help_text='Cost per unit', max_digits=12)),
                ('total_cost', models.DecimalField(decimal_places=2, default=0, help_text='Total cost (qty * unit cost)', max_digits=12)),
                ('inventory_transaction_id', models.BigIntegerField(blank=True, help_text='Reference to inventory transaction created', null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Notes about this part usage')),
                ('usage_date', models.DateTimeField(auto_now_add=True, help_text='When this usage was recorded')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('used_by', models.ForeignKey(blank=True, help_text='Who recorded this usage', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='parts_usage_recorded', to=settings.AUTH_USER_MODEL)),
                ('work_order', models.ForeignKey(help_text='Work order that used these parts', on_delete=django.db.models.deletion.CASCADE, related_name='parts_used', to='maintenance.workorder')),
            ],
            options={
                'verbose_name': 'Parts Usage',
                'verbose_name_plural': 'Parts Usage Records',
                'db_table': 'maintenance_parts_usage',
                'ordering': ['-usage_date'],
            },
        ),
        migrations.CreateModel(
            name='MaintenanceRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('request_number', models.CharField(db_index=True, help_text='Unique request number (e.g., REQ-2025-0001)', max_length=50, unique=True)),
                ('title', models.CharField(help_text='Brief title of the issue', max_length=200)),
                ('description', models.TextField(help_text='Detailed description of the problem')),
                ('symptoms', models.TextField(blank=True, default='', help_text='Observable symptoms (noise, smell, vibration, etc.)')),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical - Production Stopped')], db_index=True, default='MEDIUM', help_text='Urgency of the request', max_length=10)),
                ('request_date', models.DateTimeField(auto_now_add=True, help_text='When request was submitted')),
                ('requester_phone', models.CharField(blank=True, default='', help_text='Contact phone for requester', max_length=50)),
                ('requester_location', models.CharField(blank=True, default='', help_text='Location of the requester', max_length=200)),
                ('status', models.CharField(choices=[('NEW', 'New'), ('REVIEWED', 'Reviewed'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected'), ('CONVERTED', 'Converted to Work Order')], db_index=True, default='NEW', help_text='Current status of the request', max_length=20)),
                ('reviewed_at', models.DateTimeField(blank=True, help_text='When request was reviewed', null=True)),
                ('rejection_reason', models.TextField(blank=True, default='', help_text='Reason for rejection (if rejected)')),
                ('has_attachments', models.BooleanField(default=False, help_text='Whether this request has attachments')),
                ('is_production_stopped', models.BooleanField(default=False, help_text='Is production currently stopped due to this issue?')),
                ('estimated_downtime_minutes', models.PositiveIntegerField(blank=True, help_text='Estimated downtime if not fixed', null=True)),
                ('asset', models.ForeignKey(help_text='Asset requiring maintenance', on_delete=django.db.models.deletion.PROTECT, related_name='maintenance_requests', to='maintenance.asset')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('requested_by', models.ForeignKey(help_text='User who created this request', on_delete=django.db.models.deletion.PROTECT, related_name='maintenance_requests_created', to=settings.AUTH_USER_MODEL)),
                ('reviewed_by', models.ForeignKey(blank=True, help_text='Who reviewed this request', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='requests_reviewed', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('work_order', models.OneToOneField(blank=True, help_text='Work order created from this request', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='source_request', to='maintenance.workorder')),
            ],
            options={
                'verbose_name': 'Maintenance Request',
                'verbose_name_plural': 'Maintenance Requests',
                'db_table': 'maintenance_request',
                'ordering': ['-request_date'],
            },
        ),
        migrations.AddField(
            model_name='downtimeevent',
            name='work_order',
            field=models.ForeignKey(blank=True, help_text='Associated work order', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='downtime_events', to='maintenance.workorder'),
        ),
        migrations.CreateModel(
            name='WorkOrderAttachment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(help_text='Attachment title', max_length=200)),
                ('attachment_type', models.CharField(choices=[('PHOTO', 'Photo'), ('REPORT', 'Report'), ('INVOICE', 'Invoice'), ('MANUAL', 'Manual'), ('OTHER', 'Other')], default='OTHER', help_text='Type of attachment', max_length=20)),
                ('file', models.FileField(help_text='Uploaded file', upload_to='maintenance/wo_attachments/%Y/%m/')),
                ('description', models.TextField(blank=True, default='', help_text='Description of the attachment')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('work_order', models.ForeignKey(help_text='Work order this file belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='attachments', to='maintenance.workorder')),
            ],
            options={
                'verbose_name': 'Work Order Attachment',
                'verbose_name_plural': 'Work Order Attachments',
                'db_table': 'maintenance_wo_attachment',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='assetcategory',
            index=models.Index(fields=['code'], name='ix_maint_cat_code'),
        ),
        migrations.AddIndex(
            model_name='assetcategory',
            index=models.Index(fields=['parent'], name='ix_maint_cat_parent'),
        ),
        migrations.AddIndex(
            model_name='assetdocument',
            index=models.Index(fields=['asset', 'doc_type'], name='ix_maint_doc_asset_type'),
        ),
        migrations.AddIndex(
            model_name='assetdocument',
            index=models.Index(fields=['is_current_version'], name='ix_maint_doc_current'),
        ),
        migrations.AddIndex(
            model_name='assetlocation',
            index=models.Index(fields=['code'], name='ix_maint_loc_code'),
        ),
        migrations.AddIndex(
            model_name='assetlocation',
            index=models.Index(fields=['parent'], name='ix_maint_loc_parent'),
        ),
        migrations.AddIndex(
            model_name='assetlocation',
            index=models.Index(fields=['is_active'], name='ix_maint_loc_active'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['asset_code'], name='ix_maint_asset_code'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['status', 'criticality'], name='ix_maint_asset_stat_crit'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['category', 'location'], name='ix_maint_asset_cat_loc'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['qr_token'], name='ix_maint_asset_qr'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['is_critical_production_asset'], name='ix_maint_asset_critical'),
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['next_pm_due_date'], name='ix_maint_asset_next_pm'),
        ),
        migrations.AddIndex(
            model_name='pmplan',
            index=models.Index(fields=['code'], name='ix_maint_pmplan_code'),
        ),
        migrations.AddIndex(
            model_name='pmplan',
            index=models.Index(fields=['is_active'], name='ix_maint_pmplan_active'),
        ),
        migrations.AddIndex(
            model_name='pmplan',
            index=models.Index(fields=['frequency_type'], name='ix_maint_pmplan_freq'),
        ),
        migrations.AddIndex(
            model_name='pmschedule',
            index=models.Index(fields=['next_due_date'], name='ix_maint_pmsched_due'),
        ),
        migrations.AddIndex(
            model_name='pmschedule',
            index=models.Index(fields=['asset', 'is_active'], name='ix_maint_pmsched_asset'),
        ),
        migrations.AddIndex(
            model_name='pmschedule',
            index=models.Index(fields=['is_active', 'next_due_date'], name='ix_maint_pmsched_act_due'),
        ),
        migrations.AlterUniqueTogether(
            name='pmschedule',
            unique_together={('asset', 'pm_plan')},
        ),
        migrations.AddIndex(
            model_name='pmtask',
            index=models.Index(fields=['task_number'], name='ix_maint_pmtask_num'),
        ),
        migrations.AddIndex(
            model_name='pmtask',
            index=models.Index(fields=['status', 'scheduled_date'], name='ix_maint_pmtask_stat_sched'),
        ),
        migrations.AddIndex(
            model_name='pmtask',
            index=models.Index(fields=['status', 'priority'], name='ix_maint_pmtask_stat_prio'),
        ),
        migrations.AddIndex(
            model_name='pmtask',
            index=models.Index(fields=['assigned_to', 'status'], name='ix_maint_pmtask_assigned'),
        ),
        migrations.AddIndex(
            model_name='productionimpact',
            index=models.Index(fields=['downtime_event'], name='ix_maint_pi_dt_event'),
        ),
        migrations.AddIndex(
            model_name='productionimpact',
            index=models.Index(fields=['batch_order_id'], name='ix_maint_pi_batch'),
        ),
        migrations.AddIndex(
            model_name='productionimpact',
            index=models.Index(fields=['job_card_id'], name='ix_maint_pi_job'),
        ),
        migrations.AddIndex(
            model_name='lostsales',
            index=models.Index(fields=['impact_type'], name='ix_maint_ls_type'),
        ),
        migrations.AddIndex(
            model_name='lostsales',
            index=models.Index(fields=['is_confirmed'], name='ix_maint_ls_confirmed'),
        ),
        migrations.AddIndex(
            model_name='lostsales',
            index=models.Index(fields=['downtime_event'], name='ix_maint_ls_dt_event'),
        ),
        migrations.AddIndex(
            model_name='lostsales',
            index=models.Index(fields=['batch_order_id'], name='ix_maint_ls_batch'),
        ),
        migrations.AddIndex(
            model_name='workorder',
            index=models.Index(fields=['wo_number'], name='ix_maint_wo_num'),
        ),
        migrations.AddIndex(
            model_name='workorder',
            index=models.Index(fields=['status', 'priority'], name='ix_maint_wo_stat_prio'),
        ),
        migrations.AddIndex(
            model_name='workorder',
            index=models.Index(fields=['asset', 'status'], name='ix_maint_wo_asset_stat'),
        ),
        migrations.AddIndex(
            model_name='workorder',
            index=models.Index(fields=['wo_type', 'status'], name='ix_maint_wo_type_stat'),
        ),
        migrations.AddIndex(
            model_name='workorder',
            index=models.Index(fields=['assigned_to', 'status'], name='ix_maint_wo_assigned'),
        ),
        migrations.AddIndex(
            model_name='workorder',
            index=models.Index(fields=['planned_start'], name='ix_maint_wo_planned'),
        ),
        migrations.AddIndex(
            model_name='partsusage',
            index=models.Index(fields=['work_order'], name='ix_maint_parts_wo'),
        ),
        migrations.AddIndex(
            model_name='partsusage',
            index=models.Index(fields=['item_id'], name='ix_maint_parts_item'),
        ),
        migrations.AddIndex(
            model_name='partsusage',
            index=models.Index(fields=['usage_date'], name='ix_maint_parts_date'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['request_number'], name='ix_maint_req_num'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['status', 'priority'], name='ix_maint_req_stat_prio'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['asset', 'status'], name='ix_maint_req_asset_stat'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['requested_by', 'status'], name='ix_maint_req_user_stat'),
        ),
        migrations.AddIndex(
            model_name='maintenancerequest',
            index=models.Index(fields=['is_production_stopped'], name='ix_maint_req_prod_stop'),
        ),
        migrations.AddIndex(
            model_name='downtimeevent',
            index=models.Index(fields=['asset', 'start_time'], name='ix_maint_dt_asset_start'),
        ),
        migrations.AddIndex(
            model_name='downtimeevent',
            index=models.Index(fields=['downtime_type', 'reason_category'], name='ix_maint_dt_type_reason'),
        ),
        migrations.AddIndex(
            model_name='downtimeevent',
            index=models.Index(fields=['start_time', 'end_time'], name='ix_maint_dt_times'),
        ),
        migrations.AddIndex(
            model_name='downtimeevent',
            index=models.Index(fields=['production_affected'], name='ix_maint_dt_prod_aff'),
        ),
        migrations.AddIndex(
            model_name='downtimeevent',
            index=models.Index(fields=['is_verified'], name='ix_maint_dt_verified'),
        ),
        migrations.AddIndex(
            model_name='workorderattachment',
            index=models.Index(fields=['work_order', 'attachment_type'], name='ix_maint_woatt_wo_type'),
        ),
    ]
