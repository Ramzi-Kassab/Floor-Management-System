# Generated by Django 5.2.6 on 2025-11-19 04:02

import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('analytics', '0001_initial'),
        ('contenttypes', '0002_remove_content_type_name'),
        ('inventory', '0004_rollerconebearing_rollerconebittype_rollerconeseal_and_more'),
        ('production', '0003_quotation_quotationline_quotation_ix_quot_number_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AutomationRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('name', models.CharField(db_index=True, help_text='Unique rule name', max_length=200, unique=True)),
                ('description', models.TextField(help_text='What this rule does and why')),
                ('rule_code', models.CharField(db_index=True, help_text='Unique code for programmatic reference', max_length=50, unique=True)),
                ('rule_scope', models.CharField(choices=[('INVENTORY', 'Inventory'), ('PRODUCTION', 'Production'), ('QUALITY', 'Quality'), ('PLANNING', 'Planning'), ('WORKFLOW', 'Workflow'), ('REQUIREMENTS', 'Requirements'), ('MAINTENANCE', 'Maintenance'), ('HR', 'HR'), ('FINANCE', 'Finance'), ('GENERIC', 'Generic / Cross-Domain')], db_index=True, help_text='Domain this rule applies to', max_length=20)),
                ('target_model', models.CharField(blank=True, default='', help_text="Django model path (e.g., 'production.JobCard', 'inventory.CutterDetail')", max_length=100)),
                ('condition_definition', models.JSONField(help_text='\n        JSON structure defining the condition.\n\n        Examples:\n\n        Simple threshold:\n        {\n            "type": "threshold",\n            "field": "quantity_on_hand",\n            "operator": "<",\n            "value": 10\n        }\n\n        Time-based:\n        {\n            "type": "age",\n            "field": "entered_at",\n            "operator": ">",\n            "value": 24,\n            "unit": "hours"\n        }\n\n        Compound (AND/OR):\n        {\n            "type": "compound",\n            "operator": "AND",\n            "conditions": [\n                {"type": "threshold", "field": "stock", "operator": "<", "value": 10},\n                {"type": "age", "field": "last_usage", "operator": ">", "value": 90, "unit": "days"}\n            ]\n        }\n\n        Queryset count:\n        {\n            "type": "queryset_count",\n            "queryset": "CutterDetail.objects.filter(category=\'ENO_RECLAIMED\')",\n            "operator": ">",\n            "value": 50\n        }\n\n        Field comparison:\n        {\n            "type": "field_comparison",\n            "field1": "actual_quantity",\n            "operator": "<",\n            "field2": "required_quantity"\n        }\n\n        Custom eval (advanced - use with caution):\n        {\n            "type": "custom",\n            "expression": "obj.time_in_stage_hours > (obj.stage.average_duration_hours * 1.5)"\n        }\n        ')),
                ('action_type', models.CharField(choices=[('LOG_ONLY', 'Log Only'), ('CREATE_ALERT', 'Create Alert'), ('SEND_NOTIFICATION', 'Send Notification'), ('UPDATE_FIELD', 'Update Field'), ('CREATE_TASK', 'Create Task'), ('RUN_SCRIPT', 'Run Custom Script'), ('WEBHOOK', 'Call Webhook')], default='LOG_ONLY', help_text='What to do when rule fires', max_length=20)),
                ('action_config', models.JSONField(blank=True, default=dict, help_text='\n        Action-specific configuration.\n\n        For SEND_NOTIFICATION:\n        {\n            "recipients": ["user@example.com"],\n            "template": "notification_template_name",\n            "channels": ["email", "in_app"]\n        }\n\n        For UPDATE_FIELD:\n        {\n            "field": "status",\n            "value": "FLAGGED",\n            "message": "Flagged by rule {rule_name}"\n        }\n\n        For CREATE_ALERT:\n        {\n            "alert_type": "BOTTLENECK",\n            "priority": "HIGH",\n            "auto_assign_to": "manager"\n        }\n        ')),
                ('severity', models.CharField(choices=[('INFO', 'Info'), ('WARNING', 'Warning'), ('CRITICAL', 'Critical')], db_index=True, default='WARNING', help_text='Severity level', max_length=10)),
                ('trigger_mode', models.CharField(choices=[('SCHEDULED', 'Scheduled (Cron)'), ('EVENT', 'Event-Driven'), ('MANUAL', 'Manual Only')], default='SCHEDULED', help_text='How this rule is triggered', max_length=20)),
                ('schedule_cron', models.CharField(blank=True, default='', help_text="Cron expression for scheduled rules (e.g., '0 */6 * * *' for every 6 hours)", max_length=100)),
                ('event_trigger', models.CharField(blank=True, default='', help_text="Event name that triggers this rule (e.g., 'job_card_created', 'inventory_updated')", max_length=100)),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Rule is active and will be evaluated')),
                ('is_approved', models.BooleanField(db_index=True, default=False, help_text='Rule has been reviewed and approved')),
                ('approved_at', models.DateTimeField(blank=True, help_text='When rule was approved', null=True)),
                ('last_run_at', models.DateTimeField(blank=True, help_text='Last time rule was evaluated', null=True)),
                ('last_status', models.CharField(blank=True, default='', help_text='Status of last execution (success, error, etc.)', max_length=50)),
                ('last_error', models.TextField(blank=True, default='', help_text='Error message from last failed execution')),
                ('total_executions', models.IntegerField(default=0, help_text='Total number of times evaluated')),
                ('total_triggers', models.IntegerField(default=0, help_text='Total number of times triggered (condition was true)')),
                ('min_interval_seconds', models.IntegerField(default=0, help_text='Minimum seconds between executions (0 = no limit)')),
                ('max_triggers_per_day', models.IntegerField(blank=True, help_text='Max triggers per day (null = no limit)', null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes about this rule')),
                ('tags', models.JSONField(blank=True, default=list, help_text='Tags for categorization')),
                ('approved_by', models.ForeignKey(blank=True, help_text='User who approved this rule', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_rules', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Automation Rule',
                'verbose_name_plural': 'Automation Rules',
                'db_table': 'analytics_automation_rule',
                'ordering': ['rule_scope', 'name'],
            },
        ),
        migrations.CreateModel(
            name='AutomationRuleExecution',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('executed_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='When rule was evaluated')),
                ('was_triggered', models.BooleanField(db_index=True, default=False, help_text='Did the condition evaluate to true?')),
                ('object_id', models.PositiveIntegerField(blank=True, help_text='ID of target object', null=True)),
                ('context_data', models.JSONField(default=dict, help_text='\n        Context data that explains why rule fired (or didn\'t).\n\n        Examples:\n        {\n            "current_stock": 5,\n            "threshold": 10,\n            "difference": -5,\n            "evaluated_field": "quantity_on_hand"\n        }\n\n        {\n            "time_in_stage_hours": 48.5,\n            "average_duration_hours": 24.0,\n            "ratio": 2.02,\n            "stage": "EVAL_QUEUE"\n        }\n        ')),
                ('comment', models.TextField(blank=True, default='', help_text='Human-readable explanation of what happened')),
                ('action_executed', models.BooleanField(default=False, help_text='Was the action executed?')),
                ('action_result', models.JSONField(blank=True, default=dict, help_text='Result of action execution')),
                ('action_error', models.TextField(blank=True, default='', help_text='Error during action execution')),
                ('execution_duration_ms', models.IntegerField(blank=True, help_text='How long execution took (ms)', null=True)),
                ('created_by_system', models.BooleanField(default=True, help_text='Created automatically by system (vs manual test)')),
                ('content_type', models.ForeignKey(blank=True, help_text='Type of target object', null=True, on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('rule', models.ForeignKey(help_text='Rule that was executed', on_delete=django.db.models.deletion.CASCADE, related_name='executions', to='analytics.automationrule')),
            ],
            options={
                'verbose_name': 'Rule Execution',
                'verbose_name_plural': 'Rule Executions',
                'db_table': 'analytics_automation_rule_execution',
                'ordering': ['-executed_at'],
            },
        ),
        migrations.CreateModel(
            name='EventSummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period_type', models.CharField(choices=[('HOUR', 'Hourly'), ('DAY', 'Daily'), ('WEEK', 'Weekly'), ('MONTH', 'Monthly')], db_index=True, max_length=10)),
                ('period_start', models.DateTimeField(db_index=True, help_text='Start of period')),
                ('period_end', models.DateTimeField(help_text='End of period')),
                ('event_type', models.CharField(blank=True, default='', help_text='Event type (empty = all types)', max_length=20)),
                ('view_name', models.CharField(blank=True, default='', help_text='View name (empty = all views)', max_length=200)),
                ('event_category', models.CharField(blank=True, default='', help_text='Category (empty = all categories)', max_length=50)),
                ('event_count', models.IntegerField(default=0, help_text='Number of events in this period')),
                ('unique_users', models.IntegerField(default=0, help_text='Number of unique users')),
                ('avg_duration_ms', models.FloatField(blank=True, help_text='Average request duration', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(blank=True, help_text='User (null = all users)', null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Event Summary',
                'verbose_name_plural': 'Event Summaries',
                'db_table': 'analytics_event_summary',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='InformationRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('requester_name', models.CharField(blank=True, default='', help_text='Name of requester (for external users)', max_length=200)),
                ('requester_email', models.EmailField(blank=True, default='', help_text='Email of requester', max_length=254)),
                ('requester_role', models.CharField(blank=True, default='', help_text='Role/department of requester', max_length=100)),
                ('channel', models.CharField(choices=[('EMAIL', 'Email'), ('WHATSAPP', 'WhatsApp'), ('PHONE', 'Phone Call'), ('VERBAL', 'Verbal / In Person'), ('TEAMS', 'Microsoft Teams'), ('SLACK', 'Slack'), ('OTHER', 'Other')], db_index=True, help_text='How the request came in', max_length=20)),
                ('request_datetime', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='When the request was made')),
                ('summary', models.CharField(db_index=True, help_text='Short summary of what was requested', max_length=500)),
                ('details', models.TextField(blank=True, default='', help_text='Full details of the request')),
                ('request_category', models.CharField(choices=[('STATUS', 'Status Inquiry'), ('REPORT', 'Report Request'), ('STOCK', 'Stock / Inventory Query'), ('PLANNING', 'Planning / Schedule'), ('QUALITY', 'Quality / Inspection'), ('FINANCE', 'Financial / Quotation'), ('TECHNICAL', 'Technical Specs / Details'), ('DOCUMENT', 'Document Request'), ('APPROVAL', 'Approval Request'), ('OTHER', 'Other')], db_index=True, help_text='Category of request', max_length=20)),
                ('related_customer', models.CharField(blank=True, default='', help_text='Related customer name', max_length=200)),
                ('is_repeated', models.BooleanField(db_index=True, default=False, help_text='Is this a repeated/recurring request?')),
                ('repeat_count', models.IntegerField(default=1, help_text='How many times this same request has been made')),
                ('status', models.CharField(choices=[('OPEN', 'Open (Not Covered)'), ('COVERED', 'Covered by System'), ('IN_PROGRESS', 'Feature In Progress'), ('WONT_FIX', "Won't Implement"), ('DUPLICATE', 'Duplicate Request')], db_index=True, default='OPEN', help_text='Whether this is now covered by the system', max_length=20)),
                ('is_now_covered_by_system', models.BooleanField(db_index=True, default=False, help_text='Quick flag: Is this now available in the web app?')),
                ('covered_by_view_name', models.CharField(blank=True, default='', help_text='View/page name that now covers this request', max_length=200)),
                ('covered_by_url', models.CharField(blank=True, default='', help_text='URL of page/report that answers this request', max_length=500)),
                ('covered_since', models.DateTimeField(blank=True, help_text='When this was marked as covered', null=True)),
                ('response_time_minutes', models.IntegerField(blank=True, help_text='How long it took to respond (minutes)', null=True)),
                ('response_notes', models.TextField(blank=True, default='', help_text='Notes on how we responded')),
                ('priority', models.IntegerField(default=50, help_text='Priority score (higher = more important to implement)')),
                ('tags', models.JSONField(blank=True, default=list, help_text='Tags for flexible categorization')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('related_job_card', models.ForeignKey(blank=True, help_text='Related job card (if applicable)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='information_requests', to='production.jobcard')),
                ('related_serial_unit', models.ForeignKey(blank=True, help_text='Related serial unit (if applicable)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='information_requests', to='inventory.serialunit')),
                ('requester', models.ForeignKey(blank=True, help_text='User who made the request (if known)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='information_requests', to=settings.AUTH_USER_MODEL)),
                ('similar_requests', models.ManyToManyField(blank=True, help_text='Link to similar/duplicate requests', related_name='similar_to', to='analytics.informationrequest')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Information Request',
                'verbose_name_plural': 'Information Requests',
                'db_table': 'analytics_information_request',
                'ordering': ['-request_datetime'],
            },
        ),
        migrations.CreateModel(
            name='RequestTrend',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period_type', models.CharField(choices=[('DAY', 'Daily'), ('WEEK', 'Weekly'), ('MONTH', 'Monthly')], db_index=True, max_length=10)),
                ('period_start', models.DateTimeField(db_index=True)),
                ('period_end', models.DateTimeField()),
                ('request_category', models.CharField(blank=True, default='', help_text='Category (empty = all)', max_length=20)),
                ('total_requests', models.IntegerField(default=0, help_text='Total requests in period')),
                ('covered_requests', models.IntegerField(default=0, help_text='Requests marked as covered')),
                ('open_requests', models.IntegerField(default=0, help_text='Requests still open')),
                ('repeated_requests', models.IntegerField(default=0, help_text='Repeated requests')),
                ('avg_response_time_minutes', models.FloatField(blank=True, help_text='Average response time', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Request Trend',
                'verbose_name_plural': 'Request Trends',
                'db_table': 'analytics_request_trend',
                'ordering': ['-period_start'],
                'indexes': [models.Index(fields=['period_type', 'period_start'], name='ix_reqtrend_period'), models.Index(fields=['request_category', 'period_start'], name='ix_reqtrend_cat')],
                'unique_together': {('period_type', 'period_start', 'request_category')},
            },
        ),
        migrations.CreateModel(
            name='RuleTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('template_name', models.CharField(help_text='Name of template', max_length=200, unique=True)),
                ('description', models.TextField(help_text='What this template does')),
                ('rule_scope', models.CharField(choices=[('INVENTORY', 'Inventory'), ('PRODUCTION', 'Production'), ('QUALITY', 'Quality'), ('PLANNING', 'Planning'), ('WORKFLOW', 'Workflow'), ('REQUIREMENTS', 'Requirements'), ('MAINTENANCE', 'Maintenance'), ('HR', 'HR'), ('FINANCE', 'Finance'), ('GENERIC', 'Generic / Cross-Domain')], help_text='Domain', max_length=20)),
                ('template_definition', models.JSONField(help_text='\n        Template structure with placeholders.\n\n        Example:\n        {\n            "name": "Stock Alert: {item_name}",\n            "target_model": "inventory.Item",\n            "condition_definition": {\n                "type": "threshold",\n                "field": "quantity_on_hand",\n                "operator": "<",\n                "value": "{threshold}"\n            },\n            "parameters": {\n                "item_name": {"type": "string", "required": true},\n                "threshold": {"type": "integer", "default": 10, "required": true}\n            }\n        }\n        ')),
                ('usage_count', models.IntegerField(default=0, help_text='How many times this template has been used')),
                ('is_active', models.BooleanField(default=True, help_text='Template is available for use')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Rule Template',
                'verbose_name_plural': 'Rule Templates',
                'db_table': 'analytics_rule_template',
                'ordering': ['rule_scope', 'template_name'],
            },
        ),
        migrations.CreateModel(
            name='AppEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('event_type', models.CharField(choices=[('PAGE_VIEW', 'Page View'), ('REPORT_VIEW', 'Report View'), ('ACTION', 'Action'), ('EXPORT', 'Export'), ('SEARCH', 'Search'), ('FILTER', 'Filter'), ('CREATE', 'Create Record'), ('UPDATE', 'Update Record'), ('DELETE', 'Delete Record'), ('LOGIN', 'Login'), ('LOGOUT', 'Logout'), ('ERROR', 'Error'), ('API_CALL', 'API Call'), ('CUSTOM', 'Custom Event')], db_index=True, help_text='Type of event', max_length=20)),
                ('view_name', models.CharField(db_index=True, help_text="Logical view/feature name (e.g., 'job_card_detail', 'cutter_inventory_report')", max_length=200)),
                ('event_category', models.CharField(blank=True, db_index=True, default='', help_text='Category: Inventory, Production, Planning, Quality, HR, etc.', max_length=50)),
                ('http_path', models.CharField(help_text='URL path', max_length=500)),
                ('http_method', models.CharField(default='GET', help_text='HTTP method (GET, POST, etc.)', max_length=10)),
                ('query_string', models.TextField(blank=True, default='', help_text='Query string parameters')),
                ('timestamp', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='When event occurred')),
                ('duration_ms', models.IntegerField(blank=True, help_text='Request duration in milliseconds', null=True)),
                ('client_ip', models.GenericIPAddressField(blank=True, help_text='Client IP address', null=True)),
                ('user_agent', models.CharField(blank=True, default='', help_text='User agent string (truncated)', max_length=500)),
                ('object_id', models.PositiveIntegerField(blank=True, help_text='ID of related object', null=True)),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='\n        Additional event context.\n        Examples:\n        - Search terms\n        - Filter criteria\n        - Export format\n        - Error details\n        - Custom event data\n        ')),
                ('session_key', models.CharField(blank=True, db_index=True, default='', help_text='Session key for grouping events', max_length=100)),
                ('content_type', models.ForeignKey(blank=True, help_text='Type of related object', null=True, on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, help_text='User who triggered this event (null for anonymous)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='app_events', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'App Event',
                'verbose_name_plural': 'App Events',
                'db_table': 'analytics_app_event',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['user', 'timestamp'], name='ix_event_user_time'), models.Index(fields=['event_type', 'timestamp'], name='ix_event_type_time'), models.Index(fields=['view_name', 'timestamp'], name='ix_event_view_time'), models.Index(fields=['event_category', 'timestamp'], name='ix_event_cat_time'), models.Index(fields=['timestamp'], name='ix_event_timestamp')],
            },
        ),
        migrations.AddIndex(
            model_name='automationrule',
            index=models.Index(fields=['rule_scope', 'is_active'], name='ix_rule_scope_active'),
        ),
        migrations.AddIndex(
            model_name='automationrule',
            index=models.Index(fields=['is_active'], name='ix_rule_active'),
        ),
        migrations.AddIndex(
            model_name='automationrule',
            index=models.Index(fields=['trigger_mode'], name='ix_rule_trigger'),
        ),
        migrations.AddIndex(
            model_name='automationruleexecution',
            index=models.Index(fields=['rule', 'executed_at'], name='ix_exec_rule_time'),
        ),
        migrations.AddIndex(
            model_name='automationruleexecution',
            index=models.Index(fields=['was_triggered', 'executed_at'], name='ix_exec_trig_time'),
        ),
        migrations.AddIndex(
            model_name='automationruleexecution',
            index=models.Index(fields=['executed_at'], name='ix_exec_time'),
        ),
        migrations.AddIndex(
            model_name='eventsummary',
            index=models.Index(fields=['period_type', 'period_start'], name='ix_summary_period'),
        ),
        migrations.AddIndex(
            model_name='eventsummary',
            index=models.Index(fields=['view_name', 'period_start'], name='ix_summary_view'),
        ),
        migrations.AddIndex(
            model_name='eventsummary',
            index=models.Index(fields=['event_category', 'period_start'], name='ix_summary_cat'),
        ),
        migrations.AlterUniqueTogether(
            name='eventsummary',
            unique_together={('period_type', 'period_start', 'event_type', 'view_name', 'event_category', 'user')},
        ),
        migrations.AddIndex(
            model_name='informationrequest',
            index=models.Index(fields=['request_datetime'], name='ix_inforeq_date'),
        ),
        migrations.AddIndex(
            model_name='informationrequest',
            index=models.Index(fields=['status'], name='ix_inforeq_status'),
        ),
        migrations.AddIndex(
            model_name='informationrequest',
            index=models.Index(fields=['request_category'], name='ix_inforeq_cat'),
        ),
        migrations.AddIndex(
            model_name='informationrequest',
            index=models.Index(fields=['channel'], name='ix_inforeq_channel'),
        ),
        migrations.AddIndex(
            model_name='informationrequest',
            index=models.Index(fields=['is_repeated'], name='ix_inforeq_repeat'),
        ),
        migrations.AddIndex(
            model_name='informationrequest',
            index=models.Index(fields=['is_now_covered_by_system'], name='ix_inforeq_covered'),
        ),
    ]
