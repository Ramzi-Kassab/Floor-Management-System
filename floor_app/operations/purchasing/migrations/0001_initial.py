# Generated by Django 5.2.6 on 2025-11-17 10:33

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="InternalTransferOrder",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "transfer_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated transfer number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "transfer_type",
                    models.CharField(
                        choices=[
                            ("W2W", "Warehouse to Warehouse"),
                            ("W2S", "Warehouse to Shop Floor"),
                            ("S2W", "Shop Floor to Warehouse"),
                            ("L2L", "Location to Location"),
                            ("PROD", "Production Issue"),
                            ("PRET", "Production Return"),
                            ("QAH", "QA Hold"),
                            ("QAR", "QA Release"),
                        ],
                        default="W2W",
                        max_length=10,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("PENDING_APPROVAL", "Pending Approval"),
                            ("APPROVED", "Approved"),
                            ("IN_TRANSIT", "In Transit"),
                            ("PARTIALLY_RECEIVED", "Partially Received"),
                            ("COMPLETED", "Completed"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=20,
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("LOW", "Low"),
                            ("NORMAL", "Normal"),
                            ("HIGH", "High"),
                            ("URGENT", "Urgent"),
                        ],
                        default="NORMAL",
                        max_length=10,
                    ),
                ),
                (
                    "source_warehouse_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Source Warehouse ID"
                    ),
                ),
                (
                    "source_location_id",
                    models.BigIntegerField(
                        blank=True, help_text="Specific source location/bin", null=True
                    ),
                ),
                ("source_location_name", models.CharField(max_length=200)),
                (
                    "destination_warehouse_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Destination Warehouse ID"
                    ),
                ),
                (
                    "destination_location_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Specific destination location/bin",
                        null=True,
                    ),
                ),
                ("destination_location_name", models.CharField(max_length=200)),
                (
                    "requester_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Employee ID of requester"
                    ),
                ),
                ("department_id", models.BigIntegerField(blank=True, null=True)),
                ("request_date", models.DateField(default=django.utils.timezone.now)),
                (
                    "required_by_date",
                    models.DateField(
                        blank=True,
                        help_text="Date by which transfer should be completed",
                        null=True,
                    ),
                ),
                ("shipped_date", models.DateTimeField(blank=True, null=True)),
                ("received_date", models.DateTimeField(blank=True, null=True)),
                (
                    "picker_id",
                    models.BigIntegerField(
                        blank=True, help_text="Employee who picked the items", null=True
                    ),
                ),
                ("picked_at", models.DateTimeField(blank=True, null=True)),
                ("shipped_by_id", models.BigIntegerField(blank=True, null=True)),
                ("received_by_id", models.BigIntegerField(blank=True, null=True)),
                ("approval_required", models.BooleanField(default=True)),
                ("approver_id", models.BigIntegerField(blank=True, null=True)),
                ("approved_at", models.DateTimeField(blank=True, null=True)),
                ("approval_notes", models.TextField(blank=True)),
                (
                    "job_card_id",
                    models.BigIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Related Job Card if production transfer",
                        null=True,
                    ),
                ),
                (
                    "bom_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Related BOM if production transfer",
                        null=True,
                    ),
                ),
                ("total_items", models.IntegerField(default=0)),
                (
                    "total_quantity",
                    models.DecimalField(decimal_places=4, default=0, max_digits=15),
                ),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "source_transaction_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Inventory transaction for source deduction",
                        null=True,
                    ),
                ),
                (
                    "destination_transaction_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Inventory transaction for destination addition",
                        null=True,
                    ),
                ),
                (
                    "reason",
                    models.TextField(blank=True, help_text="Reason for transfer"),
                ),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Internal Transfer Order",
                "verbose_name_plural": "Internal Transfer Orders",
                "db_table": "purchasing_transfer_order",
                "ordering": ["-request_date", "-transfer_number"],
            },
        ),
        migrations.CreateModel(
            name="OutboundShipment",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "shipment_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated shipment number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "shipment_type",
                    models.CharField(
                        choices=[
                            ("SALES", "Sales Order"),
                            ("RIG", "Rig Delivery"),
                            ("REPAIR", "Repair Return"),
                            ("SAMPLE", "Sample Shipment"),
                            ("CONSIGN", "Consignment"),
                            ("INTERNAL", "Internal Transfer"),
                        ],
                        default="SALES",
                        max_length=10,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("PICKING", "Picking in Progress"),
                            ("PACKED", "Packed"),
                            ("READY_TO_SHIP", "Ready to Ship"),
                            ("SHIPPED", "Shipped"),
                            ("IN_TRANSIT", "In Transit"),
                            ("DELIVERED", "Delivered"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=15,
                    ),
                ),
                (
                    "customer_id",
                    models.BigIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Customer ID if customer shipment",
                        null=True,
                    ),
                ),
                ("customer_name", models.CharField(max_length=200)),
                (
                    "customer_reference",
                    models.CharField(
                        blank=True,
                        help_text="Customer's PO or reference number",
                        max_length=100,
                    ),
                ),
                ("delivery_contact_name", models.CharField(blank=True, max_length=200)),
                ("delivery_contact_phone", models.CharField(blank=True, max_length=30)),
                ("delivery_address_line1", models.CharField(max_length=255)),
                (
                    "delivery_address_line2",
                    models.CharField(blank=True, max_length=255),
                ),
                ("delivery_city", models.CharField(max_length=100)),
                ("delivery_state", models.CharField(blank=True, max_length=100)),
                ("delivery_postal_code", models.CharField(blank=True, max_length=20)),
                (
                    "delivery_country",
                    models.CharField(default="Saudi Arabia", max_length=100),
                ),
                ("rig_name", models.CharField(blank=True, max_length=200)),
                ("rig_location", models.CharField(blank=True, max_length=200)),
                ("well_name", models.CharField(blank=True, max_length=200)),
                ("field_name", models.CharField(blank=True, max_length=200)),
                (
                    "source_warehouse_id",
                    models.BigIntegerField(
                        db_index=True,
                        help_text="Warehouse from which items are shipped",
                    ),
                ),
                ("created_date", models.DateField(default=django.utils.timezone.now)),
                (
                    "scheduled_ship_date",
                    models.DateField(
                        blank=True, help_text="Planned shipping date", null=True
                    ),
                ),
                ("actual_ship_date", models.DateTimeField(blank=True, null=True)),
                ("expected_delivery_date", models.DateField(blank=True, null=True)),
                ("actual_delivery_date", models.DateTimeField(blank=True, null=True)),
                ("carrier_name", models.CharField(blank=True, max_length=200)),
                ("shipping_method", models.CharField(blank=True, max_length=100)),
                ("tracking_number", models.CharField(blank=True, max_length=100)),
                ("waybill_number", models.CharField(blank=True, max_length=100)),
                ("vehicle_number", models.CharField(blank=True, max_length=50)),
                ("driver_name", models.CharField(blank=True, max_length=200)),
                ("driver_phone", models.CharField(blank=True, max_length=30)),
                (
                    "incoterm",
                    models.CharField(
                        choices=[
                            ("EXW", "EXW - Ex Works"),
                            ("FCA", "FCA - Free Carrier"),
                            ("CPT", "CPT - Carriage Paid To"),
                            ("CIP", "CIP - Carriage and Insurance Paid To"),
                            ("DAP", "DAP - Delivered at Place"),
                            ("DPU", "DPU - Delivered at Place Unloaded"),
                            ("DDP", "DDP - Delivered Duty Paid"),
                            ("FAS", "FAS - Free Alongside Ship"),
                            ("FOB", "FOB - Free on Board"),
                            ("CFR", "CFR - Cost and Freight"),
                            ("CIF", "CIF - Cost, Insurance and Freight"),
                        ],
                        default="DAP",
                        max_length=3,
                    ),
                ),
                (
                    "currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                ("total_packages", models.IntegerField(default=0)),
                (
                    "total_weight_kg",
                    models.DecimalField(decimal_places=3, default=0, max_digits=12),
                ),
                (
                    "total_volume_cbm",
                    models.DecimalField(
                        decimal_places=4,
                        default=0,
                        help_text="Total volume in cubic meters",
                        max_digits=12,
                    ),
                ),
                ("picker_id", models.BigIntegerField(blank=True, null=True)),
                ("packer_id", models.BigIntegerField(blank=True, null=True)),
                ("shipper_id", models.BigIntegerField(blank=True, null=True)),
                (
                    "shipping_cost",
                    models.DecimalField(decimal_places=2, default=0, max_digits=12),
                ),
                (
                    "insurance_cost",
                    models.DecimalField(decimal_places=2, default=0, max_digits=12),
                ),
                (
                    "total_value",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Total value of shipped goods",
                        max_digits=15,
                    ),
                ),
                (
                    "export_declaration_number",
                    models.CharField(blank=True, max_length=100),
                ),
                ("certificate_of_origin", models.CharField(blank=True, max_length=100)),
                (
                    "commercial_invoice_number",
                    models.CharField(blank=True, max_length=100),
                ),
                ("packing_list_number", models.CharField(blank=True, max_length=100)),
                ("delivery_confirmed", models.BooleanField(default=False)),
                ("delivered_to", models.CharField(blank=True, max_length=200)),
                ("delivery_signature", models.CharField(blank=True, max_length=500)),
                ("delivery_notes", models.TextField(blank=True)),
                ("delivery_photos", models.JSONField(blank=True, default=list)),
                (
                    "inventory_transaction_id",
                    models.BigIntegerField(blank=True, null=True),
                ),
                (
                    "sales_order_id",
                    models.BigIntegerField(
                        blank=True, help_text="Related sales order", null=True
                    ),
                ),
                (
                    "job_card_id",
                    models.BigIntegerField(
                        blank=True, help_text="Related job card", null=True
                    ),
                ),
                ("special_instructions", models.TextField(blank=True)),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Outbound Shipment",
                "verbose_name_plural": "Outbound Shipments",
                "db_table": "purchasing_outbound_shipment",
                "ordering": ["-created_date", "-shipment_number"],
            },
        ),
        migrations.CreateModel(
            name="CustomerReturn",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "return_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated return number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("REQUESTED", "Return Requested"),
                            ("APPROVED", "Return Approved"),
                            ("SHIPPED", "Shipped by Customer"),
                            ("RECEIVED", "Received"),
                            ("INSPECTING", "Under Inspection"),
                            ("INSPECTED", "Inspection Complete"),
                            ("PROCESSED", "Processed"),
                            ("CLOSED", "Closed"),
                            ("REJECTED", "Return Rejected"),
                        ],
                        db_index=True,
                        default="REQUESTED",
                        max_length=15,
                    ),
                ),
                (
                    "customer_id",
                    models.BigIntegerField(db_index=True, help_text="Customer ID"),
                ),
                ("customer_name", models.CharField(max_length=200)),
                ("customer_contact", models.CharField(blank=True, max_length=200)),
                ("customer_phone", models.CharField(blank=True, max_length=30)),
                ("sales_order_id", models.BigIntegerField(blank=True, null=True)),
                (
                    "return_request_date",
                    models.DateField(default=django.utils.timezone.now),
                ),
                (
                    "reason",
                    models.CharField(
                        choices=[
                            ("DEFECTIVE", "Defective Product"),
                            ("WRONG_ITEM", "Wrong Item"),
                            ("DAMAGED", "Damaged"),
                            ("NOT_AS_DESCRIBED", "Not as Described"),
                            ("PERFORMANCE", "Performance Issue"),
                            ("WEAR_PATTERN", "Abnormal Wear Pattern"),
                            ("WARRANTY", "Warranty Claim"),
                            ("OTHER", "Other"),
                        ],
                        max_length=30,
                    ),
                ),
                ("reason_detail", models.TextField(blank=True)),
                (
                    "rma_number",
                    models.CharField(
                        blank=True,
                        help_text="Return Merchandise Authorization number",
                        max_length=100,
                    ),
                ),
                ("approved_by_id", models.BigIntegerField(blank=True, null=True)),
                ("approved_at", models.DateTimeField(blank=True, null=True)),
                (
                    "customer_tracking_number",
                    models.CharField(blank=True, max_length=100),
                ),
                ("received_date", models.DateTimeField(blank=True, null=True)),
                ("received_by_id", models.BigIntegerField(blank=True, null=True)),
                (
                    "receiving_warehouse_id",
                    models.BigIntegerField(blank=True, null=True),
                ),
                ("qa_hold_location_id", models.BigIntegerField(blank=True, null=True)),
                ("inspection_required", models.BooleanField(default=True)),
                ("inspected_by_id", models.BigIntegerField(blank=True, null=True)),
                ("inspection_date", models.DateTimeField(blank=True, null=True)),
                (
                    "inspection_result",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("CONFIRMED_DEFECT", "Confirmed Defect"),
                            ("NO_DEFECT", "No Defect Found"),
                            ("WEAR_NORMAL", "Normal Wear"),
                            ("MISUSE", "Customer Misuse"),
                            ("REPAIRABLE", "Repairable"),
                            ("SCRAP", "Scrap"),
                        ],
                        max_length=20,
                    ),
                ),
                ("inspection_notes", models.TextField(blank=True)),
                (
                    "resolution_type",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("REPLACE", "Replace"),
                            ("REFUND", "Refund"),
                            ("CREDIT", "Credit Note"),
                            ("REPAIR", "Repair"),
                            ("REJECT", "Return Rejected"),
                            ("NO_ACTION", "No Action Required"),
                        ],
                        max_length=20,
                    ),
                ),
                ("resolution_notes", models.TextField(blank=True)),
                ("credit_note_number", models.CharField(blank=True, max_length=100)),
                (
                    "credit_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("restock_to_inventory", models.BooleanField(default=False)),
                (
                    "inventory_transaction_id",
                    models.BigIntegerField(blank=True, null=True),
                ),
                ("total_items", models.IntegerField(default=0)),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("photos", models.JSONField(blank=True, default=list)),
                ("documents", models.JSONField(blank=True, default=list)),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "original_shipment",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="customer_returns",
                        to="purchasing.outboundshipment",
                    ),
                ),
            ],
            options={
                "verbose_name": "Customer Return",
                "verbose_name_plural": "Customer Returns",
                "db_table": "purchasing_customer_return",
                "ordering": ["-return_request_date", "-return_number"],
            },
        ),
        migrations.CreateModel(
            name="PurchaseOrder",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "po_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated PO number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "po_type",
                    models.CharField(
                        choices=[
                            ("STANDARD", "Standard PO"),
                            ("BLANKET", "Blanket/Framework PO"),
                            ("CONTRACT", "Contract PO"),
                            ("SCHEDULED", "Scheduled Release"),
                        ],
                        default="STANDARD",
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("PENDING_APPROVAL", "Pending Approval"),
                            ("APPROVED", "Approved"),
                            ("SENT", "Sent to Supplier"),
                            ("ACKNOWLEDGED", "Acknowledged by Supplier"),
                            ("PARTIALLY_RECEIVED", "Partially Received"),
                            ("FULLY_RECEIVED", "Fully Received"),
                            ("CLOSED", "Closed"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=20,
                    ),
                ),
                (
                    "supplier_reference",
                    models.CharField(
                        blank=True,
                        help_text="Supplier's reference/acknowledgement number",
                        max_length=100,
                    ),
                ),
                (
                    "buyer_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Employee ID of the buyer"
                    ),
                ),
                (
                    "department_id",
                    models.BigIntegerField(blank=True, db_index=True, null=True),
                ),
                ("order_date", models.DateField(default=django.utils.timezone.now)),
                ("expected_delivery_date", models.DateField(blank=True, null=True)),
                ("actual_delivery_date", models.DateField(blank=True, null=True)),
                ("delivery_location_id", models.BigIntegerField(blank=True, null=True)),
                ("delivery_address", models.TextField(blank=True)),
                ("shipping_method", models.CharField(blank=True, max_length=100)),
                (
                    "currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                (
                    "payment_terms",
                    models.CharField(
                        choices=[
                            ("NET_30", "Net 30 Days"),
                            ("NET_45", "Net 45 Days"),
                            ("NET_60", "Net 60 Days"),
                            ("NET_90", "Net 90 Days"),
                            ("PREPAID", "Prepaid"),
                            ("COD", "Cash on Delivery"),
                            ("LC_AT_SIGHT", "Letter of Credit - At Sight"),
                            ("LC_30", "Letter of Credit - 30 Days"),
                            ("LC_60", "Letter of Credit - 60 Days"),
                            ("LC_90", "Letter of Credit - 90 Days"),
                        ],
                        default="NET_30",
                        max_length=20,
                    ),
                ),
                (
                    "incoterm",
                    models.CharField(
                        choices=[
                            ("EXW", "EXW - Ex Works"),
                            ("FCA", "FCA - Free Carrier"),
                            ("CPT", "CPT - Carriage Paid To"),
                            ("CIP", "CIP - Carriage and Insurance Paid To"),
                            ("DAP", "DAP - Delivered at Place"),
                            ("DPU", "DPU - Delivered at Place Unloaded"),
                            ("DDP", "DDP - Delivered Duty Paid"),
                            ("FAS", "FAS - Free Alongside Ship"),
                            ("FOB", "FOB - Free on Board"),
                            ("CFR", "CFR - Cost and Freight"),
                            ("CIF", "CIF - Cost, Insurance and Freight"),
                        ],
                        default="DAP",
                        max_length=3,
                    ),
                ),
                (
                    "subtotal",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "discount_percentage",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "discount_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "tax_percentage",
                    models.DecimalField(
                        decimal_places=2,
                        default=15,
                        max_digits=5,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "tax_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "shipping_cost",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "other_charges",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "total_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("submitted_at", models.DateTimeField(blank=True, null=True)),
                ("approver_id", models.BigIntegerField(blank=True, null=True)),
                ("approved_at", models.DateTimeField(blank=True, null=True)),
                ("approval_notes", models.TextField(blank=True)),
                ("sent_at", models.DateTimeField(blank=True, null=True)),
                (
                    "sent_via",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("EMAIL", "Email"),
                            ("FAX", "Fax"),
                            ("EDI", "Electronic Data Interchange"),
                            ("PORTAL", "Supplier Portal"),
                            ("MANUAL", "Manual"),
                        ],
                        max_length=20,
                    ),
                ),
                ("acknowledged_at", models.DateTimeField(blank=True, null=True)),
                ("acknowledgement_notes", models.TextField(blank=True)),
                ("cancelled_at", models.DateTimeField(blank=True, null=True)),
                ("cancellation_reason", models.TextField(blank=True)),
                ("closed_at", models.DateTimeField(blank=True, null=True)),
                ("closure_notes", models.TextField(blank=True)),
                ("print_count", models.IntegerField(default=0)),
                ("last_printed_at", models.DateTimeField(blank=True, null=True)),
                ("special_instructions", models.TextField(blank=True)),
                ("terms_and_conditions", models.TextField(blank=True)),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "cancelled_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="cancelled_pos",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "closed_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="closed_pos",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "sent_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="sent_pos",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "submitted_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="submitted_pos",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Purchase Order",
                "verbose_name_plural": "Purchase Orders",
                "db_table": "purchasing_purchase_order",
                "ordering": ["-order_date", "-po_number"],
            },
        ),
        migrations.CreateModel(
            name="GoodsReceiptNote",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "grn_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated GRN number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("PENDING_INSPECTION", "Pending Inspection"),
                            ("UNDER_INSPECTION", "Under Inspection"),
                            ("INSPECTION_COMPLETE", "Inspection Complete"),
                            ("POSTED", "Posted to Inventory"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=25,
                    ),
                ),
                ("receipt_date", models.DateField(default=django.utils.timezone.now)),
                ("receipt_time", models.TimeField(default=django.utils.timezone.now)),
                (
                    "received_by_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Employee ID who received the goods"
                    ),
                ),
                (
                    "delivery_note_number",
                    models.CharField(
                        blank=True,
                        help_text="Supplier's delivery note/packing slip number",
                        max_length=100,
                    ),
                ),
                ("waybill_number", models.CharField(blank=True, max_length=100)),
                ("carrier_name", models.CharField(blank=True, max_length=200)),
                ("vehicle_number", models.CharField(blank=True, max_length=50)),
                ("driver_name", models.CharField(blank=True, max_length=200)),
                ("driver_id", models.CharField(blank=True, max_length=50)),
                (
                    "receiving_location_id",
                    models.BigIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Warehouse/Location where goods received",
                        null=True,
                    ),
                ),
                (
                    "qa_hold_location_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="QA Hold location for inspection",
                        null=True,
                    ),
                ),
                ("total_packages", models.IntegerField(default=0)),
                (
                    "total_weight_kg",
                    models.DecimalField(decimal_places=3, default=0, max_digits=12),
                ),
                (
                    "package_condition",
                    models.CharField(
                        choices=[
                            ("EXCELLENT", "Excellent"),
                            ("GOOD", "Good"),
                            ("DAMAGED", "Damaged"),
                            ("SEVERELY_DAMAGED", "Severely Damaged"),
                        ],
                        default="GOOD",
                        max_length=50,
                    ),
                ),
                ("damage_notes", models.TextField(blank=True)),
                ("requires_inspection", models.BooleanField(default=True)),
                (
                    "inspection_status",
                    models.CharField(
                        choices=[
                            ("PENDING", "Pending"),
                            ("IN_PROGRESS", "In Progress"),
                            ("PASSED", "Passed"),
                            ("FAILED", "Failed"),
                            ("CONDITIONAL", "Conditional Accept"),
                        ],
                        default="PENDING",
                        max_length=20,
                    ),
                ),
                (
                    "inspection_completed_at",
                    models.DateTimeField(blank=True, null=True),
                ),
                ("inspected_by_id", models.BigIntegerField(blank=True, null=True)),
                ("posted_at", models.DateTimeField(blank=True, null=True)),
                (
                    "inventory_transaction_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Reference to inventory transaction created",
                        null=True,
                    ),
                ),
                (
                    "customs_declaration_number",
                    models.CharField(
                        blank=True,
                        help_text="Saudi Customs declaration number",
                        max_length=100,
                    ),
                ),
                ("customs_clearance_date", models.DateField(blank=True, null=True)),
                ("import_permit_number", models.CharField(blank=True, max_length=100)),
                ("certificate_of_origin", models.CharField(blank=True, max_length=100)),
                (
                    "certificate_of_conformity",
                    models.CharField(blank=True, max_length=100),
                ),
                (
                    "attachment_delivery_note",
                    models.CharField(blank=True, max_length=500),
                ),
                (
                    "attachment_customs_docs",
                    models.CharField(blank=True, max_length=500),
                ),
                ("attachment_photos", models.JSONField(blank=True, default=list)),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "posted_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="posted_grns",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "purchase_order",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="grns",
                        to="purchasing.purchaseorder",
                    ),
                ),
            ],
            options={
                "verbose_name": "Goods Receipt Note",
                "verbose_name_plural": "Goods Receipt Notes",
                "db_table": "purchasing_grn",
                "ordering": ["-receipt_date", "-grn_number"],
            },
        ),
        migrations.CreateModel(
            name="PurchaseOrderLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                (
                    "item_id",
                    models.BigIntegerField(blank=True, db_index=True, null=True),
                ),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_ordered",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "unit_price",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "total_price",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "quantity_received",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "quantity_accepted",
                    models.DecimalField(
                        decimal_places=4,
                        default=0,
                        help_text="Quantity accepted after inspection",
                        max_digits=12,
                    ),
                ),
                (
                    "quantity_rejected",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "quantity_returned",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                ("is_fully_received", models.BooleanField(default=False)),
                (
                    "quantity_invoiced",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                ("is_fully_invoiced", models.BooleanField(default=False)),
                ("promised_date", models.DateField(blank=True, null=True)),
                ("actual_date", models.DateField(blank=True, null=True)),
                (
                    "pr_line_id",
                    models.BigIntegerField(
                        blank=True, help_text="PR Line reference", null=True
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "po",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.purchaseorder",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "PO Line",
                "verbose_name_plural": "PO Lines",
                "db_table": "purchasing_po_line",
                "ordering": ["po", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="GRNLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                ("item_id", models.BigIntegerField(db_index=True)),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_ordered",
                    models.DecimalField(
                        decimal_places=4,
                        help_text="Quantity ordered on PO",
                        max_digits=12,
                    ),
                ),
                (
                    "quantity_received",
                    models.DecimalField(
                        decimal_places=4,
                        help_text="Quantity actually received",
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "quantity_accepted",
                    models.DecimalField(
                        decimal_places=4,
                        default=0,
                        help_text="Quantity accepted after inspection",
                        max_digits=12,
                    ),
                ),
                (
                    "quantity_rejected",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                ("unit_price", models.DecimalField(decimal_places=4, max_digits=12)),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "storage_location_id",
                    models.BigIntegerField(
                        blank=True, help_text="Final storage location", null=True
                    ),
                ),
                ("storage_bin", models.CharField(blank=True, max_length=50)),
                (
                    "serial_numbers",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="List of serial numbers if serialized",
                    ),
                ),
                ("batch_number", models.CharField(blank=True, max_length=50)),
                ("expiry_date", models.DateField(blank=True, null=True)),
                ("manufacturer_batch", models.CharField(blank=True, max_length=100)),
                ("requires_inspection", models.BooleanField(default=True)),
                (
                    "inspection_result",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("ACCEPT", "Accept"),
                            ("REJECT", "Reject"),
                            ("ACCEPT_WITH_DEVIATION", "Accept with Deviation"),
                            ("REWORK", "Rework Required"),
                            ("USE_AS_IS", "Use As-Is"),
                        ],
                        max_length=25,
                    ),
                ),
                ("inspection_notes", models.TextField(blank=True)),
                ("is_damaged", models.BooleanField(default=False)),
                ("damage_description", models.TextField(blank=True)),
                ("damage_photos", models.JSONField(blank=True, default=list)),
                (
                    "qcode_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="QR Code reference for tracking",
                        null=True,
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "grn",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.goodsreceiptnote",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "po_line",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="grn_lines",
                        to="purchasing.purchaseorderline",
                    ),
                ),
            ],
            options={
                "verbose_name": "GRN Line",
                "verbose_name_plural": "GRN Lines",
                "db_table": "purchasing_grn_line",
                "ordering": ["grn", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="PurchaseRequisition",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "pr_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated PR number (e.g., PR-2024-00001)",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "pr_type",
                    models.CharField(
                        choices=[
                            ("STOCK", "Stock Item"),
                            ("NON_STOCK", "Non-Stock Item"),
                            ("SERVICE", "Service"),
                            ("CAPEX", "Capital Expenditure"),
                            ("PROJECT", "Project Material"),
                            ("MRO", "Maintenance, Repair & Operations"),
                        ],
                        db_index=True,
                        default="STOCK",
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("SUBMITTED", "Submitted"),
                            ("UNDER_REVIEW", "Under Review"),
                            ("APPROVED", "Approved"),
                            ("REJECTED", "Rejected"),
                            ("PARTIALLY_ORDERED", "Partially Ordered"),
                            ("FULLY_ORDERED", "Fully Ordered"),
                            ("CANCELLED", "Cancelled"),
                            ("CLOSED", "Closed"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=20,
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("LOW", "Low"),
                            ("NORMAL", "Normal"),
                            ("HIGH", "High"),
                            ("URGENT", "Urgent"),
                            ("CRITICAL", "Critical"),
                        ],
                        db_index=True,
                        default="NORMAL",
                        max_length=10,
                    ),
                ),
                (
                    "requester_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Employee ID of the requester"
                    ),
                ),
                (
                    "department_id",
                    models.BigIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Department ID from HR module",
                        null=True,
                    ),
                ),
                ("cost_center", models.CharField(blank=True, max_length=50)),
                (
                    "project_code",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Project/Job code if applicable",
                        max_length=50,
                    ),
                ),
                ("request_date", models.DateField(default=django.utils.timezone.now)),
                (
                    "required_by_date",
                    models.DateField(
                        blank=True,
                        help_text="Date by which items are needed",
                        null=True,
                    ),
                ),
                (
                    "delivery_location_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Warehouse/Location ID for delivery",
                        null=True,
                    ),
                ),
                (
                    "delivery_address",
                    models.TextField(
                        blank=True,
                        help_text="Override delivery address if not standard location",
                    ),
                ),
                ("submitted_at", models.DateTimeField(blank=True, null=True)),
                ("first_approver_id", models.BigIntegerField(blank=True, null=True)),
                ("first_approval_at", models.DateTimeField(blank=True, null=True)),
                ("first_approval_notes", models.TextField(blank=True)),
                ("second_approver_id", models.BigIntegerField(blank=True, null=True)),
                ("second_approval_at", models.DateTimeField(blank=True, null=True)),
                ("second_approval_notes", models.TextField(blank=True)),
                ("final_approver_id", models.BigIntegerField(blank=True, null=True)),
                ("final_approval_at", models.DateTimeField(blank=True, null=True)),
                ("final_approval_notes", models.TextField(blank=True)),
                ("rejected_by_id", models.BigIntegerField(blank=True, null=True)),
                ("rejected_at", models.DateTimeField(blank=True, null=True)),
                ("rejection_reason", models.TextField(blank=True)),
                (
                    "total_estimated_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("currency", models.CharField(default="SAR", max_length=3)),
                (
                    "job_card_id",
                    models.BigIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Related Job Card if material is for production",
                        null=True,
                    ),
                ),
                (
                    "justification",
                    models.TextField(
                        blank=True, help_text="Business justification for the purchase"
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "submitted_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="submitted_prs",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Purchase Requisition",
                "verbose_name_plural": "Purchase Requisitions",
                "db_table": "purchasing_purchase_requisition",
                "ordering": ["-request_date", "-pr_number"],
            },
        ),
        migrations.AddField(
            model_name="purchaseorder",
            name="purchase_requisition",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="purchase_orders",
                to="purchasing.purchaserequisition",
            ),
        ),
        migrations.CreateModel(
            name="PurchaseRequisitionLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                (
                    "item_id",
                    models.BigIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Reference to Item in inventory",
                        null=True,
                    ),
                ),
                ("item_code", models.CharField(blank=True, max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_requested",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "uom",
                    models.CharField(
                        default="EA", help_text="Unit of Measure", max_length=20
                    ),
                ),
                (
                    "estimated_unit_price",
                    models.DecimalField(
                        decimal_places=4,
                        default=0,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "total_estimated_cost",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "suggested_supplier_id",
                    models.BigIntegerField(blank=True, db_index=True, null=True),
                ),
                (
                    "quantity_ordered",
                    models.DecimalField(
                        decimal_places=4,
                        default=0,
                        help_text="Quantity already ordered via PO",
                        max_digits=12,
                    ),
                ),
                ("is_fully_ordered", models.BooleanField(default=False)),
                (
                    "bom_line_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="BOM Line reference if from production",
                        null=True,
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "pr",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.purchaserequisition",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "PR Line",
                "verbose_name_plural": "PR Lines",
                "db_table": "purchasing_pr_line",
                "ordering": ["pr", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="PurchaseReturn",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "return_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated return number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("PENDING_APPROVAL", "Pending Approval"),
                            ("APPROVED", "Approved"),
                            ("RMA_REQUESTED", "RMA Requested"),
                            ("RMA_APPROVED", "RMA Approved by Supplier"),
                            ("READY_TO_SHIP", "Ready to Ship"),
                            ("SHIPPED", "Shipped"),
                            ("RECEIVED_BY_SUPPLIER", "Received by Supplier"),
                            ("CREDIT_RECEIVED", "Credit Note Received"),
                            ("CLOSED", "Closed"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=25,
                    ),
                ),
                ("return_date", models.DateField(default=django.utils.timezone.now)),
                (
                    "reason",
                    models.CharField(
                        choices=[
                            ("DEFECTIVE", "Defective Product"),
                            ("WRONG_ITEM", "Wrong Item Shipped"),
                            ("WRONG_QTY", "Wrong Quantity"),
                            ("DAMAGED", "Damaged in Transit"),
                            ("QUALITY_ISSUE", "Quality Does Not Meet Specs"),
                            ("NOT_AS_ORDERED", "Not as Ordered"),
                            ("EXPIRED", "Expired/Past Shelf Life"),
                            ("DUPLICATE", "Duplicate Shipment"),
                            ("OTHER", "Other"),
                        ],
                        db_index=True,
                        max_length=20,
                    ),
                ),
                (
                    "reason_detail",
                    models.TextField(
                        blank=True, help_text="Detailed description of the issue"
                    ),
                ),
                (
                    "requested_action",
                    models.CharField(
                        choices=[
                            ("REPLACE", "Replace with New"),
                            ("CREDIT", "Credit Note"),
                            ("REPAIR", "Repair and Return"),
                            ("SCRAP", "Scrap (No Credit)"),
                        ],
                        default="CREDIT",
                        max_length=10,
                    ),
                ),
                (
                    "requester_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Employee ID of requester"
                    ),
                ),
                (
                    "rma_number",
                    models.CharField(
                        blank=True,
                        help_text="Supplier's RMA/Return Authorization number",
                        max_length=100,
                    ),
                ),
                ("rma_requested_at", models.DateTimeField(blank=True, null=True)),
                ("rma_approved_at", models.DateTimeField(blank=True, null=True)),
                (
                    "rma_instructions",
                    models.TextField(
                        blank=True, help_text="Supplier's return instructions"
                    ),
                ),
                ("shipping_date", models.DateField(blank=True, null=True)),
                ("shipping_method", models.CharField(blank=True, max_length=100)),
                ("tracking_number", models.CharField(blank=True, max_length=100)),
                ("carrier_name", models.CharField(blank=True, max_length=200)),
                (
                    "shipping_cost",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Who bears the shipping cost",
                        max_digits=12,
                    ),
                ),
                (
                    "shipping_paid_by",
                    models.CharField(
                        choices=[
                            ("BUYER", "Buyer"),
                            ("SUPPLIER", "Supplier"),
                            ("SHARED", "Shared"),
                        ],
                        default="SUPPLIER",
                        max_length=10,
                    ),
                ),
                (
                    "total_return_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "restocking_fee",
                    models.DecimalField(decimal_places=2, default=0, max_digits=12),
                ),
                ("credit_note_number", models.CharField(blank=True, max_length=100)),
                (
                    "credit_note_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("credit_note_date", models.DateField(blank=True, null=True)),
                ("approver_id", models.BigIntegerField(blank=True, null=True)),
                ("approved_at", models.DateTimeField(blank=True, null=True)),
                ("approval_notes", models.TextField(blank=True)),
                (
                    "deduct_from_inventory",
                    models.BooleanField(
                        default=True,
                        help_text="Deduct returned quantity from inventory",
                    ),
                ),
                (
                    "inventory_transaction_id",
                    models.BigIntegerField(blank=True, null=True),
                ),
                ("attachment_photos", models.JSONField(blank=True, default=list)),
                ("attachment_documents", models.JSONField(blank=True, default=list)),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "grn",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="returns",
                        to="purchasing.goodsreceiptnote",
                    ),
                ),
                (
                    "purchase_order",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="returns",
                        to="purchasing.purchaseorder",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Purchase Return",
                "verbose_name_plural": "Purchase Returns",
                "db_table": "purchasing_return",
                "ordering": ["-return_date", "-return_number"],
            },
        ),
        migrations.CreateModel(
            name="PurchaseReturnLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                ("item_id", models.BigIntegerField(db_index=True)),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_to_return",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "unit_price",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "reason",
                    models.CharField(
                        choices=[
                            ("DEFECTIVE", "Defective Product"),
                            ("WRONG_ITEM", "Wrong Item Shipped"),
                            ("WRONG_QTY", "Wrong Quantity"),
                            ("DAMAGED", "Damaged in Transit"),
                            ("QUALITY_ISSUE", "Quality Does Not Meet Specs"),
                            ("NOT_AS_ORDERED", "Not as Ordered"),
                            ("EXPIRED", "Expired/Past Shelf Life"),
                            ("DUPLICATE", "Duplicate Shipment"),
                            ("OTHER", "Other"),
                        ],
                        max_length=20,
                    ),
                ),
                ("defect_description", models.TextField(blank=True)),
                (
                    "serial_numbers",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Serial numbers being returned",
                    ),
                ),
                ("batch_number", models.CharField(blank=True, max_length=50)),
                (
                    "current_location_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="Current storage location of items",
                        null=True,
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "grn_line",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="return_lines",
                        to="purchasing.grnline",
                    ),
                ),
                (
                    "po_line",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="return_lines",
                        to="purchasing.purchaseorderline",
                    ),
                ),
                (
                    "return_order",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.purchasereturn",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Return Line",
                "verbose_name_plural": "Return Lines",
                "db_table": "purchasing_return_line",
                "ordering": ["return_order", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="QualityInspection",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "inspector_id",
                    models.BigIntegerField(
                        db_index=True, help_text="Employee ID of inspector"
                    ),
                ),
                (
                    "inspection_date",
                    models.DateTimeField(default=django.utils.timezone.now),
                ),
                (
                    "parameter",
                    models.CharField(
                        help_text="What is being inspected", max_length=200
                    ),
                ),
                (
                    "specification",
                    models.CharField(
                        help_text="Required specification", max_length=200
                    ),
                ),
                (
                    "actual_value",
                    models.CharField(
                        help_text="Actual measured/observed value", max_length=200
                    ),
                ),
                ("tolerance", models.CharField(blank=True, max_length=100)),
                (
                    "result",
                    models.CharField(
                        choices=[
                            ("PASS", "Pass"),
                            ("FAIL", "Fail"),
                            ("WARN", "Warning"),
                        ],
                        max_length=10,
                    ),
                ),
                (
                    "is_critical",
                    models.BooleanField(
                        default=False, help_text="Is this a critical inspection point"
                    ),
                ),
                ("measurement_tool", models.CharField(blank=True, max_length=200)),
                ("tool_calibration_id", models.CharField(blank=True, max_length=100)),
                ("photo_path", models.CharField(blank=True, max_length=500)),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "grn_line",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="inspections",
                        to="purchasing.grnline",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Quality Inspection",
                "verbose_name_plural": "Quality Inspections",
                "db_table": "purchasing_quality_inspection",
                "ordering": ["grn_line", "inspection_date"],
            },
        ),
        migrations.CreateModel(
            name="RequestForQuotation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "rfq_number",
                    models.CharField(
                        db_index=True,
                        help_text="Auto-generated RFQ number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("SENT", "Sent to Suppliers"),
                            ("PARTIALLY_QUOTED", "Partially Quoted"),
                            ("FULLY_QUOTED", "Fully Quoted"),
                            ("CLOSED", "Closed"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=20,
                    ),
                ),
                ("title", models.CharField(max_length=200)),
                ("issue_date", models.DateField(default=django.utils.timezone.now)),
                (
                    "response_deadline",
                    models.DateTimeField(help_text="Deadline for supplier responses"),
                ),
                (
                    "validity_period_days",
                    models.IntegerField(
                        default=30, help_text="Required validity period for quotations"
                    ),
                ),
                (
                    "buyer_id",
                    models.BigIntegerField(
                        db_index=True,
                        help_text="Employee ID of the buyer/procurement officer",
                    ),
                ),
                ("required_delivery_date", models.DateField(blank=True, null=True)),
                ("delivery_location_id", models.BigIntegerField(blank=True, null=True)),
                ("delivery_address", models.TextField(blank=True)),
                (
                    "preferred_incoterm",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("EXW", "EXW - Ex Works"),
                            ("FCA", "FCA - Free Carrier"),
                            ("CPT", "CPT - Carriage Paid To"),
                            ("CIP", "CIP - Carriage and Insurance Paid To"),
                            ("DAP", "DAP - Delivered at Place"),
                            ("DPU", "DPU - Delivered at Place Unloaded"),
                            ("DDP", "DDP - Delivered Duty Paid"),
                            ("FAS", "FAS - Free Alongside Ship"),
                            ("FOB", "FOB - Free on Board"),
                            ("CFR", "CFR - Cost and Freight"),
                            ("CIF", "CIF - Cost, Insurance and Freight"),
                        ],
                        default="DAP",
                        max_length=3,
                    ),
                ),
                (
                    "preferred_payment_terms",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("NET_30", "Net 30 Days"),
                            ("NET_45", "Net 45 Days"),
                            ("NET_60", "Net 60 Days"),
                            ("NET_90", "Net 90 Days"),
                            ("PREPAID", "Prepaid"),
                            ("COD", "Cash on Delivery"),
                            ("LC_AT_SIGHT", "Letter of Credit - At Sight"),
                            ("LC_30", "Letter of Credit - 30 Days"),
                            ("LC_60", "Letter of Credit - 60 Days"),
                            ("LC_90", "Letter of Credit - 90 Days"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                (
                    "instructions",
                    models.TextField(
                        blank=True, help_text="Special instructions for suppliers"
                    ),
                ),
                (
                    "technical_requirements",
                    models.TextField(
                        blank=True,
                        help_text="Technical specifications and requirements",
                    ),
                ),
                (
                    "commercial_terms",
                    models.TextField(
                        blank=True, help_text="Commercial terms and conditions"
                    ),
                ),
                ("suppliers_invited", models.IntegerField(default=0)),
                ("quotations_received", models.IntegerField(default=0)),
                (
                    "best_quote_value",
                    models.DecimalField(
                        blank=True, decimal_places=2, max_digits=15, null=True
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "purchase_requisition",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="rfqs",
                        to="purchasing.purchaserequisition",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Request for Quotation",
                "verbose_name_plural": "Requests for Quotation",
                "db_table": "purchasing_rfq",
                "ordering": ["-issue_date", "-rfq_number"],
            },
        ),
        migrations.CreateModel(
            name="RFQLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                (
                    "item_id",
                    models.BigIntegerField(blank=True, db_index=True, null=True),
                ),
                ("item_code", models.CharField(blank=True, max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "specifications",
                    models.TextField(
                        blank=True, help_text="Technical specifications for this item"
                    ),
                ),
                (
                    "pr_line_id",
                    models.BigIntegerField(
                        blank=True,
                        help_text="PR Line that originated this RFQ line",
                        null=True,
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "rfq",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.requestforquotation",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "RFQ Line",
                "verbose_name_plural": "RFQ Lines",
                "db_table": "purchasing_rfq_line",
                "ordering": ["rfq", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="ShipmentLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                ("item_id", models.BigIntegerField(db_index=True)),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_ordered",
                    models.DecimalField(
                        decimal_places=4,
                        help_text="Quantity ordered by customer",
                        max_digits=12,
                    ),
                ),
                (
                    "quantity_picked",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "quantity_shipped",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "unit_price",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("package_number", models.CharField(blank=True, max_length=50)),
                (
                    "weight_kg",
                    models.DecimalField(decimal_places=3, default=0, max_digits=12),
                ),
                (
                    "dimensions",
                    models.CharField(
                        blank=True, help_text="L x W x H in cm", max_length=100
                    ),
                ),
                (
                    "serial_numbers",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Serial numbers being shipped",
                    ),
                ),
                ("batch_number", models.CharField(blank=True, max_length=50)),
                (
                    "picked_from_location_id",
                    models.BigIntegerField(blank=True, null=True),
                ),
                ("picked_from_bin", models.CharField(blank=True, max_length=50)),
                (
                    "qcode_id",
                    models.BigIntegerField(
                        blank=True, help_text="QR Code for tracking", null=True
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "shipment",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.outboundshipment",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Shipment Line",
                "verbose_name_plural": "Shipment Lines",
                "db_table": "purchasing_shipment_line",
                "ordering": ["shipment", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="CustomerReturnLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                ("item_id", models.BigIntegerField(db_index=True)),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_returned",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "unit_price",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "condition",
                    models.CharField(
                        choices=[
                            ("NEW", "New/Unused"),
                            ("USED", "Used"),
                            ("DAMAGED", "Damaged"),
                            ("DEFECTIVE", "Defective"),
                        ],
                        max_length=20,
                    ),
                ),
                ("condition_notes", models.TextField(blank=True)),
                (
                    "serial_numbers",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Serial numbers being returned",
                    ),
                ),
                ("batch_number", models.CharField(blank=True, max_length=50)),
                (
                    "line_inspection_result",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("RESTOCK", "Restock"),
                            ("REPAIR", "Repair"),
                            ("SCRAP", "Scrap"),
                            ("QUARANTINE", "Quarantine"),
                        ],
                        max_length=20,
                    ),
                ),
                ("storage_location_id", models.BigIntegerField(blank=True, null=True)),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "customer_return",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.customerreturn",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "shipment_line",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="return_lines",
                        to="purchasing.shipmentline",
                    ),
                ),
            ],
            options={
                "verbose_name": "Customer Return Line",
                "verbose_name_plural": "Customer Return Lines",
                "db_table": "purchasing_customer_return_line",
                "ordering": ["customer_return", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="Supplier",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "code",
                    models.CharField(
                        db_index=True,
                        help_text="Unique supplier code (e.g., SUP-001)",
                        max_length=20,
                        unique=True,
                    ),
                ),
                ("name", models.CharField(db_index=True, max_length=200)),
                ("legal_name", models.CharField(blank=True, max_length=200)),
                (
                    "classification",
                    models.CharField(
                        choices=[
                            ("LOCAL", "Local Supplier"),
                            ("INTERNATIONAL", "International Supplier"),
                            ("OEM", "Original Equipment Manufacturer"),
                            ("JV_PARTNER", "Joint Venture Partner"),
                            ("SERVICE_PROVIDER", "Service Provider"),
                        ],
                        db_index=True,
                        default="LOCAL",
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("ACTIVE", "Active"),
                            ("INACTIVE", "Inactive"),
                            ("BLACKLISTED", "Blacklisted"),
                            ("PENDING_APPROVAL", "Pending Approval"),
                            ("UNDER_EVALUATION", "Under Evaluation"),
                        ],
                        db_index=True,
                        default="PENDING_APPROVAL",
                        max_length=20,
                    ),
                ),
                ("primary_email", models.EmailField(blank=True, max_length=254)),
                ("secondary_email", models.EmailField(blank=True, max_length=254)),
                ("phone", models.CharField(blank=True, max_length=30)),
                ("fax", models.CharField(blank=True, max_length=30)),
                ("website", models.URLField(blank=True)),
                ("address_line1", models.CharField(blank=True, max_length=255)),
                ("address_line2", models.CharField(blank=True, max_length=255)),
                ("city", models.CharField(blank=True, max_length=100)),
                ("state_province", models.CharField(blank=True, max_length=100)),
                ("postal_code", models.CharField(blank=True, max_length=20)),
                ("country", models.CharField(default="Saudi Arabia", max_length=100)),
                (
                    "default_currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                (
                    "payment_terms",
                    models.CharField(
                        choices=[
                            ("NET_30", "Net 30 Days"),
                            ("NET_45", "Net 45 Days"),
                            ("NET_60", "Net 60 Days"),
                            ("NET_90", "Net 90 Days"),
                            ("PREPAID", "Prepaid"),
                            ("COD", "Cash on Delivery"),
                            ("LC_AT_SIGHT", "Letter of Credit - At Sight"),
                            ("LC_30", "Letter of Credit - 30 Days"),
                            ("LC_60", "Letter of Credit - 60 Days"),
                            ("LC_90", "Letter of Credit - 90 Days"),
                        ],
                        default="NET_30",
                        max_length=20,
                    ),
                ),
                (
                    "default_incoterm",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("EXW", "EXW - Ex Works"),
                            ("FCA", "FCA - Free Carrier"),
                            ("CPT", "CPT - Carriage Paid To"),
                            ("CIP", "CIP - Carriage and Insurance Paid To"),
                            ("DAP", "DAP - Delivered at Place"),
                            ("DPU", "DPU - Delivered at Place Unloaded"),
                            ("DDP", "DDP - Delivered Duty Paid"),
                            ("FAS", "FAS - Free Alongside Ship"),
                            ("FOB", "FOB - Free on Board"),
                            ("CFR", "CFR - Cost and Freight"),
                            ("CIF", "CIF - Cost, Insurance and Freight"),
                        ],
                        default="DAP",
                        max_length=3,
                    ),
                ),
                (
                    "credit_limit",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Credit limit in default currency",
                        max_digits=15,
                    ),
                ),
                (
                    "discount_percentage",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                (
                    "tax_id",
                    models.CharField(
                        blank=True,
                        help_text="VAT/Tax Registration Number",
                        max_length=50,
                    ),
                ),
                (
                    "cr_number",
                    models.CharField(
                        blank=True,
                        help_text="Commercial Registration Number",
                        max_length=50,
                    ),
                ),
                (
                    "gosi_number",
                    models.CharField(
                        blank=True,
                        help_text="GOSI Registration (Saudi Arabia)",
                        max_length=50,
                    ),
                ),
                (
                    "saudization_percentage",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="Saudization percentage for local suppliers",
                        max_digits=5,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                ("bank_name", models.CharField(blank=True, max_length=100)),
                ("bank_branch", models.CharField(blank=True, max_length=100)),
                ("bank_account_number", models.CharField(blank=True, max_length=50)),
                ("bank_iban", models.CharField(blank=True, max_length=50)),
                ("bank_swift_code", models.CharField(blank=True, max_length=20)),
                ("iso_certified", models.BooleanField(default=False)),
                (
                    "iso_certificate_number",
                    models.CharField(blank=True, max_length=100),
                ),
                ("iso_expiry_date", models.DateField(blank=True, null=True)),
                (
                    "api_certified",
                    models.BooleanField(
                        default=False, help_text="API certification for oil & gas"
                    ),
                ),
                (
                    "api_certificate_number",
                    models.CharField(blank=True, max_length=100),
                ),
                ("api_expiry_date", models.DateField(blank=True, null=True)),
                ("other_certifications", models.JSONField(blank=True, default=dict)),
                ("average_lead_time_days", models.IntegerField(default=0)),
                (
                    "on_time_delivery_percentage",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                (
                    "quality_rating",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Rating out of 5",
                        max_digits=3,
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                ("total_orders", models.IntegerField(default=0)),
                (
                    "total_value_purchased",
                    models.DecimalField(decimal_places=2, default=0, max_digits=18),
                ),
                ("last_order_date", models.DateField(blank=True, null=True)),
                ("notes", models.TextField(blank=True)),
                (
                    "internal_notes",
                    models.TextField(
                        blank=True, help_text="Internal notes not shared with supplier"
                    ),
                ),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Supplier",
                "verbose_name_plural": "Suppliers",
                "db_table": "purchasing_supplier",
                "ordering": ["code"],
            },
        ),
        migrations.CreateModel(
            name="RFQSupplier",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("invited_at", models.DateTimeField(default=django.utils.timezone.now)),
                (
                    "sent_via",
                    models.CharField(
                        choices=[
                            ("EMAIL", "Email"),
                            ("FAX", "Fax"),
                            ("PORTAL", "Supplier Portal"),
                            ("MANUAL", "Manual/Phone"),
                        ],
                        default="EMAIL",
                        max_length=20,
                    ),
                ),
                ("response_received", models.BooleanField(default=False)),
                ("declined", models.BooleanField(default=False)),
                ("decline_reason", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "rfq",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="invited_suppliers",
                        to="purchasing.requestforquotation",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "supplier",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="rfq_invitations",
                        to="purchasing.supplier",
                    ),
                ),
            ],
            options={
                "verbose_name": "RFQ Supplier",
                "verbose_name_plural": "RFQ Suppliers",
                "db_table": "purchasing_rfq_supplier",
            },
        ),
        migrations.AddField(
            model_name="purchasereturn",
            name="supplier",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="purchase_returns",
                to="purchasing.supplier",
            ),
        ),
        migrations.AddField(
            model_name="purchaseorder",
            name="supplier",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="purchase_orders",
                to="purchasing.supplier",
            ),
        ),
        migrations.CreateModel(
            name="SupplierContact",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("name", models.CharField(max_length=200)),
                ("title", models.CharField(blank=True, max_length=100)),
                ("department", models.CharField(blank=True, max_length=100)),
                ("email", models.EmailField(blank=True, max_length=254)),
                ("phone", models.CharField(blank=True, max_length=30)),
                ("mobile", models.CharField(blank=True, max_length=30)),
                ("is_primary", models.BooleanField(db_index=True, default=False)),
                ("is_active", models.BooleanField(default=True)),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "supplier",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="contacts",
                        to="purchasing.supplier",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Supplier Contact",
                "verbose_name_plural": "Supplier Contacts",
                "db_table": "purchasing_supplier_contact",
                "ordering": ["-is_primary", "name"],
            },
        ),
        migrations.CreateModel(
            name="SupplierInvoice",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "is_deleted",
                    models.BooleanField(db_index=True, default=False, editable=False),
                ),
                (
                    "deleted_at",
                    models.DateTimeField(blank=True, editable=False, null=True),
                ),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "invoice_number",
                    models.CharField(
                        help_text="Supplier's invoice number", max_length=100
                    ),
                ),
                (
                    "internal_reference",
                    models.CharField(
                        db_index=True,
                        help_text="Internal reference number",
                        max_length=30,
                        unique=True,
                    ),
                ),
                (
                    "invoice_type",
                    models.CharField(
                        choices=[
                            ("STANDARD", "Standard Invoice"),
                            ("PROFORMA", "Proforma Invoice"),
                            ("CREDIT_NOTE", "Credit Note"),
                            ("DEBIT_NOTE", "Debit Note"),
                        ],
                        default="STANDARD",
                        max_length=15,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("DRAFT", "Draft"),
                            ("RECEIVED", "Received"),
                            ("UNDER_VERIFICATION", "Under Verification"),
                            ("VERIFIED", "Verified"),
                            ("DISPUTED", "Disputed"),
                            ("APPROVED", "Approved for Payment"),
                            ("PENDING_PAYMENT", "Pending Payment"),
                            ("PARTIALLY_PAID", "Partially Paid"),
                            ("PAID", "Paid"),
                            ("CANCELLED", "Cancelled"),
                        ],
                        db_index=True,
                        default="DRAFT",
                        max_length=20,
                    ),
                ),
                (
                    "payment_status",
                    models.CharField(
                        choices=[
                            ("NOT_PAID", "Not Paid"),
                            ("PARTIAL", "Partially Paid"),
                            ("PAID", "Paid in Full"),
                            ("OVERDUE", "Overdue"),
                        ],
                        db_index=True,
                        default="NOT_PAID",
                        max_length=10,
                    ),
                ),
                ("invoice_date", models.DateField()),
                ("received_date", models.DateField(default=django.utils.timezone.now)),
                (
                    "due_date",
                    models.DateField(
                        blank=True, help_text="Payment due date", null=True
                    ),
                ),
                (
                    "posting_date",
                    models.DateField(
                        default=django.utils.timezone.now,
                        help_text="Accounting posting date",
                    ),
                ),
                (
                    "currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                (
                    "payment_terms",
                    models.CharField(
                        choices=[
                            ("NET_30", "Net 30 Days"),
                            ("NET_45", "Net 45 Days"),
                            ("NET_60", "Net 60 Days"),
                            ("NET_90", "Net 90 Days"),
                            ("PREPAID", "Prepaid"),
                            ("COD", "Cash on Delivery"),
                            ("LC_AT_SIGHT", "Letter of Credit - At Sight"),
                            ("LC_30", "Letter of Credit - 30 Days"),
                            ("LC_60", "Letter of Credit - 60 Days"),
                            ("LC_90", "Letter of Credit - 90 Days"),
                        ],
                        default="NET_30",
                        max_length=20,
                    ),
                ),
                (
                    "exchange_rate",
                    models.DecimalField(
                        decimal_places=6,
                        default=1,
                        help_text="Exchange rate to base currency (SAR)",
                        max_digits=10,
                    ),
                ),
                (
                    "subtotal",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "discount_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "tax_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "withholding_tax",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Withholding tax amount (if applicable)",
                        max_digits=15,
                    ),
                ),
                (
                    "shipping_charges",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "other_charges",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "total_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "amount_in_base_currency",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "amount_paid",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "amount_outstanding",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("last_payment_date", models.DateField(blank=True, null=True)),
                (
                    "is_matched",
                    models.BooleanField(
                        default=False, help_text="Invoice matched with PO and GRN"
                    ),
                ),
                (
                    "matching_status",
                    models.CharField(
                        choices=[
                            ("NOT_MATCHED", "Not Matched"),
                            ("PARTIAL_MATCH", "Partial Match"),
                            ("FULL_MATCH", "Full Match"),
                            ("DISCREPANCY", "Discrepancy Found"),
                        ],
                        default="NOT_MATCHED",
                        max_length=20,
                    ),
                ),
                (
                    "quantity_variance",
                    models.DecimalField(
                        decimal_places=4,
                        default=0,
                        help_text="Difference between invoiced and received quantity",
                        max_digits=12,
                    ),
                ),
                (
                    "price_variance",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Difference between invoiced and PO price",
                        max_digits=15,
                    ),
                ),
                ("variance_notes", models.TextField(blank=True)),
                ("verified_by_id", models.BigIntegerField(blank=True, null=True)),
                ("verified_at", models.DateTimeField(blank=True, null=True)),
                ("verification_notes", models.TextField(blank=True)),
                ("approver_id", models.BigIntegerField(blank=True, null=True)),
                ("approved_at", models.DateTimeField(blank=True, null=True)),
                ("approval_notes", models.TextField(blank=True)),
                ("is_disputed", models.BooleanField(default=False)),
                ("dispute_reason", models.TextField(blank=True)),
                ("disputed_at", models.DateTimeField(blank=True, null=True)),
                ("dispute_resolved_at", models.DateTimeField(blank=True, null=True)),
                ("resolution_notes", models.TextField(blank=True)),
                ("attachment_invoice", models.CharField(blank=True, max_length=500)),
                (
                    "attachment_supporting_docs",
                    models.JSONField(blank=True, default=list),
                ),
                (
                    "gl_account",
                    models.CharField(
                        blank=True, help_text="General Ledger account", max_length=50
                    ),
                ),
                ("cost_center", models.CharField(blank=True, max_length=50)),
                (
                    "journal_entry_reference",
                    models.CharField(blank=True, max_length=100),
                ),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "grn",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="invoices",
                        to="purchasing.goodsreceiptnote",
                    ),
                ),
                (
                    "purchase_order",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="invoices",
                        to="purchasing.purchaseorder",
                    ),
                ),
                (
                    "supplier",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="invoices",
                        to="purchasing.supplier",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Supplier Invoice",
                "verbose_name_plural": "Supplier Invoices",
                "db_table": "purchasing_supplier_invoice",
                "ordering": ["-invoice_date", "-internal_reference"],
            },
        ),
        migrations.CreateModel(
            name="SupplierInvoiceLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                (
                    "item_id",
                    models.BigIntegerField(blank=True, db_index=True, null=True),
                ),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_invoiced",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "unit_price",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "total_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "tax_rate",
                    models.DecimalField(decimal_places=2, default=15, max_digits=5),
                ),
                (
                    "tax_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("gl_account", models.CharField(blank=True, max_length=50)),
                ("cost_center", models.CharField(blank=True, max_length=50)),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "grn_line",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="invoice_lines",
                        to="purchasing.grnline",
                    ),
                ),
                (
                    "invoice",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.supplierinvoice",
                    ),
                ),
                (
                    "po_line",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="invoice_lines",
                        to="purchasing.purchaseorderline",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Invoice Line",
                "verbose_name_plural": "Invoice Lines",
                "db_table": "purchasing_invoice_line",
                "ordering": ["invoice", "line_number"],
            },
        ),
        migrations.CreateModel(
            name="SupplierItem",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("item_id", models.BigIntegerField(db_index=True)),
                (
                    "supplier_part_number",
                    models.CharField(
                        blank=True,
                        help_text="Supplier's part/SKU number",
                        max_length=100,
                    ),
                ),
                (
                    "supplier_description",
                    models.CharField(
                        blank=True,
                        help_text="Supplier's product description",
                        max_length=500,
                    ),
                ),
                (
                    "unit_price",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                ("price_valid_from", models.DateField(blank=True, null=True)),
                ("price_valid_until", models.DateField(blank=True, null=True)),
                ("last_price_update", models.DateTimeField(blank=True, null=True)),
                (
                    "minimum_order_quantity",
                    models.DecimalField(
                        decimal_places=4,
                        default=1,
                        help_text="Minimum order quantity (MOQ)",
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "order_multiple",
                    models.DecimalField(
                        decimal_places=4,
                        default=1,
                        help_text="Order must be in multiples of this quantity",
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "pack_size",
                    models.DecimalField(
                        decimal_places=4,
                        default=1,
                        help_text="Standard pack/box size",
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "lead_time_days",
                    models.IntegerField(
                        default=0,
                        help_text="Standard lead time in days",
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "safety_lead_time_days",
                    models.IntegerField(
                        default=0,
                        help_text="Additional safety buffer days",
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "is_preferred",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Preferred supplier for this item",
                    ),
                ),
                ("is_active", models.BooleanField(db_index=True, default=True)),
                ("quality_grade", models.CharField(blank=True, max_length=20)),
                (
                    "requires_inspection",
                    models.BooleanField(
                        default=False,
                        help_text="Item requires quality inspection on receipt",
                    ),
                ),
                (
                    "inspection_plan",
                    models.TextField(
                        blank=True, help_text="Inspection criteria and procedures"
                    ),
                ),
                ("average_actual_lead_time", models.IntegerField(default=0)),
                (
                    "defect_rate_percentage",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        max_digits=5,
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "supplier",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="supplier_items",
                        to="purchasing.supplier",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Supplier Item",
                "verbose_name_plural": "Supplier Items",
                "db_table": "purchasing_supplier_item",
                "ordering": ["supplier", "-is_preferred"],
            },
        ),
        migrations.CreateModel(
            name="SupplierQuotation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                (
                    "public_id",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "quotation_number",
                    models.CharField(
                        help_text="Supplier's quotation/reference number", max_length=50
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("PENDING", "Pending Response"),
                            ("RECEIVED", "Received"),
                            ("UNDER_EVALUATION", "Under Evaluation"),
                            ("SELECTED", "Selected"),
                            ("REJECTED", "Rejected"),
                            ("EXPIRED", "Expired"),
                        ],
                        db_index=True,
                        default="PENDING",
                        max_length=20,
                    ),
                ),
                ("received_date", models.DateField(blank=True, null=True)),
                (
                    "valid_until",
                    models.DateField(
                        blank=True,
                        help_text="Quotation validity expiry date",
                        null=True,
                    ),
                ),
                (
                    "currency",
                    models.CharField(
                        choices=[
                            ("SAR", "Saudi Riyal (SAR)"),
                            ("USD", "US Dollar (USD)"),
                            ("EUR", "Euro (EUR)"),
                            ("GBP", "British Pound (GBP)"),
                            ("AED", "UAE Dirham (AED)"),
                            ("CNY", "Chinese Yuan (CNY)"),
                            ("JPY", "Japanese Yen (JPY)"),
                        ],
                        default="SAR",
                        max_length=3,
                    ),
                ),
                (
                    "payment_terms",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("NET_30", "Net 30 Days"),
                            ("NET_45", "Net 45 Days"),
                            ("NET_60", "Net 60 Days"),
                            ("NET_90", "Net 90 Days"),
                            ("PREPAID", "Prepaid"),
                            ("COD", "Cash on Delivery"),
                            ("LC_AT_SIGHT", "Letter of Credit - At Sight"),
                            ("LC_30", "Letter of Credit - 30 Days"),
                            ("LC_60", "Letter of Credit - 60 Days"),
                            ("LC_90", "Letter of Credit - 90 Days"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "incoterm",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("EXW", "EXW - Ex Works"),
                            ("FCA", "FCA - Free Carrier"),
                            ("CPT", "CPT - Carriage Paid To"),
                            ("CIP", "CIP - Carriage and Insurance Paid To"),
                            ("DAP", "DAP - Delivered at Place"),
                            ("DPU", "DPU - Delivered at Place Unloaded"),
                            ("DDP", "DDP - Delivered Duty Paid"),
                            ("FAS", "FAS - Free Alongside Ship"),
                            ("FOB", "FOB - Free on Board"),
                            ("CFR", "CFR - Cost and Freight"),
                            ("CIF", "CIF - Cost, Insurance and Freight"),
                        ],
                        max_length=3,
                    ),
                ),
                (
                    "delivery_lead_time_days",
                    models.IntegerField(
                        default=0, help_text="Promised delivery lead time"
                    ),
                ),
                (
                    "subtotal",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "discount_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "tax_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "shipping_cost",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "total_amount",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "technical_score",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="Technical evaluation score (0-100)",
                        max_digits=5,
                        null=True,
                    ),
                ),
                (
                    "commercial_score",
                    models.DecimalField(
                        blank=True,
                        decimal_places=2,
                        help_text="Commercial evaluation score (0-100)",
                        max_digits=5,
                        null=True,
                    ),
                ),
                (
                    "overall_score",
                    models.DecimalField(
                        blank=True, decimal_places=2, max_digits=5, null=True
                    ),
                ),
                ("evaluation_notes", models.TextField(blank=True)),
                ("evaluated_by_id", models.BigIntegerField(blank=True, null=True)),
                ("evaluated_at", models.DateTimeField(blank=True, null=True)),
                ("is_selected", models.BooleanField(db_index=True, default=False)),
                ("selection_reason", models.TextField(blank=True)),
                ("selected_by_id", models.BigIntegerField(blank=True, null=True)),
                ("selected_at", models.DateTimeField(blank=True, null=True)),
                (
                    "attachment_path",
                    models.CharField(
                        blank=True,
                        help_text="Path to uploaded quotation document",
                        max_length=500,
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                ("internal_notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "rfq",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="quotations",
                        to="purchasing.requestforquotation",
                    ),
                ),
                (
                    "supplier",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="quotations",
                        to="purchasing.supplier",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Supplier Quotation",
                "verbose_name_plural": "Supplier Quotations",
                "db_table": "purchasing_supplier_quotation",
                "ordering": ["-received_date"],
            },
        ),
        migrations.AddField(
            model_name="purchaseorder",
            name="supplier_quotation",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="purchase_orders",
                to="purchasing.supplierquotation",
            ),
        ),
        migrations.CreateModel(
            name="SupplierQuotationLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                (
                    "quantity_quoted",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "unit_price",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "total_price",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                ("supplier_part_number", models.CharField(blank=True, max_length=100)),
                ("manufacturer", models.CharField(blank=True, max_length=200)),
                ("brand", models.CharField(blank=True, max_length=100)),
                ("lead_time_days", models.IntegerField(default=0)),
                ("meets_specifications", models.BooleanField(default=True)),
                (
                    "deviation_notes",
                    models.TextField(
                        blank=True, help_text="Any deviations from specifications"
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "quotation",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.supplierquotation",
                    ),
                ),
                (
                    "rfq_line",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="quotation_lines",
                        to="purchasing.rfqline",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Quotation Line",
                "verbose_name_plural": "Quotation Lines",
                "db_table": "purchasing_quotation_line",
                "ordering": ["quotation", "line_number"],
            },
        ),
        migrations.AddField(
            model_name="purchaseorderline",
            name="quotation_line",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="po_lines",
                to="purchasing.supplierquotationline",
            ),
        ),
        migrations.CreateModel(
            name="TransferOrderLine",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True, db_index=True)),
                ("remarks", models.CharField(blank=True, default="", max_length=255)),
                ("line_number", models.PositiveIntegerField()),
                ("item_id", models.BigIntegerField(db_index=True)),
                ("item_code", models.CharField(max_length=50)),
                ("description", models.CharField(max_length=500)),
                (
                    "quantity_to_transfer",
                    models.DecimalField(
                        decimal_places=4,
                        max_digits=12,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "quantity_picked",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "quantity_shipped",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "quantity_received",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                ("uom", models.CharField(default="EA", max_length=20)),
                (
                    "unit_cost",
                    models.DecimalField(decimal_places=4, default=0, max_digits=12),
                ),
                (
                    "total_value",
                    models.DecimalField(decimal_places=2, default=0, max_digits=15),
                ),
                (
                    "serial_numbers",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Serial numbers being transferred",
                    ),
                ),
                ("batch_number", models.CharField(blank=True, max_length=50)),
                ("source_bin", models.CharField(blank=True, max_length=50)),
                ("destination_bin", models.CharField(blank=True, max_length=50)),
                ("is_fully_picked", models.BooleanField(default=False)),
                ("is_fully_received", models.BooleanField(default=False)),
                (
                    "qcode_id",
                    models.BigIntegerField(
                        blank=True, help_text="QR Code for tracking", null=True
                    ),
                ),
                ("notes", models.TextField(blank=True)),
                (
                    "created_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_created",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
                (
                    "transfer_order",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="lines",
                        to="purchasing.internaltransferorder",
                    ),
                ),
                (
                    "updated_by",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="%(app_label)s_%(class)s_updated",
                        to=settings.AUTH_USER_MODEL,
                    ),
                ),
            ],
            options={
                "verbose_name": "Transfer Line",
                "verbose_name_plural": "Transfer Lines",
                "db_table": "purchasing_transfer_line",
                "ordering": ["transfer_order", "line_number"],
            },
        ),
        migrations.AddIndex(
            model_name="internaltransferorder",
            index=models.Index(fields=["transfer_number"], name="ix_transfer_number"),
        ),
        migrations.AddIndex(
            model_name="internaltransferorder",
            index=models.Index(fields=["status"], name="ix_transfer_status"),
        ),
        migrations.AddIndex(
            model_name="internaltransferorder",
            index=models.Index(fields=["source_warehouse_id"], name="ix_transfer_src"),
        ),
        migrations.AddIndex(
            model_name="internaltransferorder",
            index=models.Index(
                fields=["destination_warehouse_id"], name="ix_transfer_dst"
            ),
        ),
        migrations.AddIndex(
            model_name="outboundshipment",
            index=models.Index(fields=["shipment_number"], name="ix_shipment_number"),
        ),
        migrations.AddIndex(
            model_name="outboundshipment",
            index=models.Index(fields=["status"], name="ix_shipment_status"),
        ),
        migrations.AddIndex(
            model_name="outboundshipment",
            index=models.Index(fields=["customer_id"], name="ix_shipment_customer"),
        ),
        migrations.AddIndex(
            model_name="customerreturn",
            index=models.Index(fields=["return_number"], name="ix_custret_number"),
        ),
        migrations.AddIndex(
            model_name="customerreturn",
            index=models.Index(fields=["status"], name="ix_custret_status"),
        ),
        migrations.AddIndex(
            model_name="customerreturn",
            index=models.Index(fields=["customer_id"], name="ix_custret_customer"),
        ),
        migrations.AddIndex(
            model_name="goodsreceiptnote",
            index=models.Index(fields=["grn_number"], name="ix_grn_number"),
        ),
        migrations.AddIndex(
            model_name="goodsreceiptnote",
            index=models.Index(fields=["status"], name="ix_grn_status"),
        ),
        migrations.AddIndex(
            model_name="goodsreceiptnote",
            index=models.Index(fields=["receipt_date"], name="ix_grn_date"),
        ),
        migrations.AddIndex(
            model_name="grnline",
            index=models.Index(fields=["item_id"], name="ix_grnline_item"),
        ),
        migrations.AlterUniqueTogether(
            name="grnline",
            unique_together={("grn", "line_number")},
        ),
        migrations.AddIndex(
            model_name="purchaserequisition",
            index=models.Index(fields=["pr_number"], name="ix_pr_number"),
        ),
        migrations.AddIndex(
            model_name="purchaserequisition",
            index=models.Index(fields=["status"], name="ix_pr_status"),
        ),
        migrations.AddIndex(
            model_name="purchaserequisition",
            index=models.Index(fields=["requester_id"], name="ix_pr_requester"),
        ),
        migrations.AddIndex(
            model_name="purchaserequisition",
            index=models.Index(fields=["department_id"], name="ix_pr_department"),
        ),
        migrations.AddIndex(
            model_name="purchaserequisition",
            index=models.Index(fields=["request_date"], name="ix_pr_date"),
        ),
        migrations.AddIndex(
            model_name="purchaserequisitionline",
            index=models.Index(fields=["pr", "line_number"], name="ix_prline_pr_line"),
        ),
        migrations.AddIndex(
            model_name="purchaserequisitionline",
            index=models.Index(fields=["item_id"], name="ix_prline_item"),
        ),
        migrations.AlterUniqueTogether(
            name="purchaserequisitionline",
            unique_together={("pr", "line_number")},
        ),
        migrations.AlterUniqueTogether(
            name="purchasereturnline",
            unique_together={("return_order", "line_number")},
        ),
        migrations.AddIndex(
            model_name="requestforquotation",
            index=models.Index(fields=["rfq_number"], name="ix_rfq_number"),
        ),
        migrations.AddIndex(
            model_name="requestforquotation",
            index=models.Index(fields=["status"], name="ix_rfq_status"),
        ),
        migrations.AddIndex(
            model_name="requestforquotation",
            index=models.Index(fields=["buyer_id"], name="ix_rfq_buyer"),
        ),
        migrations.AlterUniqueTogether(
            name="rfqline",
            unique_together={("rfq", "line_number")},
        ),
        migrations.AddIndex(
            model_name="shipmentline",
            index=models.Index(fields=["item_id"], name="ix_shpline_item"),
        ),
        migrations.AlterUniqueTogether(
            name="shipmentline",
            unique_together={("shipment", "line_number")},
        ),
        migrations.AlterUniqueTogether(
            name="customerreturnline",
            unique_together={("customer_return", "line_number")},
        ),
        migrations.AddIndex(
            model_name="supplier",
            index=models.Index(fields=["code"], name="ix_supplier_code"),
        ),
        migrations.AddIndex(
            model_name="supplier",
            index=models.Index(fields=["name"], name="ix_supplier_name"),
        ),
        migrations.AddIndex(
            model_name="supplier",
            index=models.Index(fields=["status"], name="ix_supplier_status"),
        ),
        migrations.AddIndex(
            model_name="supplier",
            index=models.Index(fields=["classification"], name="ix_supplier_class"),
        ),
        migrations.AlterUniqueTogether(
            name="rfqsupplier",
            unique_together={("rfq", "supplier")},
        ),
        migrations.AddIndex(
            model_name="purchasereturn",
            index=models.Index(fields=["return_number"], name="ix_return_number"),
        ),
        migrations.AddIndex(
            model_name="purchasereturn",
            index=models.Index(fields=["status"], name="ix_return_status"),
        ),
        migrations.AddIndex(
            model_name="purchasereturn",
            index=models.Index(fields=["supplier"], name="ix_return_supplier"),
        ),
        migrations.AddIndex(
            model_name="supplierinvoice",
            index=models.Index(fields=["internal_reference"], name="ix_sinv_ref"),
        ),
        migrations.AddIndex(
            model_name="supplierinvoice",
            index=models.Index(fields=["status"], name="ix_sinv_status"),
        ),
        migrations.AddIndex(
            model_name="supplierinvoice",
            index=models.Index(fields=["payment_status"], name="ix_sinv_payment"),
        ),
        migrations.AddIndex(
            model_name="supplierinvoice",
            index=models.Index(fields=["supplier"], name="ix_sinv_supplier"),
        ),
        migrations.AddIndex(
            model_name="supplierinvoice",
            index=models.Index(fields=["due_date"], name="ix_sinv_due_date"),
        ),
        migrations.AlterUniqueTogether(
            name="supplierinvoice",
            unique_together={("supplier", "invoice_number")},
        ),
        migrations.AlterUniqueTogether(
            name="supplierinvoiceline",
            unique_together={("invoice", "line_number")},
        ),
        migrations.AddIndex(
            model_name="supplieritem",
            index=models.Index(
                fields=["supplier", "item_id"], name="ix_supitem_sup_item"
            ),
        ),
        migrations.AddIndex(
            model_name="supplieritem",
            index=models.Index(fields=["item_id"], name="ix_supitem_item"),
        ),
        migrations.AddIndex(
            model_name="supplieritem",
            index=models.Index(fields=["is_preferred"], name="ix_supitem_preferred"),
        ),
        migrations.AlterUniqueTogether(
            name="supplieritem",
            unique_together={("supplier", "item_id")},
        ),
        migrations.AddIndex(
            model_name="supplierquotation",
            index=models.Index(fields=["status"], name="ix_squo_status"),
        ),
        migrations.AddIndex(
            model_name="supplierquotation",
            index=models.Index(fields=["is_selected"], name="ix_squo_selected"),
        ),
        migrations.AlterUniqueTogether(
            name="supplierquotation",
            unique_together={("rfq", "supplier")},
        ),
        migrations.AddIndex(
            model_name="purchaseorder",
            index=models.Index(fields=["po_number"], name="ix_po_number"),
        ),
        migrations.AddIndex(
            model_name="purchaseorder",
            index=models.Index(fields=["status"], name="ix_po_status"),
        ),
        migrations.AddIndex(
            model_name="purchaseorder",
            index=models.Index(fields=["supplier"], name="ix_po_supplier"),
        ),
        migrations.AddIndex(
            model_name="purchaseorder",
            index=models.Index(fields=["buyer_id"], name="ix_po_buyer"),
        ),
        migrations.AddIndex(
            model_name="purchaseorder",
            index=models.Index(fields=["order_date"], name="ix_po_date"),
        ),
        migrations.AddIndex(
            model_name="purchaseorderline",
            index=models.Index(fields=["po", "line_number"], name="ix_poline_po_line"),
        ),
        migrations.AddIndex(
            model_name="purchaseorderline",
            index=models.Index(fields=["item_id"], name="ix_poline_item"),
        ),
        migrations.AlterUniqueTogether(
            name="purchaseorderline",
            unique_together={("po", "line_number")},
        ),
        migrations.AddIndex(
            model_name="transferorderline",
            index=models.Index(fields=["item_id"], name="ix_transline_item"),
        ),
        migrations.AlterUniqueTogether(
            name="transferorderline",
            unique_together={("transfer_order", "line_number")},
        ),
    ]
