# Generated by Django 5.2.6 on 2025-11-17 00:04

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AttributeDefinition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(db_index=True, help_text='Unique attribute code (e.g., CUTTER_DIAMETER)', max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, default='')),
                ('data_type', models.CharField(choices=[('TEXT', 'Text'), ('NUMBER', 'Number'), ('INTEGER', 'Integer'), ('BOOLEAN', 'Boolean'), ('DATE', 'Date'), ('DATETIME', 'Date & Time'), ('CHOICE', 'Choice from List'), ('URL', 'URL')], help_text='Type of data this attribute holds', max_length=20)),
                ('choice_options', models.JSONField(blank=True, help_text="For CHOICE type: list of valid options ['option1', 'option2']", null=True)),
                ('validation_rules', models.JSONField(blank=True, help_text="Validation rules as JSON: {'min': 0, 'max': 100, 'pattern': 'regex', 'required_chars': 5}", null=True)),
                ('sort_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Attribute Definition',
                'verbose_name_plural': 'Attribute Definitions',
                'db_table': 'inventory_attribute_definition',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='BitDesignLevel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(help_text='Level code (e.g., L3, L4, L5)', max_length=10, unique=True)),
                ('name', models.CharField(help_text='Human-readable name', max_length=100)),
                ('description', models.TextField(help_text='Detailed description of what this level includes')),
                ('sort_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Bit Design Level',
                'verbose_name_plural': 'Bit Design Levels',
                'db_table': 'inventory_bit_design_level',
                'ordering': ['sort_order', 'code'],
            },
        ),
        migrations.CreateModel(
            name='BitDesignType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(help_text='Type code (e.g., HDBS, SMI)', max_length=30, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, default='')),
                ('sort_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Bit Design Type',
                'verbose_name_plural': 'Bit Design Types',
                'db_table': 'inventory_bit_design_type',
                'ordering': ['sort_order', 'code'],
            },
        ),
        migrations.CreateModel(
            name='ConditionType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(help_text='Unique code identifier (e.g., NEW, RECLAIM_AS_NEW)', max_length=30, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, default='')),
                ('sort_order', models.IntegerField(default=0, help_text='Display order in UI')),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Condition Type',
                'verbose_name_plural': 'Condition Types',
                'db_table': 'inventory_condition_type',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='OwnershipType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(help_text='Unique code identifier (e.g., ARDT, ENO, CUSTOMER_ARAMCO)', max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('is_internal', models.BooleanField(default=False, help_text='True if owned by ARDT or internal bucket (ENO)')),
                ('is_consignment', models.BooleanField(default=False, help_text='True if customer/partner consignment stock')),
                ('description', models.TextField(blank=True, default='')),
                ('sort_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Ownership Type',
                'verbose_name_plural': 'Ownership Types',
                'db_table': 'inventory_ownership_type',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='BitDesign',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('design_code', models.CharField(db_index=True, help_text='Internal design code (e.g., HP-X123)', max_length=50, unique=True)),
                ('name', models.CharField(blank=True, default='', help_text='Descriptive name for the design', max_length=200)),
                ('size_inches', models.DecimalField(blank=True, decimal_places=2, help_text='Bit size in inches (e.g., 8.50, 12.25)', max_digits=4, null=True)),
                ('connection_type', models.CharField(blank=True, default='', help_text='Connection type (e.g., 4-1/2 API REG, 6-5/8 REG)', max_length=50)),
                ('blade_count', models.IntegerField(blank=True, help_text='Number of blades', null=True)),
                ('total_cutter_count', models.IntegerField(blank=True, help_text='Total number of cutters for L5 designs', null=True)),
                ('nozzle_count', models.IntegerField(blank=True, null=True)),
                ('tfa_range', models.CharField(blank=True, default='', help_text='Total Flow Area range', max_length=50)),
                ('description', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('level', models.ForeignKey(help_text='Design level (L3/L4/L5)', on_delete=django.db.models.deletion.PROTECT, related_name='designs', to='inventory.bitdesignlevel')),
            ],
            options={
                'verbose_name': 'Bit Design',
                'verbose_name_plural': 'Bit Designs',
                'db_table': 'inventory_bit_design',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BitDesignRevision',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('mat_number', models.CharField(db_index=True, help_text='Full MAT number (e.g., HP-X123-M2, HP-X123-SN12345)', max_length=50, unique=True)),
                ('revision_code', models.CharField(help_text='Revision identifier within the design (e.g., M0, M1, M2)', max_length=20)),
                ('is_temporary', models.BooleanField(db_index=True, default=False, help_text='True if this is a temporary MAT (pending official L5)')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False when superseded or obsoleted')),
                ('effective_date', models.DateField(blank=True, help_text='Date when this revision becomes effective', null=True)),
                ('obsolete_date', models.DateField(blank=True, help_text='Date when this revision was obsoleted', null=True)),
                ('change_reason', models.TextField(blank=True, default='', help_text='Reason for this revision (ECN reference, design change, etc.)')),
                ('notes', models.TextField(blank=True, default='')),
                ('bit_design', models.ForeignKey(help_text='Parent conceptual design', on_delete=django.db.models.deletion.PROTECT, related_name='revisions', to='inventory.bitdesign')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('superseded_by', models.ForeignKey(blank=True, help_text='Newer revision that replaces this one', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supersedes', to='inventory.bitdesignrevision')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('design_type', models.ForeignKey(blank=True, help_text='Design family/type (can be overridden per revision)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='revisions', to='inventory.bitdesigntype')),
            ],
            options={
                'verbose_name': 'Bit Design Revision (MAT)',
                'verbose_name_plural': 'Bit Design Revisions (MATs)',
                'db_table': 'inventory_bit_design_revision',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BOMHeader',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('bom_number', models.CharField(db_index=True, help_text='BOM number/code (e.g., BOM-HP-X123-M2-PROD)', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Descriptive name for this BOM', max_length=200)),
                ('description', models.TextField(blank=True, default='')),
                ('bom_type', models.CharField(choices=[('PRODUCTION', 'Production (New Assembly)'), ('RETROFIT', 'Retrofit (Design Change)'), ('REPAIR', 'Repair (Component Replacement)'), ('TEMPLATE', 'Generic Template'), ('DISASSEMBLY', 'Disassembly BOM')], default='PRODUCTION', help_text='Type of BOM', max_length=20)),
                ('revision', models.CharField(default='A', help_text='BOM revision (A, B, C... or 1, 2, 3...)', max_length=10)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('PENDING_APPROVAL', 'Pending Approval'), ('APPROVED', 'Approved'), ('ACTIVE', 'Active'), ('OBSOLETE', 'Obsolete')], db_index=True, default='DRAFT', max_length=20)),
                ('effective_date', models.DateField(blank=True, help_text='Date when this BOM becomes effective', null=True)),
                ('obsolete_date', models.DateField(blank=True, help_text='Date when this BOM becomes obsolete', null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False when superseded or obsoleted')),
                ('estimated_labor_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Estimated labor hours to complete', max_digits=8, null=True)),
                ('estimated_material_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Estimated total material cost', max_digits=12, null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('source_mat', models.ForeignKey(blank=True, help_text='For RETROFIT: the source MAT being converted', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='retrofit_source_boms', to='inventory.bitdesignrevision')),
                ('superseded_by', models.ForeignKey(blank=True, help_text='Newer BOM that replaces this one', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supersedes', to='inventory.bomheader')),
                ('target_mat', models.ForeignKey(help_text='Target MAT revision this BOM produces/repairs', on_delete=django.db.models.deletion.PROTECT, related_name='boms', to='inventory.bitdesignrevision')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'BOM Header',
                'verbose_name_plural': 'BOM Headers',
                'db_table': 'inventory_bom_header',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Item',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('sku', models.CharField(db_index=True, help_text='Internal Stock Keeping Unit / Item Code', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Full descriptive name', max_length=200)),
                ('short_name', models.CharField(blank=True, default='', help_text='Abbreviated name for displays', max_length=50)),
                ('min_stock_qty', models.DecimalField(decimal_places=2, default=0, help_text='Minimum quantity to maintain in stock', max_digits=10)),
                ('reorder_point', models.DecimalField(decimal_places=2, default=0, help_text='Quantity at which to reorder', max_digits=10)),
                ('reorder_qty', models.DecimalField(blank=True, decimal_places=2, help_text='Standard quantity to reorder', max_digits=10, null=True)),
                ('safety_stock', models.DecimalField(decimal_places=2, default=0, help_text='Safety buffer quantity', max_digits=10)),
                ('lead_time_days', models.IntegerField(blank=True, help_text='Standard lead time for procurement/production', null=True)),
                ('standard_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Standard cost per unit', max_digits=12, null=True)),
                ('last_purchase_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Cost from most recent purchase', max_digits=12, null=True)),
                ('currency', models.CharField(default='SAR', help_text='Currency code (ISO 4217)', max_length=3)),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='False to discontinue item')),
                ('is_purchasable', models.BooleanField(default=True, help_text='Can be purchased from suppliers')),
                ('is_producible', models.BooleanField(default=False, help_text='Can be manufactured/assembled in-house')),
                ('is_sellable', models.BooleanField(default=False, help_text='Can be sold to customers')),
                ('is_stockable', models.BooleanField(default=True, help_text='Is physically stocked (False for services)')),
                ('primary_supplier', models.CharField(blank=True, default='', help_text='Primary supplier name (FK to Supplier table in future)', max_length=200)),
                ('manufacturer_part_number', models.CharField(blank=True, default='', help_text="Manufacturer's part number", max_length=100)),
                ('manufacturer_name', models.CharField(blank=True, default='', help_text='Manufacturer name', max_length=200)),
                ('weight_kg', models.DecimalField(blank=True, decimal_places=4, help_text='Unit weight in kilograms', max_digits=10, null=True)),
                ('volume_cbm', models.DecimalField(blank=True, decimal_places=6, help_text='Unit volume in cubic meters', max_digits=10, null=True)),
                ('description', models.TextField(blank=True, default='', help_text='Detailed item description')),
                ('notes', models.TextField(blank=True, default='', help_text='Internal notes')),
                ('barcode', models.CharField(blank=True, db_index=True, default='', help_text='Barcode value (EAN, UPC, etc.)', max_length=100)),
                ('alternative_codes', models.JSONField(blank=True, help_text="Additional codes: {'old_sku': 'XXX', 'supplier_code': 'YYY'}", null=True)),
                ('bit_design_revision', models.ForeignKey(blank=True, help_text='For bit-related items: the specific MAT/design revision', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='items', to='inventory.bitdesignrevision')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Item',
                'verbose_name_plural': 'Items',
                'db_table': 'inventory_item',
                'ordering': ['sku'],
            },
        ),
        migrations.CreateModel(
            name='ItemAttributeValue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value_text', models.TextField(blank=True, default='', help_text='Value for TEXT, CHOICE, URL types')),
                ('value_number', models.DecimalField(blank=True, decimal_places=6, help_text='Value for NUMBER type', max_digits=15, null=True)),
                ('value_integer', models.BigIntegerField(blank=True, help_text='Value for INTEGER type', null=True)),
                ('value_boolean', models.BooleanField(blank=True, help_text='Value for BOOLEAN type', null=True)),
                ('value_date', models.DateField(blank=True, help_text='Value for DATE type', null=True)),
                ('value_datetime', models.DateTimeField(blank=True, help_text='Value for DATETIME type', null=True)),
                ('attribute', models.ForeignKey(help_text='Attribute definition', on_delete=django.db.models.deletion.CASCADE, related_name='item_values', to='inventory.attributedefinition')),
                ('item', models.ForeignKey(help_text='Item this value belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='attribute_values', to='inventory.item')),
            ],
            options={
                'verbose_name': 'Item Attribute Value',
                'verbose_name_plural': 'Item Attribute Values',
                'db_table': 'inventory_item_attribute_value',
            },
        ),
        migrations.CreateModel(
            name='ItemCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('code', models.CharField(help_text='Unique category code (e.g., BIT_FULL_ASSEMBLY)', max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, default='')),
                ('is_serialized', models.BooleanField(default=False, help_text='True if items in this category are tracked individually by serial number')),
                ('is_bit_related', models.BooleanField(default=False, help_text='True if this category is related to bit designs')),
                ('icon', models.CharField(blank=True, default='', help_text='Icon name for UI display (optional)', max_length=50)),
                ('sort_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent_category', models.ForeignKey(blank=True, help_text='Parent category for hierarchical organization', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='subcategories', to='inventory.itemcategory')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Item Category',
                'verbose_name_plural': 'Item Categories',
                'db_table': 'inventory_item_category',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.AddField(
            model_name='item',
            name='category',
            field=models.ForeignKey(help_text='Item category (determines if serialized, bit-related, etc.)', on_delete=django.db.models.deletion.PROTECT, related_name='items', to='inventory.itemcategory'),
        ),
        migrations.CreateModel(
            name='CategoryAttributeMap',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_required', models.BooleanField(default=False, help_text='True if this attribute is mandatory for items in this category')),
                ('default_value', models.TextField(blank=True, default='', help_text='Default value for new items (if applicable)')),
                ('sort_order', models.IntegerField(default=0, help_text='Display order within the category')),
                ('attribute', models.ForeignKey(help_text='Attribute to map to this category', on_delete=django.db.models.deletion.CASCADE, related_name='category_mappings', to='inventory.attributedefinition')),
                ('category', models.ForeignKey(help_text='Item category', on_delete=django.db.models.deletion.CASCADE, related_name='attribute_mappings', to='inventory.itemcategory')),
            ],
            options={
                'verbose_name': 'Category Attribute Map',
                'verbose_name_plural': 'Category Attribute Maps',
                'db_table': 'inventory_category_attribute_map',
                'ordering': ['category', 'sort_order'],
            },
        ),
        migrations.CreateModel(
            name='Location',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('code', models.CharField(db_index=True, help_text='Location code (e.g., WH-01, BIN-A1-01)', max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('location_type', models.CharField(choices=[('WAREHOUSE', 'Warehouse'), ('ZONE', 'Warehouse Zone'), ('BIN', 'Storage Bin'), ('RIG', 'Drilling Rig'), ('CUSTOMER_SITE', 'Customer Site'), ('REPAIR_SHOP', 'Repair Shop'), ('INSPECTION', 'Inspection Area'), ('QUARANTINE', 'Quarantine Area'), ('TRANSIT', 'In Transit'), ('SCRAP', 'Scrap/Disposal'), ('OTHER', 'Other')], default='BIN', max_length=20)),
                ('address', models.TextField(blank=True, default='')),
                ('gps_coordinates', models.CharField(blank=True, default='', help_text='GPS coordinates (lat,long)', max_length=100)),
                ('max_capacity', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum storage capacity (units or volume)', max_digits=12, null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('parent_location', models.ForeignKey(blank=True, help_text='Parent location for hierarchical organization', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='child_locations', to='inventory.location')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Location',
                'verbose_name_plural': 'Locations',
                'db_table': 'inventory_location',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='InventoryStock',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('quantity_on_hand', models.DecimalField(decimal_places=4, default=0, help_text='Total quantity physically present', max_digits=12)),
                ('quantity_reserved', models.DecimalField(decimal_places=4, default=0, help_text='Quantity reserved for orders/jobs', max_digits=12)),
                ('quantity_on_order', models.DecimalField(decimal_places=4, default=0, help_text='Quantity on purchase/production orders', max_digits=12)),
                ('reorder_point', models.DecimalField(blank=True, decimal_places=4, help_text='Location-specific reorder point', max_digits=12, null=True)),
                ('safety_stock', models.DecimalField(blank=True, decimal_places=4, help_text='Location-specific safety stock', max_digits=12, null=True)),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Average unit cost at this location', max_digits=12, null=True)),
                ('last_counted_at', models.DateTimeField(blank=True, help_text='Last physical inventory count date', null=True)),
                ('last_movement_at', models.DateTimeField(blank=True, help_text='Last stock movement date', null=True)),
                ('condition', models.ForeignKey(help_text='Physical condition', on_delete=django.db.models.deletion.PROTECT, related_name='inventory_stocks', to='inventory.conditiontype')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('item', models.ForeignKey(help_text='Item master record', on_delete=django.db.models.deletion.PROTECT, related_name='inventory_stocks', to='inventory.item')),
                ('location', models.ForeignKey(blank=True, help_text='Storage location', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='inventory_stocks', to='inventory.location')),
                ('ownership', models.ForeignKey(help_text='Ownership (ARDT, ENO, customer, etc.)', on_delete=django.db.models.deletion.PROTECT, related_name='inventory_stocks', to='inventory.ownershiptype')),
            ],
            options={
                'verbose_name': 'Inventory Stock',
                'verbose_name_plural': 'Inventory Stocks',
                'db_table': 'inventory_stock',
                'ordering': ['item__sku', 'location__code'],
            },
        ),
        migrations.CreateModel(
            name='SerialUnit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('serial_number', models.CharField(db_index=True, help_text='Unique serial number for this physical unit', max_length=100, unique=True)),
                ('status', models.CharField(choices=[('IN_STOCK', 'In Stock'), ('RESERVED', 'Reserved'), ('AT_RIG', 'At Drilling Rig'), ('UNDER_REPAIR', 'Under Repair'), ('UNDER_INSPECTION', 'Under Inspection'), ('IN_TRANSIT', 'In Transit'), ('SCRAPPED', 'Scrapped'), ('SOLD', 'Sold'), ('LOST', 'Lost')], db_index=True, default='IN_STOCK', max_length=20)),
                ('manufacture_date', models.DateField(blank=True, help_text='Date of manufacture/assembly', null=True)),
                ('received_date', models.DateField(blank=True, help_text='Date received into inventory', null=True)),
                ('last_run_date', models.DateField(blank=True, help_text='Date of last drilling run', null=True)),
                ('warranty_expiry', models.DateField(blank=True, help_text='Warranty expiration date', null=True)),
                ('total_run_hours', models.DecimalField(decimal_places=2, default=0, help_text='Total drilling hours', max_digits=10)),
                ('total_footage_drilled', models.DecimalField(decimal_places=2, default=0, help_text='Total footage drilled (feet or meters)', max_digits=12)),
                ('run_count', models.IntegerField(default=0, help_text='Number of times this bit has been run')),
                ('acquisition_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Original acquisition cost', max_digits=12, null=True)),
                ('current_book_value', models.DecimalField(blank=True, decimal_places=4, help_text='Current book value after depreciation', max_digits=12, null=True)),
                ('current_customer', models.CharField(blank=True, default='', help_text='Current customer using this unit', max_length=200)),
                ('current_job_reference', models.CharField(blank=True, default='', help_text='Current job card or work order reference', max_length=100)),
                ('notes', models.TextField(blank=True, default='')),
                ('condition', models.ForeignKey(help_text='Current physical condition', on_delete=django.db.models.deletion.PROTECT, related_name='serial_units', to='inventory.conditiontype')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('current_mat', models.ForeignKey(blank=True, help_text='Current MAT revision (may differ from Item after retrofit)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='serial_units', to='inventory.bitdesignrevision')),
                ('item', models.ForeignKey(help_text='Item master record this unit belongs to', on_delete=django.db.models.deletion.PROTECT, related_name='serial_units', to='inventory.item')),
                ('location', models.ForeignKey(blank=True, help_text='Current physical location', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='serial_units', to='inventory.location')),
                ('ownership', models.ForeignKey(help_text='Current ownership (ARDT, ENO, customer, etc.)', on_delete=django.db.models.deletion.PROTECT, related_name='serial_units', to='inventory.ownershiptype')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Serial Unit',
                'verbose_name_plural': 'Serial Units',
                'db_table': 'inventory_serial_unit',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SerialUnitMATHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reason', models.CharField(choices=[('RETROFIT', 'Retrofit'), ('CORRECTION', 'Data Correction'), ('UPGRADE', 'Design Upgrade'), ('DOWNGRADE', 'Design Downgrade'), ('TESTING', 'Testing Configuration'), ('OTHER', 'Other')], default='RETROFIT', max_length=20)),
                ('changed_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('notes', models.TextField(blank=True, default='')),
                ('changed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mat_changes', to=settings.AUTH_USER_MODEL)),
                ('new_mat', models.ForeignKey(help_text='New MAT revision', on_delete=django.db.models.deletion.PROTECT, related_name='history_as_new', to='inventory.bitdesignrevision')),
                ('old_mat', models.ForeignKey(blank=True, help_text='Previous MAT revision (null if first assignment)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='history_as_old', to='inventory.bitdesignrevision')),
                ('serial_unit', models.ForeignKey(help_text='Serial unit that was modified', on_delete=django.db.models.deletion.CASCADE, related_name='mat_history', to='inventory.serialunit')),
            ],
            options={
                'verbose_name': 'Serial Unit MAT History',
                'verbose_name_plural': 'Serial Unit MAT Histories',
                'db_table': 'inventory_serial_unit_mat_history',
                'ordering': ['-changed_at'],
            },
        ),
        migrations.CreateModel(
            name='UnitOfMeasure',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(help_text='Short code (e.g., PC, KG, L)', max_length=10, unique=True)),
                ('name', models.CharField(max_length=50)),
                ('uom_type', models.CharField(choices=[('COUNT', 'Count/Quantity'), ('WEIGHT', 'Weight'), ('VOLUME', 'Volume'), ('LENGTH', 'Length'), ('AREA', 'Area'), ('TIME', 'Time'), ('OTHER', 'Other')], default='COUNT', max_length=20)),
                ('conversion_factor', models.DecimalField(blank=True, decimal_places=6, help_text='Multiply by this to convert to base unit', max_digits=15, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('base_uom', models.ForeignKey(blank=True, help_text='Base unit for conversion (e.g., grams for kg)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='derived_units', to='inventory.unitofmeasure')),
            ],
            options={
                'verbose_name': 'Unit of Measure',
                'verbose_name_plural': 'Units of Measure',
                'db_table': 'inventory_unit_of_measure',
                'ordering': ['uom_type', 'code'],
            },
        ),
        migrations.AddField(
            model_name='location',
            name='capacity_uom',
            field=models.ForeignKey(blank=True, help_text='Unit of measure for capacity', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='capacity_locations', to='inventory.unitofmeasure'),
        ),
        migrations.AddField(
            model_name='item',
            name='uom',
            field=models.ForeignKey(help_text='Default unit of measure for this item', on_delete=django.db.models.deletion.PROTECT, related_name='items', to='inventory.unitofmeasure', verbose_name='Unit of Measure'),
        ),
        migrations.CreateModel(
            name='InventoryTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('posting_ts', models.DateTimeField(db_index=True, default=django.utils.timezone.now)),
                ('transaction_number', models.CharField(db_index=True, help_text='System-generated transaction number', max_length=50, unique=True)),
                ('transaction_type', models.CharField(choices=[('RECEIPT', 'Receipt'), ('ISSUE', 'Issue'), ('TRANSFER', 'Transfer'), ('ADJUSTMENT', 'Adjustment'), ('SCRAP', 'Scrap/Disposal'), ('CONDITION_CHANGE', 'Condition Change'), ('OWNERSHIP_CHANGE', 'Ownership Transfer'), ('RESERVE', 'Reserve Stock'), ('UNRESERVE', 'Unreserve Stock'), ('RETROFIT', 'Retrofit'), ('PRODUCTION', 'Production Output'), ('CONSUMPTION', 'Production Consumption'), ('RETURN', 'Return to Stock'), ('RECLASSIFICATION', 'Reclassification')], db_index=True, help_text='Type of inventory transaction', max_length=20)),
                ('transaction_date', models.DateTimeField(db_index=True, default=django.utils.timezone.now, help_text='Date/time of transaction')),
                ('quantity', models.DecimalField(decimal_places=4, help_text='Quantity changed (positive for increase, negative for decrease)', max_digits=12)),
                ('reference_type', models.CharField(blank=True, db_index=True, default='', help_text='Type of reference document (PO, WO, JOB_CARD, INVOICE, etc.)', max_length=50)),
                ('reference_id', models.CharField(blank=True, db_index=True, default='', help_text='Reference document ID/number', max_length=100)),
                ('batch_id', models.BigIntegerField(blank=True, db_index=True, help_text='Batch ID (for future batch system integration)', null=True)),
                ('job_card_id', models.BigIntegerField(blank=True, db_index=True, help_text='Job Card ID (for future job card system integration)', null=True)),
                ('work_order_id', models.BigIntegerField(blank=True, db_index=True, help_text='Work Order ID (for future WO system integration)', null=True)),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Cost per unit at time of transaction', max_digits=12, null=True)),
                ('total_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Total transaction cost', max_digits=14, null=True)),
                ('currency', models.CharField(default='SAR', help_text='Currency code', max_length=3)),
                ('reason_code', models.CharField(blank=True, default='', help_text='Reason code for the transaction', max_length=50)),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes/comments')),
                ('is_reversed', models.BooleanField(default=False, help_text='True if this transaction was reversed')),
                ('created_by', models.ForeignKey(blank=True, help_text='User who created this transaction', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_transactions', to=settings.AUTH_USER_MODEL)),
                ('from_condition', models.ForeignKey(blank=True, help_text='Source condition', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_from', to='inventory.conditiontype')),
                ('from_mat', models.ForeignKey(blank=True, help_text='Source MAT (for retrofit)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_from_mat', to='inventory.bitdesignrevision')),
                ('reversed_by', models.ForeignKey(blank=True, help_text='Transaction that reversed this one', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reverses', to='inventory.inventorytransaction')),
                ('to_condition', models.ForeignKey(blank=True, help_text='Destination condition', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_to', to='inventory.conditiontype')),
                ('to_mat', models.ForeignKey(blank=True, help_text='Target MAT (for retrofit)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_to_mat', to='inventory.bitdesignrevision')),
                ('item', models.ForeignKey(blank=True, help_text='Item for non-serialized transactions', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='transactions', to='inventory.item')),
                ('from_location', models.ForeignKey(blank=True, help_text='Source location', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_out', to='inventory.location')),
                ('to_location', models.ForeignKey(blank=True, help_text='Destination location', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_in', to='inventory.location')),
                ('from_ownership', models.ForeignKey(blank=True, help_text='Source ownership', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_from', to='inventory.ownershiptype')),
                ('to_ownership', models.ForeignKey(blank=True, help_text='Destination ownership', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transactions_to', to='inventory.ownershiptype')),
                ('serial_unit', models.ForeignKey(blank=True, help_text='Serial unit for serialized transactions', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='transactions', to='inventory.serialunit')),
                ('uom', models.ForeignKey(blank=True, help_text='Unit of measure', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='transactions', to='inventory.unitofmeasure')),
            ],
            options={
                'verbose_name': 'Inventory Transaction',
                'verbose_name_plural': 'Inventory Transactions',
                'db_table': 'inventory_transaction',
                'ordering': ['-transaction_date', '-id'],
            },
        ),
        migrations.CreateModel(
            name='BOMLine',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('line_number', models.IntegerField(help_text='Line sequence number within the BOM')),
                ('quantity_required', models.DecimalField(decimal_places=4, help_text='Quantity of component required per unit', max_digits=10)),
                ('is_optional', models.BooleanField(default=False, help_text='True if this component is optional')),
                ('is_alternative', models.BooleanField(default=False, help_text='True if this is an alternative to another line')),
                ('alternative_group', models.CharField(blank=True, default='', help_text='Group ID for alternative components (choose one from group)', max_length=20)),
                ('scrap_factor', models.DecimalField(decimal_places=2, default=0, help_text='Extra percentage for scrap/waste (e.g., 5.00 for 5%)', max_digits=5)),
                ('position_reference', models.CharField(blank=True, default='', help_text="Position reference in assembly (e.g., 'Blade 1 Position 3')", max_length=50)),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=4, help_text='Unit cost for this component', max_digits=12, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('bom_header', models.ForeignKey(help_text='Parent BOM header', on_delete=django.db.models.deletion.CASCADE, related_name='lines', to='inventory.bomheader')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('required_condition', models.ForeignKey(blank=True, help_text='Component must be in this condition (e.g., NEW only)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bom_line_requirements', to='inventory.conditiontype')),
                ('component_item', models.ForeignKey(help_text='Item to be used as component', on_delete=django.db.models.deletion.PROTECT, related_name='bom_usages', to='inventory.item')),
                ('required_ownership', models.ForeignKey(blank=True, help_text='Component must have this ownership', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bom_line_requirements', to='inventory.ownershiptype')),
                ('uom', models.ForeignKey(help_text='Unit of measure for quantity', on_delete=django.db.models.deletion.PROTECT, related_name='bom_lines', to='inventory.unitofmeasure')),
            ],
            options={
                'verbose_name': 'BOM Line',
                'verbose_name_plural': 'BOM Lines',
                'db_table': 'inventory_bom_line',
                'ordering': ['bom_header', 'line_number'],
            },
        ),
        migrations.AddField(
            model_name='attributedefinition',
            name='default_uom',
            field=models.ForeignKey(blank=True, help_text='Default unit of measure for NUMBER attributes', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='attributes', to='inventory.unitofmeasure'),
        ),
        migrations.AddIndex(
            model_name='bitdesign',
            index=models.Index(fields=['design_code'], name='ix_bd_design_code'),
        ),
        migrations.AddIndex(
            model_name='bitdesign',
            index=models.Index(fields=['level', 'size_inches'], name='ix_bd_level_size'),
        ),
        migrations.AddIndex(
            model_name='bitdesignrevision',
            index=models.Index(fields=['mat_number'], name='ix_bdr_mat_number'),
        ),
        migrations.AddIndex(
            model_name='bitdesignrevision',
            index=models.Index(fields=['bit_design', 'is_active'], name='ix_bdr_design_active'),
        ),
        migrations.AddIndex(
            model_name='bitdesignrevision',
            index=models.Index(fields=['design_type'], name='ix_bdr_design_type'),
        ),
        migrations.AddIndex(
            model_name='bitdesignrevision',
            index=models.Index(fields=['is_temporary', 'is_active'], name='ix_bdr_temp_active'),
        ),
        migrations.AddConstraint(
            model_name='bitdesignrevision',
            constraint=models.UniqueConstraint(fields=('bit_design', 'revision_code'), name='uq_bdr_design_revision'),
        ),
        migrations.AddIndex(
            model_name='bomheader',
            index=models.Index(fields=['bom_number'], name='ix_bom_number'),
        ),
        migrations.AddIndex(
            model_name='bomheader',
            index=models.Index(fields=['target_mat', 'is_active'], name='ix_bom_target_active'),
        ),
        migrations.AddIndex(
            model_name='bomheader',
            index=models.Index(fields=['bom_type', 'status'], name='ix_bom_type_status'),
        ),
        migrations.AddIndex(
            model_name='itemattributevalue',
            index=models.Index(fields=['item'], name='ix_iav_item'),
        ),
        migrations.AddIndex(
            model_name='itemattributevalue',
            index=models.Index(fields=['attribute'], name='ix_iav_attribute'),
        ),
        migrations.AddConstraint(
            model_name='itemattributevalue',
            constraint=models.UniqueConstraint(fields=('item', 'attribute'), name='uq_item_attr_value'),
        ),
        migrations.AddConstraint(
            model_name='categoryattributemap',
            constraint=models.UniqueConstraint(fields=('category', 'attribute'), name='uq_cat_attr_map'),
        ),
        migrations.AddIndex(
            model_name='inventorystock',
            index=models.Index(fields=['item', 'location'], name='ix_stock_item_loc'),
        ),
        migrations.AddIndex(
            model_name='inventorystock',
            index=models.Index(fields=['location', 'condition'], name='ix_stock_loc_cond'),
        ),
        migrations.AddIndex(
            model_name='inventorystock',
            index=models.Index(fields=['ownership'], name='ix_stock_ownership'),
        ),
        migrations.AddConstraint(
            model_name='inventorystock',
            constraint=models.UniqueConstraint(fields=('item', 'location', 'condition', 'ownership'), name='uq_stock_dimension'),
        ),
        migrations.AddConstraint(
            model_name='inventorystock',
            constraint=models.CheckConstraint(condition=models.Q(('quantity_on_hand__gte', 0)), name='ck_stock_qty_positive'),
        ),
        migrations.AddConstraint(
            model_name='inventorystock',
            constraint=models.CheckConstraint(condition=models.Q(('quantity_reserved__gte', 0)), name='ck_stock_reserved_positive'),
        ),
        migrations.AddIndex(
            model_name='serialunit',
            index=models.Index(fields=['serial_number'], name='ix_su_serial'),
        ),
        migrations.AddIndex(
            model_name='serialunit',
            index=models.Index(fields=['item', 'status'], name='ix_su_item_status'),
        ),
        migrations.AddIndex(
            model_name='serialunit',
            index=models.Index(fields=['current_mat'], name='ix_su_current_mat'),
        ),
        migrations.AddIndex(
            model_name='serialunit',
            index=models.Index(fields=['location', 'status'], name='ix_su_loc_status'),
        ),
        migrations.AddIndex(
            model_name='serialunit',
            index=models.Index(fields=['ownership', 'condition'], name='ix_su_owner_cond'),
        ),
        migrations.AddIndex(
            model_name='serialunit',
            index=models.Index(fields=['status'], name='ix_su_status'),
        ),
        migrations.AddIndex(
            model_name='serialunitmathistory',
            index=models.Index(fields=['serial_unit', '-changed_at'], name='ix_sumh_unit_date'),
        ),
        migrations.AddIndex(
            model_name='location',
            index=models.Index(fields=['code'], name='ix_loc_code'),
        ),
        migrations.AddIndex(
            model_name='location',
            index=models.Index(fields=['location_type', 'is_active'], name='ix_loc_type_active'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['sku'], name='ix_item_sku'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['category', 'is_active'], name='ix_item_cat_active'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['bit_design_revision'], name='ix_item_bdr'),
        ),
        migrations.AddIndex(
            model_name='item',
            index=models.Index(fields=['barcode'], name='ix_item_barcode'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['transaction_number'], name='ix_it_txn_number'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['transaction_date'], name='ix_it_txn_date'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['item'], name='ix_it_item'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['serial_unit'], name='ix_it_serial'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['transaction_type'], name='ix_it_type'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['reference_type', 'reference_id'], name='ix_it_reference'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['batch_id'], name='ix_it_batch'),
        ),
        migrations.AddIndex(
            model_name='inventorytransaction',
            index=models.Index(fields=['job_card_id'], name='ix_it_job_card'),
        ),
        migrations.AddIndex(
            model_name='bomline',
            index=models.Index(fields=['bom_header', 'line_number'], name='ix_bl_header_line'),
        ),
        migrations.AddIndex(
            model_name='bomline',
            index=models.Index(fields=['component_item'], name='ix_bl_component'),
        ),
        migrations.AddConstraint(
            model_name='bomline',
            constraint=models.UniqueConstraint(fields=('bom_header', 'line_number'), name='uq_bom_line_number'),
        ),
    ]
