# Generated by Django 5.2.6 on 2025-11-17 11:31

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('hr', '0002_employeedocument_documentrenewal_employeetraining_and_more'),
        ('inventory', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='BatchOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(db_index=True, help_text='Batch code (e.g., 2025-ARDT-LV4-015)', max_length=100, unique=True)),
                ('description', models.CharField(blank=True, default='', help_text='Batch description', max_length=500)),
                ('customer_name', models.CharField(blank=True, default='', help_text='Customer name', max_length=200)),
                ('customer_id', models.BigIntegerField(blank=True, help_text='Future: FK to Customer table', null=True)),
                ('main_order_number', models.CharField(blank=True, default='', help_text='Main customer order/PO number', max_length=100)),
                ('customer_reference', models.CharField(blank=True, default='', help_text="Customer's reference for this batch", max_length=200)),
                ('bit_family', models.CharField(choices=[('PDC', 'PDC Bit'), ('ROLLER_CONE', 'Roller Cone'), ('MATRIX', 'Matrix Infiltration'), ('OTHER', 'Other')], default='PDC', help_text='Product family', max_length=20)),
                ('target_quantity', models.IntegerField(default=1, help_text='Target number of bits/units in batch')),
                ('completed_quantity', models.IntegerField(default=0, help_text='Number of bits/units completed')),
                ('shipped_quantity', models.IntegerField(default=0, help_text='Number of bits/units shipped')),
                ('created_date', models.DateField(auto_now_add=True, help_text='Batch creation date')),
                ('due_date', models.DateField(blank=True, help_text='Target completion date', null=True)),
                ('start_date', models.DateField(blank=True, help_text='Actual start date', null=True)),
                ('completion_date', models.DateField(blank=True, help_text='Actual completion date', null=True)),
                ('status', models.CharField(choices=[('PLANNED', 'Planned'), ('IN_PROGRESS', 'In Progress'), ('PARTIAL_COMPLETE', 'Partially Complete'), ('COMPLETE', 'Complete'), ('ON_HOLD', 'On Hold'), ('CANCELLED', 'Cancelled')], db_index=True, default='PLANNED', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('NORMAL', 'Normal'), ('HIGH', 'High'), ('RUSH', 'Rush'), ('CRITICAL', 'Critical')], db_index=True, default='NORMAL', max_length=10)),
                ('current_location', models.CharField(blank=True, default='', help_text='Current batch location (warehouse, shop floor, etc.)', max_length=100)),
                ('notes', models.TextField(blank=True, default='', help_text='Internal notes')),
                ('special_instructions', models.TextField(blank=True, default='', help_text='Special handling or processing instructions')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Batch Order',
                'verbose_name_plural': 'Batch Orders',
                'db_table': 'production_batch_order',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ChecklistTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('code', models.CharField(db_index=True, help_text='Checklist template code', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Checklist name', max_length=100)),
                ('description', models.TextField(blank=True, default='', help_text='Purpose and usage of this checklist')),
                ('applies_to', models.CharField(choices=[('JOB_CARD', 'Job Card'), ('BATCH', 'Batch Order'), ('ROUTE_STEP', 'Route Step'), ('SERIAL_UNIT', 'Serial Unit')], default='JOB_CARD', help_text='What entity this checklist applies to', max_length=20)),
                ('required_for_release', models.BooleanField(default=False, help_text='All items must be completed before release')),
                ('auto_create_on_job', models.BooleanField(default=False, help_text='Automatically create instance when job card is created')),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('sort_order', models.IntegerField(default=0)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Checklist Template',
                'verbose_name_plural': 'Checklist Templates',
                'db_table': 'production_checklist_template',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ChecklistItemTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('text', models.CharField(help_text='Checklist item text/question', max_length=500)),
                ('required_role', models.CharField(blank=True, default='', help_text='Role required to complete this item (e.g., QC Inspector, Supervisor)', max_length=100)),
                ('is_mandatory', models.BooleanField(default=True, help_text='Item must be completed')),
                ('sequence', models.IntegerField(default=10, help_text='Order in checklist')),
                ('help_text', models.TextField(blank=True, default='', help_text='Additional guidance for completing this item')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('template', models.ForeignKey(help_text='Parent checklist template', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='production.checklisttemplate')),
            ],
            options={
                'verbose_name': 'Checklist Item Template',
                'verbose_name_plural': 'Checklist Item Templates',
                'db_table': 'production_checklist_item_template',
                'ordering': ['template', 'sequence'],
            },
        ),
        migrations.CreateModel(
            name='CutterLayout',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('name', models.CharField(blank=True, default='', help_text="Layout name (e.g., 'Standard 6-blade')", max_length=100)),
                ('description', models.TextField(blank=True, default='', help_text='Description of layout')),
                ('total_rows', models.IntegerField(default=10, help_text='Total number of rows in grid')),
                ('total_columns', models.IntegerField(default=20, help_text='Total number of columns in grid')),
                ('num_blades', models.IntegerField(blank=True, help_text='Number of blades on bit', null=True)),
                ('cutters_per_blade', models.IntegerField(blank=True, help_text='Average cutters per blade', null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('design_revision', models.ForeignKey(help_text='Bit design revision this layout belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='cutter_layouts', to='inventory.bitdesignrevision')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Cutter Layout',
                'verbose_name_plural': 'Cutter Layouts',
                'db_table': 'production_cutter_layout',
            },
        ),
        migrations.CreateModel(
            name='CutterLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('row', models.IntegerField(help_text='Row number (1-based)')),
                ('column', models.IntegerField(help_text='Column number (1-based)')),
                ('blade_number', models.IntegerField(blank=True, help_text='Blade number (1-based)', null=True)),
                ('position_on_blade', models.IntegerField(blank=True, help_text='Position on blade (1=center, increasing outward)', null=True)),
                ('label', models.CharField(blank=True, default='', help_text="Display label (e.g., '1A', '2B', 'B1-P3')", max_length=20)),
                ('expected_cutter_type', models.CharField(blank=True, default='', help_text='Expected cutter type at this location', max_length=100)),
                ('expected_cutter_size', models.CharField(blank=True, default='', help_text="Expected cutter size (e.g., '13mm', '16mm')", max_length=50)),
                ('is_primary', models.BooleanField(default=True, help_text='Primary cutter (vs backup/spare)')),
                ('is_critical', models.BooleanField(default=False, help_text='Critical cutter location')),
                ('sort_order', models.IntegerField(default=0)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('layout', models.ForeignKey(help_text='Parent layout', on_delete=django.db.models.deletion.CASCADE, related_name='locations', to='production.cutterlayout')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Cutter Location',
                'verbose_name_plural': 'Cutter Locations',
                'db_table': 'production_cutter_location',
                'ordering': ['layout', 'sort_order', 'row', 'column'],
            },
        ),
        migrations.CreateModel(
            name='CutterSymbol',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('symbol', models.CharField(db_index=True, help_text='Symbol character (X, O, S, R, L, etc.)', max_length=5, unique=True)),
                ('name', models.CharField(help_text='Symbol meaning', max_length=100)),
                ('description', models.TextField(blank=True, default='', help_text='Detailed description of what this symbol means')),
                ('action', models.CharField(choices=[('REPLACE', 'Replace Cutter'), ('KEEP', 'Keep As-Is'), ('REPAIR_BRAZE', 'Repair with Braze Build-up'), ('ROTATE', 'Rotate Cutter'), ('CLEAN', 'Clean/Rebuild Pocket'), ('BUILD_UP', 'Build-up Structure'), ('INSPECT', 'Further Inspection Needed'), ('OTHER', 'Other Action')], help_text='Primary action to take for this symbol', max_length=20)),
                ('is_replacement', models.BooleanField(default=False, help_text='Symbol indicates cutter replacement (for quotation)')),
                ('is_repair', models.BooleanField(default=False, help_text='Symbol indicates repair work (for quotation)')),
                ('cost_multiplier', models.DecimalField(decimal_places=2, default=1.0, help_text='Cost multiplier for quotation calculations', max_digits=5)),
                ('color_code', models.CharField(blank=True, default='#000000', help_text='Color code for UI display (hex)', max_length=20)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('sort_order', models.IntegerField(default=0)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Cutter Symbol',
                'verbose_name_plural': 'Cutter Symbols',
                'db_table': 'production_cutter_symbol',
                'ordering': ['sort_order', 'symbol'],
            },
        ),
        migrations.CreateModel(
            name='JobCard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('public_id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('job_card_number', models.CharField(db_index=True, help_text='Unique job card number', max_length=100, unique=True)),
                ('customer_order_ref', models.CharField(blank=True, default='', help_text="Customer's order reference", max_length=200)),
                ('customer_name', models.CharField(blank=True, default='', help_text='Customer name (denormalized for quick access)', max_length=200)),
                ('bit_size', models.CharField(blank=True, default='', help_text='Bit size (e.g., 12-1/4 inch)', max_length=50)),
                ('bit_type', models.CharField(blank=True, default='', help_text='Bit type (e.g., HDBS Type, SMI Type)', max_length=100)),
                ('well_name', models.CharField(blank=True, default='', help_text='Well name', max_length=200)),
                ('rig_name', models.CharField(blank=True, default='', help_text='Rig name', max_length=200)),
                ('field_name', models.CharField(blank=True, default='', help_text='Field/area name', max_length=200)),
                ('job_type', models.CharField(choices=[('NEW_PRODUCTION', 'New Production'), ('REPAIR', 'Repair'), ('RETROFIT', 'Retrofit'), ('TEST_BIT', 'Test Bit'), ('REWORK', 'Rework'), ('EVALUATION_ONLY', 'Evaluation Only')], db_index=True, default='REPAIR', help_text='Type of job', max_length=20)),
                ('rework_reason', models.TextField(blank=True, default='', help_text='Reason for rework')),
                ('status', models.CharField(choices=[('NEW', 'New'), ('EVALUATION_IN_PROGRESS', 'Evaluation In Progress'), ('AWAITING_APPROVAL', 'Awaiting Approval'), ('AWAITING_MATERIALS', 'Awaiting Materials'), ('RELEASED_TO_SHOP', 'Released to Shop'), ('IN_PRODUCTION', 'In Production'), ('UNDER_QC', 'Under QC'), ('QC_APPROVED', 'QC Approved'), ('COMPLETE', 'Complete'), ('ON_HOLD', 'On Hold'), ('SCRAPPED', 'Scrapped'), ('CANCELLED', 'Cancelled')], db_index=True, default='NEW', max_length=30)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('NORMAL', 'Normal'), ('HIGH', 'High'), ('RUSH', 'Rush'), ('CRITICAL', 'Critical')], db_index=True, default='NORMAL', max_length=10)),
                ('created_date', models.DateTimeField(default=django.utils.timezone.now, help_text='Job card creation date/time')),
                ('evaluation_started_at', models.DateTimeField(blank=True, help_text='When evaluation began', null=True)),
                ('evaluation_completed_at', models.DateTimeField(blank=True, help_text='When evaluation was completed', null=True)),
                ('released_at', models.DateTimeField(blank=True, help_text='When released to shop floor', null=True)),
                ('production_started_at', models.DateTimeField(blank=True, help_text='When production began', null=True)),
                ('qc_started_at', models.DateTimeField(blank=True, help_text='When QC inspection began', null=True)),
                ('completed_at', models.DateTimeField(blank=True, help_text='When job was completed', null=True)),
                ('planned_start_date', models.DateField(blank=True, help_text='Planned start date', null=True)),
                ('planned_end_date', models.DateField(blank=True, help_text='Planned completion date', null=True)),
                ('actual_start_date', models.DateField(blank=True, help_text='Actual start date', null=True)),
                ('actual_end_date', models.DateField(blank=True, help_text='Actual completion date', null=True)),
                ('estimated_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Estimated job cost', max_digits=12, null=True)),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Actual job cost', max_digits=12, null=True)),
                ('quoted_price', models.DecimalField(blank=True, decimal_places=2, help_text='Quoted price to customer', max_digits=12, null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Internal notes')),
                ('special_instructions', models.TextField(blank=True, default='', help_text='Special processing instructions')),
                ('customer_requirements', models.TextField(blank=True, default='', help_text='Customer-specific requirements')),
                ('shipping_id', models.BigIntegerField(blank=True, help_text='Future: Link to shipping/logistics', null=True)),
                ('batch_order', models.ForeignKey(blank=True, help_text='Parent batch order (optional)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='job_cards', to='production.batchorder')),
                ('bom_header', models.ForeignKey(blank=True, help_text='Specific BOM to use (if different from MAT default)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='job_cards', to='inventory.bomheader')),
                ('closed_by', models.ForeignKey(blank=True, help_text='User who closed the job card', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='closed_job_cards', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('current_mat', models.ForeignKey(blank=True, help_text='Current MAT after changes (retrofit, substitution)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='job_cards_current', to='inventory.bitdesignrevision')),
                ('initial_mat', models.ForeignKey(blank=True, help_text='Initial MAT used for BOM and expectations', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='job_cards_initial', to='inventory.bitdesignrevision')),
                ('released_by', models.ForeignKey(blank=True, help_text='User who released the job card', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='released_job_cards', to=settings.AUTH_USER_MODEL)),
                ('rework_of', models.ForeignKey(blank=True, help_text='Original job card if this is a rework', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='rework_jobs', to='production.jobcard')),
                ('serial_unit', models.ForeignKey(help_text='Physical bit/unit being processed', on_delete=django.db.models.deletion.PROTECT, related_name='job_cards', to='inventory.serialunit')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Job Card',
                'verbose_name_plural': 'Job Cards',
                'db_table': 'production_job_card',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ApiThreadInspection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('inspection_date', models.DateTimeField(default=django.utils.timezone.now, help_text='Date/time of inspection')),
                ('thread_type', models.CharField(choices=[('API_REG', 'API Regular'), ('API_IF', 'API Internal Flush'), ('API_FH', 'API Full Hole'), ('OTHER', 'Other')], default='API_REG', help_text='Type of thread connection', max_length=20)),
                ('thread_size', models.CharField(blank=True, default='', help_text='Thread size specification', max_length=50)),
                ('result', models.CharField(choices=[('PASS', 'Pass'), ('FAIL', 'Fail'), ('REPAIR_REQUIRED', 'Repair Required'), ('CONDITIONAL_PASS', 'Conditional Pass'), ('REJECT', 'Reject')], db_index=True, default='PASS', max_length=20)),
                ('damage_type', models.CharField(choices=[('NONE', 'No Damage'), ('GALLING', 'Galling'), ('THREAD_WEAR', 'Thread Wear'), ('CROSS_THREAD', 'Cross Threading'), ('CORROSION', 'Corrosion'), ('MECHANICAL_DAMAGE', 'Mechanical Damage'), ('SEAL_AREA_DAMAGE', 'Seal Area Damage'), ('MULTIPLE', 'Multiple Issues'), ('OTHER', 'Other')], default='NONE', max_length=30)),
                ('description_of_issue', models.TextField(blank=True, default='', help_text='Detailed description of any issues found')),
                ('measurement_results', models.TextField(blank=True, default='', help_text='Specific measurements taken (e.g., pitch diameter, taper)')),
                ('repair_action', models.TextField(blank=True, default='', help_text='Repair actions taken or recommended')),
                ('repair_completed', models.BooleanField(default=False, help_text='Repair has been completed')),
                ('repair_completed_at', models.DateTimeField(blank=True, null=True)),
                ('final_status', models.CharField(choices=[('PASS', 'Pass'), ('FAIL', 'Fail'), ('REPAIR_REQUIRED', 'Repair Required'), ('CONDITIONAL_PASS', 'Conditional Pass'), ('REJECT', 'Reject')], default='PASS', help_text='Final status after any repairs', max_length=20)),
                ('final_notes', models.TextField(blank=True, default='', help_text='Final inspection notes')),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('has_photos', models.BooleanField(default=False, help_text='Photos attached to this inspection')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('inspected_by', models.ForeignKey(blank=True, help_text='Inspector', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='thread_inspections', to='hr.hremployee')),
                ('repaired_by', models.ForeignKey(blank=True, help_text='Employee who performed repair', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='thread_repairs', to='hr.hremployee')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, help_text='User who verified the inspection', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_thread_inspections', to=settings.AUTH_USER_MODEL)),
                ('job_card', models.ForeignKey(help_text='Job card being inspected', on_delete=django.db.models.deletion.CASCADE, related_name='thread_inspections', to='production.jobcard')),
            ],
            options={
                'verbose_name': 'API Thread Inspection',
                'verbose_name_plural': 'API Thread Inspections',
                'db_table': 'production_api_thread_inspection',
                'ordering': ['-inspection_date'],
            },
        ),
        migrations.CreateModel(
            name='JobChecklistInstance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('name', models.CharField(help_text='Checklist name (copied from template)', max_length=100)),
                ('status', models.CharField(choices=[('NOT_STARTED', 'Not Started'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('BLOCKED', 'Blocked')], db_index=True, default='NOT_STARTED', max_length=20)),
                ('started_at', models.DateTimeField(blank=True, help_text='When checklist was started', null=True)),
                ('completed_at', models.DateTimeField(blank=True, help_text='When checklist was completed', null=True)),
                ('total_items', models.IntegerField(default=0, help_text='Total number of items')),
                ('completed_items', models.IntegerField(default=0, help_text='Number of completed items')),
                ('mandatory_items', models.IntegerField(default=0, help_text='Number of mandatory items')),
                ('mandatory_completed', models.IntegerField(default=0, help_text='Number of mandatory items completed')),
                ('notes', models.TextField(blank=True, default='', help_text='General notes for this checklist instance')),
                ('completed_by', models.ForeignKey(blank=True, help_text='User who marked checklist as complete', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='completed_checklists', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('job_card', models.ForeignKey(help_text='Job card this checklist belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='checklists', to='production.jobcard')),
                ('template', models.ForeignKey(help_text='Template this checklist was created from', on_delete=django.db.models.deletion.PROTECT, related_name='instances', to='production.checklisttemplate')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Job Checklist',
                'verbose_name_plural': 'Job Checklists',
                'db_table': 'production_job_checklist_instance',
                'ordering': ['job_card', 'template__sort_order'],
            },
        ),
        migrations.CreateModel(
            name='JobChecklistItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('text', models.CharField(help_text='Checklist item text', max_length=500)),
                ('required_role', models.CharField(blank=True, default='', help_text='Role required to complete this item', max_length=100)),
                ('is_mandatory', models.BooleanField(default=True, help_text='Item must be completed')),
                ('sequence', models.IntegerField(default=10, help_text='Order in checklist')),
                ('help_text', models.TextField(blank=True, default='', help_text='Guidance for completing this item')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('DONE', 'Done'), ('NOT_APPLICABLE', 'Not Applicable'), ('BLOCKED', 'Blocked')], db_index=True, default='PENDING', max_length=20)),
                ('checked_at', models.DateTimeField(blank=True, help_text='When item was checked', null=True)),
                ('comment', models.TextField(blank=True, default='', help_text='Comments or notes for this item')),
                ('value_entered', models.CharField(blank=True, default='', help_text='Value entered (for items requiring input)', max_length=500)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('checked_by', models.ForeignKey(blank=True, help_text='Employee who checked this item', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='checked_items', to='hr.hremployee')),
                ('checklist', models.ForeignKey(help_text='Parent checklist instance', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='production.jobchecklistinstance')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('item_template', models.ForeignKey(blank=True, help_text='Template this item was created from', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='instances', to='production.checklistitemtemplate')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_checklist_items', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Job Checklist Item',
                'verbose_name_plural': 'Job Checklist Items',
                'db_table': 'production_job_checklist_item',
                'ordering': ['checklist', 'sequence'],
            },
        ),
        migrations.CreateModel(
            name='JobCutterEvaluationHeader',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('evaluation_type', models.CharField(choices=[('INTERNAL_ARDT', 'Internal ARDT Evaluation'), ('ENGINEER_OVERRIDE', 'Engineer Override'), ('EXTERNAL_LSTK', 'External LSTK Evaluation'), ('CUSTOMER_ARAMCO', 'ARAMCO Customer Evaluation'), ('CUSTOMER_OTHER', 'Other Customer Evaluation'), ('FINAL_QC', 'Final QC Evaluation')], db_index=True, default='INTERNAL_ARDT', max_length=30)),
                ('revision_number', models.IntegerField(default=1, help_text='Evaluation revision number')),
                ('evaluated_at', models.DateTimeField(blank=True, help_text='When evaluation was performed', null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('REVIEWED', 'Reviewed'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], db_index=True, default='DRAFT', max_length=20)),
                ('total_cutters', models.IntegerField(default=0)),
                ('replace_count', models.IntegerField(default=0)),
                ('repair_count', models.IntegerField(default=0)),
                ('ok_count', models.IntegerField(default=0)),
                ('rotate_count', models.IntegerField(default=0)),
                ('lost_count', models.IntegerField(default=0)),
                ('comments', models.TextField(blank=True, default='', help_text='General evaluation comments')),
                ('source_description', models.CharField(blank=True, default='', help_text="Source (e.g., 'ARDT Cutter Entry', 'Eval-LSTK')", max_length=200)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('evaluated_by', models.ForeignKey(blank=True, help_text='Employee who performed evaluation', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cutter_evaluations', to='hr.hremployee')),
                ('job_card', models.ForeignKey(help_text='Job card being evaluated', on_delete=django.db.models.deletion.CASCADE, related_name='cutter_evaluations', to='production.jobcard')),
                ('layout', models.ForeignKey(blank=True, help_text='Cutter layout used for this evaluation', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='evaluations', to='production.cutterlayout')),
                ('overrides_evaluation', models.ForeignKey(blank=True, help_text='Evaluation this overrides (for engineer overrides)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='override_evaluations', to='production.jobcutterevaluationheader')),
                ('reviewed_by', models.ForeignKey(blank=True, help_text='User who reviewed this evaluation', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_evaluations', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Cutter Evaluation',
                'verbose_name_plural': 'Cutter Evaluations',
                'db_table': 'production_job_cutter_evaluation_header',
                'ordering': ['job_card', '-revision_number'],
            },
        ),
        migrations.CreateModel(
            name='JobCutterEvaluationDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('row', models.IntegerField(blank=True, help_text='Row position (if no layout)', null=True)),
                ('column', models.IntegerField(blank=True, help_text='Column position (if no layout)', null=True)),
                ('condition_description', models.CharField(blank=True, default='', help_text='Additional condition description', max_length=200)),
                ('notes', models.TextField(blank=True, default='', help_text='Notes for this specific cutter')),
                ('actual_cutter_type', models.CharField(blank=True, default='', help_text='Actual cutter type found', max_length=100)),
                ('actual_cutter_size', models.CharField(blank=True, default='', help_text='Actual cutter size found', max_length=50)),
                ('requires_special_attention', models.BooleanField(default=False, help_text='Needs special handling or attention')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('location', models.ForeignKey(blank=True, help_text='Cutter location being evaluated', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='evaluation_details', to='production.cutterlocation')),
                ('symbol', models.ForeignKey(help_text='Evaluation symbol', on_delete=django.db.models.deletion.PROTECT, related_name='evaluation_details', to='production.cuttersymbol')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('header', models.ForeignKey(help_text='Parent evaluation header', on_delete=django.db.models.deletion.CASCADE, related_name='details', to='production.jobcutterevaluationheader')),
            ],
            options={
                'verbose_name': 'Cutter Evaluation Detail',
                'verbose_name_plural': 'Cutter Evaluation Details',
                'db_table': 'production_job_cutter_evaluation_detail',
                'ordering': ['header', 'row', 'column'],
            },
        ),
        migrations.CreateModel(
            name='JobCutterEvaluationOverride',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('reason_type', models.CharField(choices=[('TECHNICAL', 'Technical Decision'), ('COST', 'Cost Optimization'), ('AVAILABILITY', 'Cutter Availability'), ('CUSTOMER_REQUEST', 'Customer Request'), ('SAFETY', 'Safety Concern'), ('OTHER', 'Other')], default='TECHNICAL', max_length=20)),
                ('reason_detail', models.TextField(help_text='Detailed explanation for override')),
                ('overridden_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('is_approved', models.BooleanField(default=False, help_text='Override has been approved')),
                ('approved_by', models.ForeignKey(blank=True, help_text='Supervisor who approved the override', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_overrides', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('engineer', models.ForeignKey(help_text='Engineer who made the override', on_delete=django.db.models.deletion.PROTECT, related_name='cutter_overrides', to='hr.hremployee')),
                ('new_symbol', models.ForeignKey(help_text='New symbol after override', on_delete=django.db.models.deletion.PROTECT, related_name='overridden_as_new', to='production.cuttersymbol')),
                ('original_detail', models.ForeignKey(help_text='Original evaluation entry being overridden', on_delete=django.db.models.deletion.CASCADE, related_name='overrides', to='production.jobcutterevaluationdetail')),
                ('original_symbol', models.ForeignKey(help_text='Original symbol that was overridden', on_delete=django.db.models.deletion.PROTECT, related_name='overridden_as_original', to='production.cuttersymbol')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Cutter Evaluation Override',
                'verbose_name_plural': 'Cutter Evaluation Overrides',
                'db_table': 'production_job_cutter_evaluation_override',
                'ordering': ['-overridden_at'],
            },
        ),
        migrations.CreateModel(
            name='JobRoute',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('template_used', models.CharField(blank=True, default='', help_text='Template used to generate this route', max_length=100)),
                ('total_planned_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Total planned hours for all steps', max_digits=8, null=True)),
                ('total_actual_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Total actual hours spent', max_digits=8, null=True)),
                ('is_complete', models.BooleanField(db_index=True, default=False, help_text='All steps completed')),
                ('notes', models.TextField(blank=True, default='', help_text='Route-level notes')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('job_card', models.OneToOneField(help_text='Job card this route belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='route', to='production.jobcard')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Job Route',
                'verbose_name_plural': 'Job Routes',
                'db_table': 'production_job_route',
            },
        ),
        migrations.CreateModel(
            name='NdtReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('test_type', models.CharField(choices=[('LPT', 'Liquid Penetrant Testing'), ('MPI', 'Magnetic Particle Inspection'), ('DIE_CHECK', 'Die Check'), ('VISUAL', 'Visual Inspection'), ('UT', 'Ultrasonic Testing'), ('RT', 'Radiographic Testing'), ('OTHER', 'Other')], db_index=True, max_length=20)),
                ('test_date', models.DateTimeField(default=django.utils.timezone.now, help_text='Date/time of test')),
                ('test_procedure', models.CharField(blank=True, default='', help_text='Test procedure/standard used', max_length=200)),
                ('test_area', models.CharField(blank=True, default='', help_text="Area of bit tested (e.g., 'blade faces', 'body', 'connection')", max_length=200)),
                ('result', models.CharField(choices=[('PASS', 'Pass'), ('FAIL', 'Fail'), ('CONDITIONAL', 'Conditional Pass'), ('INCONCLUSIVE', 'Inconclusive'), ('RETEST_REQUIRED', 'Retest Required')], db_index=True, default='PASS', max_length=20)),
                ('defect_severity', models.CharField(choices=[('NONE', 'No Defects'), ('MINOR', 'Minor Defects'), ('MODERATE', 'Moderate Defects'), ('SEVERE', 'Severe Defects'), ('CRITICAL', 'Critical Defects')], default='NONE', max_length=20)),
                ('defects_found', models.TextField(blank=True, default='', help_text='Description of defects found (if any)')),
                ('defect_locations', models.TextField(blank=True, default='', help_text='Location of defects on the bit')),
                ('recommendations', models.TextField(blank=True, default='', help_text='Recommendations based on findings')),
                ('equipment_used', models.CharField(blank=True, default='', help_text='NDT equipment/materials used', max_length=200)),
                ('calibration_ref', models.CharField(blank=True, default='', help_text='Equipment calibration reference', max_length=100)),
                ('ambient_temp', models.DecimalField(blank=True, decimal_places=1, help_text='Ambient temperature during test (Â°C)', max_digits=5, null=True)),
                ('humidity', models.DecimalField(blank=True, decimal_places=1, help_text='Humidity percentage during test', max_digits=5, null=True)),
                ('notes', models.TextField(blank=True, default='', help_text='Additional notes')),
                ('report_number', models.CharField(blank=True, default='', help_text='NDT report/certificate number', max_length=100)),
                ('has_photos', models.BooleanField(default=False, help_text='Photos attached to this report')),
                ('has_report_document', models.BooleanField(default=False, help_text='PDF/document attached')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('job_card', models.ForeignKey(help_text='Job card being tested', on_delete=django.db.models.deletion.CASCADE, related_name='ndt_reports', to='production.jobcard')),
                ('performed_by', models.ForeignKey(blank=True, help_text='Technician who performed the test', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ndt_tests_performed', to='hr.hremployee')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, help_text='Inspector who verified results', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ndt_tests_verified', to='hr.hremployee')),
            ],
            options={
                'verbose_name': 'NDT Report',
                'verbose_name_plural': 'NDT Reports',
                'db_table': 'production_ndt_report',
                'ordering': ['-test_date'],
            },
        ),
        migrations.CreateModel(
            name='OperationDefinition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('code', models.CharField(db_index=True, help_text='Unique operation code (e.g., EVAL-PRE, GRIND-01)', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Operation name', max_length=100)),
                ('description', models.TextField(blank=True, default='', help_text='Detailed description of the operation')),
                ('department', models.CharField(blank=True, default='', help_text='Department responsible (e.g., Production-PDC, QC, NDT)', max_length=50)),
                ('operation_group', models.CharField(blank=True, default='', help_text='Operation group (e.g., Brazing, Grinding, Inspection)', max_length=50)),
                ('default_sequence', models.IntegerField(default=100, help_text='Default position in route sequence')),
                ('default_duration_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Expected duration in hours', max_digits=6, null=True)),
                ('requires_operator', models.BooleanField(default=True, help_text='Operation requires operator assignment')),
                ('requires_supervisor_approval', models.BooleanField(default=False, help_text='Requires supervisor sign-off')),
                ('is_quality_checkpoint', models.BooleanField(default=False, help_text='This is a quality control checkpoint')),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('sort_order', models.IntegerField(default=0)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Operation Definition',
                'verbose_name_plural': 'Operation Definitions',
                'db_table': 'production_operation_definition',
                'ordering': ['sort_order', 'default_sequence', 'code'],
            },
        ),
        migrations.CreateModel(
            name='JobRouteStep',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('remarks', models.CharField(blank=True, default='', max_length=255)),
                ('sequence', models.IntegerField(default=10, help_text='Order in route (10, 20, 30...)')),
                ('planned_start', models.DateTimeField(blank=True, help_text='Planned start time', null=True)),
                ('planned_end', models.DateTimeField(blank=True, help_text='Planned end time', null=True)),
                ('planned_duration_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Planned duration in hours', max_digits=6, null=True)),
                ('actual_start_at', models.DateTimeField(blank=True, help_text='When step actually started', null=True)),
                ('actual_end_at', models.DateTimeField(blank=True, help_text='When step actually ended', null=True)),
                ('paused_at', models.DateTimeField(blank=True, help_text='When step was paused', null=True)),
                ('total_pause_minutes', models.IntegerField(default=0, help_text='Total pause duration in minutes')),
                ('approved_at', models.DateTimeField(blank=True, help_text='When step was approved', null=True)),
                ('status', models.CharField(choices=[('NOT_STARTED', 'Not Started'), ('IN_PROGRESS', 'In Progress'), ('PAUSED', 'Paused'), ('DONE', 'Done'), ('SKIPPED', 'Skipped'), ('BLOCKED', 'Blocked')], db_index=True, default='NOT_STARTED', max_length=20)),
                ('result_notes', models.TextField(blank=True, default='', help_text='Notes/results from this step')),
                ('quality_check_passed', models.BooleanField(blank=True, help_text='Quality check result (if applicable)', null=True)),
                ('blocked_reason', models.TextField(blank=True, default='', help_text='Reason for blocking')),
                ('approved_by', models.ForeignKey(blank=True, help_text='User who approved this step', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_route_steps', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('operator', models.ForeignKey(blank=True, help_text='Operator performing the step', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='route_steps_as_operator', to='hr.hremployee')),
                ('route', models.ForeignKey(help_text='Parent route', on_delete=django.db.models.deletion.CASCADE, related_name='steps', to='production.jobroute')),
                ('supervisor', models.ForeignKey(blank=True, help_text='Supervisor overseeing the step', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='route_steps_as_supervisor', to='hr.hremployee')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(app_label)s_%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('operation', models.ForeignKey(help_text='Operation to perform', on_delete=django.db.models.deletion.PROTECT, related_name='route_steps', to='production.operationdefinition')),
            ],
            options={
                'verbose_name': 'Job Route Step',
                'verbose_name_plural': 'Job Route Steps',
                'db_table': 'production_job_route_step',
                'ordering': ['route', 'sequence'],
            },
        ),
        migrations.AddIndex(
            model_name='batchorder',
            index=models.Index(fields=['code'], name='ix_batch_code'),
        ),
        migrations.AddIndex(
            model_name='batchorder',
            index=models.Index(fields=['status', 'priority'], name='ix_batch_status_prio'),
        ),
        migrations.AddIndex(
            model_name='batchorder',
            index=models.Index(fields=['customer_name', 'status'], name='ix_batch_cust_status'),
        ),
        migrations.AddIndex(
            model_name='batchorder',
            index=models.Index(fields=['due_date'], name='ix_batch_due_date'),
        ),
        migrations.AddIndex(
            model_name='batchorder',
            index=models.Index(fields=['bit_family', 'status'], name='ix_batch_family_stat'),
        ),
        migrations.AddIndex(
            model_name='checklistitemtemplate',
            index=models.Index(fields=['template', 'sequence'], name='ix_clitem_tmpl_seq'),
        ),
        migrations.AddIndex(
            model_name='cutterlayout',
            index=models.Index(fields=['design_revision'], name='ix_cutlayout_design'),
        ),
        migrations.AddIndex(
            model_name='cutterlocation',
            index=models.Index(fields=['layout', 'row', 'column'], name='ix_cutloc_layout_pos'),
        ),
        migrations.AlterUniqueTogether(
            name='cutterlocation',
            unique_together={('layout', 'row', 'column')},
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['job_card_number'], name='ix_jc_number'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['status', 'priority'], name='ix_jc_status_prio'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['batch_order', 'status'], name='ix_jc_batch_status'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['serial_unit'], name='ix_jc_serial_unit'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['job_type', 'status'], name='ix_jc_type_status'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['customer_name', 'status'], name='ix_jc_cust_status'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['created_date'], name='ix_jc_created_date'),
        ),
        migrations.AddIndex(
            model_name='jobcard',
            index=models.Index(fields=['planned_end_date'], name='ix_jc_planned_end'),
        ),
        migrations.AddIndex(
            model_name='apithreadinspection',
            index=models.Index(fields=['job_card'], name='ix_thread_jc'),
        ),
        migrations.AddIndex(
            model_name='apithreadinspection',
            index=models.Index(fields=['result'], name='ix_thread_result'),
        ),
        migrations.AddIndex(
            model_name='apithreadinspection',
            index=models.Index(fields=['inspection_date'], name='ix_thread_date'),
        ),
        migrations.AddIndex(
            model_name='jobchecklistinstance',
            index=models.Index(fields=['job_card', 'status'], name='ix_chklist_jc_status'),
        ),
        migrations.AddIndex(
            model_name='jobchecklistinstance',
            index=models.Index(fields=['status'], name='ix_chklist_status'),
        ),
        migrations.AddIndex(
            model_name='jobchecklistitem',
            index=models.Index(fields=['checklist', 'sequence'], name='ix_chkitem_chk_seq'),
        ),
        migrations.AddIndex(
            model_name='jobchecklistitem',
            index=models.Index(fields=['status'], name='ix_chkitem_status'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationheader',
            index=models.Index(fields=['job_card', 'evaluation_type'], name='ix_cuteval_jc_type'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationheader',
            index=models.Index(fields=['status'], name='ix_cuteval_status'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationheader',
            index=models.Index(fields=['evaluated_by'], name='ix_cuteval_by'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationdetail',
            index=models.Index(fields=['header', 'row', 'column'], name='ix_cutdetail_hdr_pos'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationdetail',
            index=models.Index(fields=['symbol'], name='ix_cutdetail_symbol'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationoverride',
            index=models.Index(fields=['original_detail'], name='ix_cutover_detail'),
        ),
        migrations.AddIndex(
            model_name='jobcutterevaluationoverride',
            index=models.Index(fields=['engineer'], name='ix_cutover_engineer'),
        ),
        migrations.AddIndex(
            model_name='jobroute',
            index=models.Index(fields=['job_card'], name='ix_route_jc'),
        ),
        migrations.AddIndex(
            model_name='jobroute',
            index=models.Index(fields=['is_complete'], name='ix_route_complete'),
        ),
        migrations.AddIndex(
            model_name='ndtreport',
            index=models.Index(fields=['job_card', 'test_type'], name='ix_ndt_jc_type'),
        ),
        migrations.AddIndex(
            model_name='ndtreport',
            index=models.Index(fields=['result'], name='ix_ndt_result'),
        ),
        migrations.AddIndex(
            model_name='ndtreport',
            index=models.Index(fields=['test_date'], name='ix_ndt_date'),
        ),
        migrations.AddIndex(
            model_name='operationdefinition',
            index=models.Index(fields=['code'], name='ix_opdef_code'),
        ),
        migrations.AddIndex(
            model_name='operationdefinition',
            index=models.Index(fields=['department', 'is_active'], name='ix_opdef_dept_active'),
        ),
        migrations.AddIndex(
            model_name='jobroutestep',
            index=models.Index(fields=['route', 'sequence'], name='ix_step_route_seq'),
        ),
        migrations.AddIndex(
            model_name='jobroutestep',
            index=models.Index(fields=['status'], name='ix_step_status'),
        ),
        migrations.AddIndex(
            model_name='jobroutestep',
            index=models.Index(fields=['operator'], name='ix_step_operator'),
        ),
        migrations.AddIndex(
            model_name='jobroutestep',
            index=models.Index(fields=['actual_start_at'], name='ix_step_start'),
        ),
    ]
