{% extends 'base_auth.html' %}

{% block title %}Login - Floor Management System{% endblock %}

{% block auth_title %}Welcome Back{% endblock %}
{% block auth_subtitle %}Enter your credentials to access the system{% endblock %}

{% block auth_content %}
<form method="post" action="{% url 'skeleton:login' %}">
    {% csrf_token %}

    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ form.non_field_errors|first }}
        </div>
    {% endif %}

    <!-- Username Field -->
    <div class="mb-3">
        <label for="{{ form.username.id_for_label }}" class="form-label">
            <i class="bi bi-person me-1"></i> Username
        </label>
        <input type="text"
               class="form-control {% if form.username.errors %}is-invalid{% endif %}"
               id="{{ form.username.id_for_label }}"
               name="{{ form.username.name }}"
               value="{{ form.username.value|default:'' }}"
               placeholder="Enter your username"
               required
               autofocus>
        {% if form.username.errors %}
            <div class="invalid-feedback">
                {{ form.username.errors|first }}
            </div>
        {% endif %}
    </div>

    <!-- Password Field -->
    <div class="mb-3">
        <label for="{{ form.password.id_for_label }}" class="form-label">
            <i class="bi bi-lock me-1"></i> Password
        </label>
        <div class="input-group">
            <input type="password"
                   class="form-control {% if form.password.errors %}is-invalid{% endif %}"
                   id="{{ form.password.id_for_label }}"
                   name="{{ form.password.name }}"
                   placeholder="Enter your password"
                   required>
            <span class="input-group-text password-toggle" style="cursor: pointer;">
                <i class="bi bi-eye"></i>
            </span>
            {% if form.password.errors %}
                <div class="invalid-feedback">
                    {{ form.password.errors|first }}
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Remember Me & Forgot Password -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="rememberMe" name="remember">
            <label class="form-check-label" for="rememberMe">
                Remember me
            </label>
        </div>
        <a href="{% url 'skeleton:password_reset' %}" class="btn-link">
            Forgot password?
        </a>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary w-100 mb-3">
        <i class="bi bi-box-arrow-in-right me-2"></i> Login
    </button>

    <!-- Hidden Next Field -->
    {% if request.GET.next %}
        <input type="hidden" name="next" value="{{ request.GET.next }}">
    {% endif %}
</form>

<!-- Divider -->
<div class="divider">
    <span>New to the system?</span>
</div>

<!-- Additional Links -->
<div class="text-center">
    <p class="text-muted mb-0">
        Contact your administrator for access
    </p>
</div>
{% endblock %}

{% block auth_footer %}
<div class="auth-footer">
    <p class="mb-0">
        <small>&copy; {% now "Y" %} Floor Management System. All rights reserved.</small>
    </p>
</div>
{% endblock %}
