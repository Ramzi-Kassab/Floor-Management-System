{% extends 'base_auth.html' %}

{% block title %}Change Password - Floor Management System{% endblock %}

{% block auth_title %}Change Password{% endblock %}
{% block auth_subtitle %}Update your account password{% endblock %}

{% block auth_content %}
<form method="post" action="{% url 'skeleton:password_change' %}">
    {% csrf_token %}

    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ form.non_field_errors|first }}
        </div>
    {% endif %}

    <!-- Old Password -->
    <div class="mb-3">
        <label for="{{ form.old_password.id_for_label }}" class="form-label">
            <i class="bi bi-shield-lock me-1"></i> Current Password
        </label>
        <div class="input-group">
            <input type="password"
                   class="form-control {% if form.old_password.errors %}is-invalid{% endif %}"
                   id="{{ form.old_password.id_for_label }}"
                   name="{{ form.old_password.name }}"
                   placeholder="Enter current password"
                   required
                   autofocus>
            <span class="input-group-text password-toggle">
                <i class="bi bi-eye"></i>
            </span>
        </div>
        {% if form.old_password.errors %}
            <div class="text-danger small mt-1">{{ form.old_password.errors|first }}</div>
        {% endif %}
    </div>

    <!-- New Password -->
    <div class="mb-3">
        <label for="{{ form.new_password1.id_for_label }}" class="form-label">
            <i class="bi bi-key me-1"></i> New Password
        </label>
        <div class="input-group">
            <input type="password"
                   class="form-control {% if form.new_password1.errors %}is-invalid{% endif %}"
                   id="{{ form.new_password1.id_for_label }}"
                   name="{{ form.new_password1.name }}"
                   placeholder="Enter new password"
                   required>
            <span class="input-group-text password-toggle">
                <i class="bi bi-eye"></i>
            </span>
        </div>
        {% if form.new_password1.errors %}
            <div class="text-danger small mt-1">{{ form.new_password1.errors|first }}</div>
        {% endif %}
        <div class="form-text">
            <i class="bi bi-info-circle me-1"></i> Password must be at least 8 characters long
        </div>
    </div>

    <!-- Confirm New Password -->
    <div class="mb-4">
        <label for="{{ form.new_password2.id_for_label }}" class="form-label">
            <i class="bi bi-key-fill me-1"></i> Confirm New Password
        </label>
        <div class="input-group">
            <input type="password"
                   class="form-control {% if form.new_password2.errors %}is-invalid{% endif %}"
                   id="{{ form.new_password2.id_for_label }}"
                   name="{{ form.new_password2.name }}"
                   placeholder="Confirm new password"
                   required>
            <span class="input-group-text password-toggle">
                <i class="bi bi-eye"></i>
            </span>
        </div>
        {% if form.new_password2.errors %}
            <div class="text-danger small mt-1">{{ form.new_password2.errors|first }}</div>
        {% endif %}
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary w-100 mb-3">
        <i class="bi bi-check-circle me-2"></i> Change Password
    </button>

    <a href="{% url 'skeleton:dashboard' %}" class="btn btn-outline-secondary w-100">
        <i class="bi bi-x-circle me-2"></i> Cancel
    </a>
</form>
{% endblock %}
